<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>小兔鲜项目 | 是小白菜哦</title><meta name="keywords" content="前端项目"><meta name="author" content="小白菜"><meta name="copyright" content="小白菜"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vue3入门认识Vue31. Vue3组合式API体验 通过 Counter 案例 体验Vue3新引入的组合式API 并且需要注意的是Vue3是向下兼容的，也就是说你可以在Vue3的项目中继续写Vue2的代码  &lt;script&gt;export default &amp;#123;  data()&amp;#123;    return &amp;#123;      count:0    &amp;#125;  &amp;#1">
<meta property="og:type" content="article">
<meta property="og:title" content="小兔鲜项目">
<meta property="og:url" content="http://example.com/2023/06/18/%E5%B0%8F%E5%85%94%E9%B2%9C%E9%A1%B9%E7%9B%AE/index.html">
<meta property="og:site_name" content="是小白菜哦">
<meta property="og:description" content="Vue3入门认识Vue31. Vue3组合式API体验 通过 Counter 案例 体验Vue3新引入的组合式API 并且需要注意的是Vue3是向下兼容的，也就是说你可以在Vue3的项目中继续写Vue2的代码  &lt;script&gt;export default &amp;#123;  data()&amp;#123;    return &amp;#123;      count:0    &amp;#125;  &amp;#1">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg">
<meta property="article:published_time" content="2023-06-18T09:42:25.000Z">
<meta property="article:modified_time" content="2023-07-02T06:01:25.045Z">
<meta property="article:author" content="小白菜">
<meta property="article:tag" content="前端项目">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg"><link rel="shortcut icon" href="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/132124.png"><link rel="canonical" href="http://example.com/2023/06/18/%E5%B0%8F%E5%85%94%E9%B2%9C%E9%A1%B9%E7%9B%AE/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '小兔鲜项目',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-02 14:01:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><script src="/live2d-widget/autoload.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/plugins.min.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/pic.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">是小白菜哦</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">小兔鲜项目</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-18T09:42:25.000Z" title="发表于 2023-06-18 17:42:25">2023-06-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-07-02T06:01:25.045Z" title="更新于 2023-07-02 14:01:25">2023-07-02</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="小兔鲜项目"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Vue3入门"><a href="#Vue3入门" class="headerlink" title="Vue3入门"></a>Vue3入门</h1><h2 id="认识Vue3"><a href="#认识Vue3" class="headerlink" title="认识Vue3"></a>认识Vue3</h2><h3 id="1-Vue3组合式API体验"><a href="#1-Vue3组合式API体验" class="headerlink" title="1. Vue3组合式API体验"></a>1. Vue3组合式API体验</h3><blockquote>
<p>通过 Counter 案例 体验Vue3新引入的组合式API</p>
<p>并且需要注意的是Vue3是向下兼容的，也就是说你可以在Vue3的项目中继续写Vue2的代码</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count:0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    addCount()&#123;</span><br><span class="line">      this.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const count = ref(0)</span><br><span class="line">const addCount = ()=&gt; count.value++</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<ol>
<li>代码量变少</li>
<li>分散式维护变成集中式维护</li>
</ol>
<h3 id="2-Vue3更多的优势"><a href="#2-Vue3更多的优势" class="headerlink" title="2. Vue3更多的优势"></a>2. Vue3更多的优势</h3><p><img src="/../pic/1678178235504-912ad469-1a9a-469d-a8dc-411a55963329.png" alt="image.png"></p>
<h2 id="使用create-vue搭建Vue3项目"><a href="#使用create-vue搭建Vue3项目" class="headerlink" title="使用create-vue搭建Vue3项目"></a>使用create-vue搭建Vue3项目</h2><h3 id="1-认识create-vue"><a href="#1-认识create-vue" class="headerlink" title="1. 认识create-vue"></a>1. 认识create-vue</h3><blockquote>
<p>create-vue是Vue官方新的脚手架工具，底层切换到了 vite （下一代前端工具链），为开发提供极速响应</p>
</blockquote>
<p><img src="/../pic/1678178479590-ac164009-4a72-4448-85bf-67dc13f3d0c4.png" alt="image.png"></p>
<h3 id="2-使用create-vue创建项目"><a href="#2-使用create-vue创建项目" class="headerlink" title="2. 使用create-vue创建项目"></a>2. 使用create-vue创建项目</h3><blockquote>
<p>前置条件 - 已安装16.0或更高版本的Node.js，</p>
<p>C:\Users\Xu&gt;node -v<br>v16.16.0</p>
<p>可以看到这里我是16.16版本，希望不会出现依赖冲突</p>
</blockquote>
<p>执行如下命令，这一指令将会安装并执行 create-vue</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init vue@latest</span><br></pre></td></tr></table></figure>

<p><img src="/../pic/1678178685782-71a3b311-423d-4528-aae9-85e6068db452.png" alt="image.png"></p>
<p>我去，这看着比vue2页面高级多了</p>
<p><img src="/../pic/image-20230618181913327.png" alt="image-20230618181913327"></p>
<h2 id="熟悉项目和关键文件"><a href="#熟悉项目和关键文件" class="headerlink" title="熟悉项目和关键文件"></a>熟悉项目和关键文件</h2><p><img src="/../pic/1678178749511-f4a42cbf-987b-46a7-9a01-9cd4f00a5fcf.png" alt="image.png"></p>
<h2 id="组合式API-setup选项"><a href="#组合式API-setup选项" class="headerlink" title="组合式API - setup选项"></a>组合式API - setup选项</h2><h3 id="1-setup选项的写法和执行时机"><a href="#1-setup选项的写法和执行时机" class="headerlink" title="1. setup选项的写法和执行时机"></a>1. setup选项的写法和执行时机</h3><p>写法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    setup()&#123;</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line">    beforeCreate()&#123;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>执行时机</p>
<blockquote>
<p>在beforeCreate钩子之前执行</p>
</blockquote>
<p><img src="/../pic/1678179048672-603fdc19-4a41-4542-af55-702776625358.png" alt="image.png"></p>
<h3 id="2-setup中写代码的特点"><a href="#2-setup中写代码的特点" class="headerlink" title="2. setup中写代码的特点"></a>2. setup中写代码的特点</h3><blockquote>
<p>在setup函数中写的数据和方法需要在末尾以对象的方式return，才能给模版使用</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    setup()&#123;</span><br><span class="line">      const message = &#x27;this is message&#x27;</span><br><span class="line">      const logMessage = ()=&gt;&#123;</span><br><span class="line">        console.log(message)</span><br><span class="line">      &#125;</span><br><span class="line">      // 必须return才可以</span><br><span class="line">      return &#123;</span><br><span class="line">        message,</span><br><span class="line">        logMessage</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-lt-script-setup-gt-语法糖"><a href="#3-lt-script-setup-gt-语法糖" class="headerlink" title="3. &lt;script setup&gt;语法糖"></a>3. <code>&lt;script setup&gt;</code>语法糖</h3><blockquote>
<p>script标签添加 setup标记，不需要再写导出语句，默认会添加导出语句</p>
</blockquote>
<p><img src="/../pic/image-20230618193611568.png" alt="image-20230618193611568"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  const message = &#x27;this is message&#x27;</span><br><span class="line">  const logMessage = ()=&gt;&#123;</span><br><span class="line">    console.log(message)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>需要注意的是。setup中的this已经不指向组件实例啦，指向的undefined。</p>
<h2 id="组合式API-reactive和ref函数"><a href="#组合式API-reactive和ref函数" class="headerlink" title="组合式API - reactive和ref函数"></a>组合式API - reactive和ref函数</h2><h3 id="1-reactive"><a href="#1-reactive" class="headerlink" title="1. reactive"></a>1. reactive</h3><blockquote>
<p>接受<strong>对象类型数据</strong>的参数传入并返回一个响应式的对象</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"> // 导入</span><br><span class="line"> import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"> // 执行函数 传入参数 变量接收</span><br><span class="line"> const state = reactive(&#123;</span><br><span class="line">   msg:&#x27;this is msg&#x27;</span><br><span class="line"> &#125;)</span><br><span class="line"> const setSate = ()=&gt;&#123;</span><br><span class="line">   // 修改数据更新视图</span><br><span class="line">   state.msg = &#x27;this is new msg&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &#123;&#123; state.msg &#125;&#125;</span><br><span class="line">  &lt;button @click=&quot;setState&quot;&gt;change msg&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-ref"><a href="#2-ref" class="headerlink" title="2. ref"></a>2. ref</h3><blockquote>
<p>接收<strong>简单类型</strong>或者<strong>对象类型</strong>的数据传入并返回一个响应式的对象</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"> // 导入</span><br><span class="line"> import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"> // 执行函数 传入参数 变量接收</span><br><span class="line"> const count = ref(0)</span><br><span class="line"> const setCount = ()=&gt;&#123;</span><br><span class="line">   // 修改数据更新视图必须加上.value</span><br><span class="line">   count.value++</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;setCount&quot;&gt;&#123;&#123;count&#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-reactive-对比-ref"><a href="#3-reactive-对比-ref" class="headerlink" title="3. reactive 对比 ref"></a>3. reactive 对比 ref</h3><ol>
<li>都是用来生成响应式数据</li>
<li>不同点<ol>
<li>reactive不能处理简单类型的数据</li>
<li>ref参数类型支持更好，但是必须通过.value做访问修改</li>
<li>ref函数内部的实现依赖于reactive函数</li>
</ol>
</li>
<li>在实际工作中的推荐<ol>
<li>推荐使用ref函数，减少记忆负担，小兔鲜项目都使用<strong>ref</strong></li>
</ol>
</li>
</ol>
<h2 id="组合式API-computed"><a href="#组合式API-computed" class="headerlink" title="组合式API - computed"></a>组合式API - computed</h2><blockquote>
<p>计算属性基本思想和Vue2保持一致，组合式API下的计算属性只是修改了API写法</p>
</blockquote>
<p>下面这个计算属性会检测原始数据的变化，如果原始数据改变了，那么计算属性也会被调用！</p>
<p><img src="/../pic/image-20230618195919871.png" alt="image-20230618195919871"></p>
<h2 id="组合式API-watch"><a href="#组合式API-watch" class="headerlink" title="组合式API - watch"></a>组合式API - watch</h2><blockquote>
<p>侦听一个或者多个数据的变化，数据变化时执行回调函数，两个额外参数</p>
<ul>
<li>immediate控制立刻执行</li>
<li>deep开启深度侦听</li>
</ul>
</blockquote>
<h3 id="1-侦听单个数据"><a href="#1-侦听单个数据" class="headerlink" title="1. 侦听单个数据"></a>1. 侦听单个数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch(count, (newValue, oldValue)=&gt;&#123;//一个是变化之前的老值，一个是变化之后的新值</span><br><span class="line">    console.log(`count发生了变化，老值为$&#123;oldValue&#125;,新值为$&#123;newValue&#125;`)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-侦听多个数据"><a href="#2-侦听多个数据" class="headerlink" title="2. 侦听多个数据"></a>2. 侦听多个数据</h3><blockquote>
<p>侦听多个数据，第一个参数可以改写成数组的写法</p>
<p>这两个数据任何一个变化都会引起函数的触发！</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  const name = ref(&#x27;cp&#x27;)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch([count, name], ([newCount, newName],[oldCount,oldName])=&gt;&#123;</span><br><span class="line">    console.log(`count或者name变化了，[newCount, newName],[oldCount,oldName])</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-immediate"><a href="#3-immediate" class="headerlink" title="3. immediate"></a>3. immediate</h3><blockquote>
<p>在侦听器创建时立即触发回调（第一次就执行），响应式数据变化之后继续执行回调</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch(count, (newValue, oldValue)=&gt;&#123;</span><br><span class="line">    console.log(`count发生了变化，老值为$&#123;oldValue&#125;,新值为$&#123;newValue&#125;`)</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    immediate: true</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-deep"><a href="#4-deep" class="headerlink" title="4. deep"></a>4. deep</h3><blockquote>
<p>通过watch监听的ref对象默认是浅层侦听的，直接修改嵌套的对象属性不会触发回调执行，需要开启deep</p>
<p>需要注意的是deep有性能损耗，尽量不要使用deep</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const state = ref(&#123; count: 0 &#125;)</span><br><span class="line">  // 2. 监听对象state</span><br><span class="line">  watch(state, ()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;数据变化了&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  const changeStateByCount = ()=&gt;&#123;</span><br><span class="line">    // 直接修改不会引发回调执行</span><br><span class="line">    state.value.count++</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>添加deep属性就可以触发了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const state = ref(&#123; count: 0 &#125;)</span><br><span class="line">  // 2. 监听对象state 并开启deep</span><br><span class="line">  watch(state, ()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;数据变化了&#x27;)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  const changeStateByCount = ()=&gt;&#123;</span><br><span class="line">    // 此时修改可以触发回调</span><br><span class="line">    state.value.count++</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-精确侦听对象的某个属性"><a href="#5-精确侦听对象的某个属性" class="headerlink" title="5.精确侦听对象的某个属性"></a>5.精确侦听对象的某个属性</h3><p>需求：在不开启deep的前提下，侦听age的变化，只有age变化时才执行回调</p>
<p><img src="/../pic/image-20230618212450674.png" alt="image-20230618212450674"></p>
<h2 id="组合式API-生命周期函数"><a href="#组合式API-生命周期函数" class="headerlink" title="组合式API - 生命周期函数"></a>组合式API - 生命周期函数</h2><h3 id="1-选项式对比组合式"><a href="#1-选项式对比组合式" class="headerlink" title="1. 选项式对比组合式"></a>1. 选项式对比组合式</h3><p><img src="/../pic/1678183720098-4d40e806-bc0d-4c38-bcbe-9aed440f6b23.png" alt="image.png"></p>
<h3 id="2-生命周期函数基本使用"><a href="#2-生命周期函数基本使用" class="headerlink" title="2. 生命周期函数基本使用"></a>2. 生命周期函数基本使用</h3><blockquote>
<ol>
<li>导入生命周期函数</li>
<li>执行生命周期函数，传入回调</li>
</ol>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;scirpt setup&gt;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  // 自定义逻辑</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-执行多次"><a href="#3-执行多次" class="headerlink" title="3. 执行多次"></a>3. 执行多次</h3><blockquote>
<p>生命周期函数执行多次的时候，会按照顺序依次执行</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;scirpt setup&gt;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  // 自定义逻辑</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  // 自定义逻辑</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="组合式API-父子通信"><a href="#组合式API-父子通信" class="headerlink" title="组合式API - 父子通信"></a>组合式API - 父子通信</h2><h3 id="1-父传子"><a href="#1-父传子" class="headerlink" title="1. 父传子"></a>1. 父传子</h3><p>这里注意setup语法糖自动为我们注册了组件，所以我们不用在写components进行注册啦</p>
<blockquote>
<p>基本思想</p>
<ol>
<li>父组件中给子组件绑定属性</li>
<li>子组件内部通过props选项接收数据</li>
</ol>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1678184258336-94b25c26-3150-456b-8981-64017ce7b021.png#averageHue=%2323282f&clientId=ud0819acc-4d21-4&from=paste&height=337&id=u6f845ad3&name=image.png&originHeight=674&originWidth=2402&originalType=binary&ratio=2&rotation=0&showTitle=false&size=416739&status=done&style=none&taskId=ubb5c9d64-f3d7-4a1b-bc05-9bf2af1e24d&title=&width=1201" alt="image.png"></p>
<h3 id="2-子传父"><a href="#2-子传父" class="headerlink" title="2. 子传父"></a>2. 子传父</h3><blockquote>
<p>基本思想</p>
<ol>
<li>父组件中给子组件标签通过@绑定事件</li>
<li>子组件内部通过 emit 方法触发事件</li>
</ol>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1678184380538-99cfc459-3e2e-4d2e-9162-350ef5f97ec6.png#averageHue=%23242830&clientId=ud0819acc-4d21-4&from=paste&height=388&id=u4588c125&name=image.png&originHeight=776&originWidth=2284&originalType=binary&ratio=2&rotation=0&showTitle=false&size=573924&status=done&style=none&taskId=ue5c30a58-7910-4a5b-8325-7e572c6348e&title=&width=1142" alt="image.png"></p>
<h2 id="组合式API-模版引用"><a href="#组合式API-模版引用" class="headerlink" title="组合式API - 模版引用"></a>组合式API - 模版引用</h2><blockquote>
<p>概念：通过 ref标识 获取真实的 dom对象或者组件实例对象</p>
</blockquote>
<h3 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1. 基本使用"></a>1. 基本使用</h3><blockquote>
<p>实现步骤：</p>
<ol>
<li>调用ref函数生成一个ref对象</li>
<li>通过ref标识绑定ref对象到标签</li>
</ol>
</blockquote>
<img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1678184653565-b85c6f60-1089-4ad6-bed7-bbf781863db9.png#averageHue=%2324282f&clientId=ud0819acc-4d21-4&from=paste&height=442&id=u45efd4ee&name=image.png&originHeight=884&originWidth=1092&originalType=binary&ratio=2&rotation=0&showTitle=false&size=287093&status=done&style=none&taskId=u8dba8092-8819-44b3-a2ef-769257a611a&title=&width=546" alt="image.png" style="zoom:50%;" />

<p>之后这个dom就被绑定到h1Ref对象身上了，同理也可以得到组件实例对象</p>
<p><img src="/../pic/image-20230618214430735.png" alt="image-20230618214430735"></p>
<h3 id="2-defineExpose"><a href="#2-defineExpose" class="headerlink" title="2. defineExpose"></a>2. defineExpose</h3><blockquote>
<p>默认情况下在<code> &lt;script setup&gt;</code>语法糖下组件内部的属性和方法是不开放给<strong>父组件</strong>(也就是说这个defineExpose是写在子组件里面的)访问的，可以通过defineExpose编译宏指定哪些属性和方法容许访问</p>
</blockquote>
<p>说明：下面的代码将子组件里面的testMessage属性暴露出来，使之可以被父组件访问到</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1678184774906-7486a911-d18c-42e8-9aa7-fe2caa35e104.png#averageHue=%23ecf2ee&clientId=ud0819acc-4d21-4&from=paste&height=292&id=u0d5c6487&name=image.png&originHeight=584&originWidth=2512&originalType=binary&ratio=2&rotation=0&showTitle=false&size=239701&status=done&style=none&taskId=ub87fd095-cc3e-4e44-92f6-7c9643f831a&title=&width=1256" alt="image.png"></p>
<h2 id="组合式API-provide和inject"><a href="#组合式API-provide和inject" class="headerlink" title="组合式API - provide和inject"></a>组合式API - provide和inject</h2><h3 id="1-作用和场景"><a href="#1-作用和场景" class="headerlink" title="1. 作用和场景"></a>1. 作用和场景</h3><blockquote>
<p>顶层组件向任意的底层组件传递数据和方法，实现跨层组件通信</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1678185158603-5ae6c0e5-7baa-4de9-8a54-d1864d6c45d3.png#averageHue=%23fdf6ef&clientId=ud0819acc-4d21-4&from=paste&height=596&id=ua50e576b&name=image.png&originHeight=1192&originWidth=2558&originalType=binary&ratio=2&rotation=0&showTitle=false&size=414782&status=done&style=none&taskId=u0792870d-aa73-4c03-8342-aaa56e5d8fb&title=&width=1279" alt="image.png"></p>
<h3 id="2-跨层传递普通数据"><a href="#2-跨层传递普通数据" class="headerlink" title="2. 跨层传递普通数据"></a>2. 跨层传递普通数据</h3><blockquote>
<p>实现步骤</p>
<ol>
<li>顶层组件通过 <code>provide</code> 函数提供数据</li>
<li>底层组件通过 <code>inject</code> 函数提供数据</li>
</ol>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1678185321144-61e96ddf-f56c-4d57-83bc-c3c6899f72b2.png#averageHue=%23e4efe5&clientId=ud0819acc-4d21-4&from=paste&height=435&id=u9eb7aecf&name=image.png&originHeight=870&originWidth=1736&originalType=binary&ratio=2&rotation=0&showTitle=false&size=242848&status=done&style=none&taskId=u3d40b793-c4bc-44e7-83d9-4df25e56a7d&title=&width=868" alt="image.png"></p>
<p><img src="/../pic/image-20230618215039567.png" alt="image-20230618215039567"></p>
<h3 id="3-跨层传递响应式数据"><a href="#3-跨层传递响应式数据" class="headerlink" title="3. 跨层传递响应式数据"></a>3. 跨层传递响应式数据</h3><blockquote>
<p>在调用provide函数时，第二个参数设置为ref对象</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1678185454566-b866e7f4-fa23-4c44-a199-8ca19b7d438e.png#averageHue=%2381b27d&clientId=ud0819acc-4d21-4&from=paste&height=473&id=u4efc7283&name=image.png&originHeight=946&originWidth=1732&originalType=binary&ratio=2&rotation=0&showTitle=false&size=237788&status=done&style=none&taskId=uf829094c-f2f8-4ca1-a8ed-c20f9eb79e4&title=&width=866" alt="image.png"></p>
<h3 id="4-跨层传递方法"><a href="#4-跨层传递方法" class="headerlink" title="4. 跨层传递方法"></a>4. 跨层传递方法</h3><blockquote>
<p>顶层组件可以向底层组件传递方法，底层组件调用方法修改顶层组件的数据</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1678185556536-669d0753-2dda-41ae-a750-b0e32f837d42.png#averageHue=%2394b88e&clientId=ud0819acc-4d21-4&from=paste&height=391&id=u449ca48f&name=image.png&originHeight=782&originWidth=2556&originalType=binary&ratio=2&rotation=0&showTitle=false&size=242321&status=done&style=none&taskId=u80c0e832-0efd-4886-9a15-05ebfb4c772&title=&width=1278" alt="image.png"></p>
<h1 id="Pinia入门"><a href="#Pinia入门" class="headerlink" title="Pinia入门"></a>Pinia入门</h1><h2 id="什么是pinia"><a href="#什么是pinia" class="headerlink" title="什么是pinia"></a>什么是pinia</h2><p>Pinia 是 Vue 的专属状态管理库，可以实现跨组件或页面共享状态，是 vuex 状态管理工具的替代品，和 Vuex相比，具备以下优势</p>
<ol>
<li>提供更加简单的API （去掉了 mutation ）</li>
<li>提供符合组合式API风格的API （和 Vue3 新语法统一）</li>
<li>去掉了modules的概念，每一个store都是一个独立的模块</li>
<li>搭配 TypeScript 一起使用提供可靠的类型推断</li>
</ol>
<h2 id="创建空Vue项目并安装Pinia"><a href="#创建空Vue项目并安装Pinia" class="headerlink" title="创建空Vue项目并安装Pinia"></a>创建空Vue项目并安装Pinia</h2><h3 id="1-创建空Vue项目"><a href="#1-创建空Vue项目" class="headerlink" title="1. 创建空Vue项目"></a>1. 创建空Vue项目</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init vue@latest</span><br></pre></td></tr></table></figure>

<h3 id="2-安装Pinia并注册"><a href="#2-安装Pinia并注册" class="headerlink" title="2. 安装Pinia并注册"></a>2. 安装Pinia并注册</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i pinia</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="comment">// 以插件的形式注册</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="实现counter"><a href="#实现counter" class="headerlink" title="实现counter"></a>实现counter</h2><blockquote>
<p>核心步骤：</p>
<ol>
<li>定义store</li>
<li>组件使用store</li>
</ol>
</blockquote>
<p>1- 定义store</p>
<p>@&#x2F;stores&#x2F;counter.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//这里导出方法。这个方法最好以use开头....</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;counter&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 数据 （state）</span></span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 修改数据的方法 （action,这里既支持同步又支持异步）</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    count.<span class="property">value</span>++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 以对象形式返回</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    count,</span><br><span class="line">    increment</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2- 组件使用store</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入use方法</span><br><span class="line">  import &#123; useCounterStore &#125; from &#x27;@/stores/counter&#x27;</span><br><span class="line">  // 2. 执行方法得到store， store里有数据和方法</span><br><span class="line">  const counterStore = useCounterStore()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;button @click=&quot;counterStore.increment&quot;&gt;</span><br><span class="line">    &#123;&#123; counterStore.count &#125;&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="实现getters"><a href="#实现getters" class="headerlink" title="实现getters"></a>实现getters</h2><blockquote>
<p>getters直接使用计算属性即可实现</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数据（state）</span></span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="comment">// getter (computed)</span></span><br><span class="line"><span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h2 id="异步action"><a href="#异步action" class="headerlink" title="异步action"></a>异步action</h2><blockquote>
<p>思想：action函数既支持同步也支持异步，和在组件中发送网络请求写法保持一致<br>步骤：</p>
<ol>
<li>store中定义action</li>
<li>组件中触发action</li>
</ol>
</blockquote>
<p>1- store中定义action</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_URL</span> = <span class="string">&#x27;http://geek.itheima.net/v1_0/channels&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;counter&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 数据</span></span><br><span class="line">  <span class="keyword">const</span> list = <span class="title function_">ref</span>([])</span><br><span class="line">  <span class="comment">// 异步action</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">loadList</span> = <span class="keyword">async</span> (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="variable constant_">API_URL</span>)</span><br><span class="line">    list.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">channels</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    list,</span><br><span class="line">    loadList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>2- 组件中调用action</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">	import &#123; useCounterStore &#125; from &#x27;@/stores/counter&#x27;</span><br><span class="line">  const counterStore = useCounterStore()</span><br><span class="line">  // 调用异步action</span><br><span class="line">  counterStore.loadList()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;item in counterStore.list&quot; :key=&quot;item.id&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="storeToRefs保持响应式解构"><a href="#storeToRefs保持响应式解构" class="headerlink" title="storeToRefs保持响应式解构"></a>storeToRefs保持响应式解构</h2><blockquote>
<p>直接基于store进行解构赋值，响应式数据（state和getter）会丢失响应式特性。</p>
<p>但是我们还是想用解构赋值，那么我们就可以使用storeToRefs辅助保持响应式</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line">  import &#123; useCounterStore &#125; from &#x27;@/stores/counter&#x27;</span><br><span class="line">  const counterStore = useCounterStore()</span><br><span class="line">  // 使用它storeToRefs包裹之后解构保持响应式，</span><br><span class="line">  // 注意，这里只能解构赋值数据，不管是对象类型还是基本数据类型都可以，但是不能解构赋值方法</span><br><span class="line">  const &#123; count &#125; = storeToRefs(counterStore)</span><br><span class="line">  // 如果想要解构赋值方法，使用这种方法解构就好啦</span><br><span class="line">  const &#123; increment &#125; = counterStore</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;button @click=&quot;increment&quot;&gt;</span><br><span class="line">    &#123;&#123; count &#125;&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h1 id="项目起步"><a href="#项目起步" class="headerlink" title="项目起步"></a>项目起步</h1><h2 id="创建项目并整理目录"><a href="#创建项目并整理目录" class="headerlink" title="创建项目并整理目录"></a>创建项目并整理目录</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init vue@latest</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/274425/1670247123883-f43f81f8-7600-4fd7-aa82-2751d9032a54.png#averageHue=%23212120&clientId=ufebee43b-b163-4&from=paste&height=494&id=u1b534575&name=image.png&originHeight=659&originWidth=1280&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3380277&status=done&style=none&taskId=ud39028ba-b1d4-47ed-adf7-79865628edd&title=&width=960" alt="image.png"></p>
<h3 id="src目录调整"><a href="#src目录调整" class="headerlink" title="src目录调整"></a>src目录调整</h3><p><img src="/../pic/image-20230618222530147.png" alt="image-20230618222530147"></p>
<h2 id="jsconfig-json配置别名路径"><a href="#jsconfig-json配置别名路径" class="headerlink" title="jsconfig.json配置别名路径"></a>jsconfig.json配置别名路径</h2><blockquote>
<p>配置别名路径可以在写代码时联想提示路径，也就是说，在编写代码的过程中，一旦输入@&#x2F;，VSCode会立刻联想出src下的所有子目录和文件，统一文件路径访问不容易出错</p>
<p>不过我下载了插件，这个就不用配置了</p>
</blockquote>
<p><img src="/../pic/image-20230618222757293.png" alt="image-20230618222757293"></p>
<p>那么如何进行配置呢？</p>
<ol>
<li>在项目的根目录下新增jsconfig.json文件</li>
<li>添加json格式的配置项，如下：</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;./&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="elementPlus引入"><a href="#elementPlus引入" class="headerlink" title="elementPlus引入"></a>elementPlus引入</h2><h3 id="1-安装elementPlus和自动导入插件"><a href="#1-安装elementPlus和自动导入插件" class="headerlink" title="1. 安装elementPlus和自动导入插件"></a>1. 安装elementPlus和自动导入插件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install element-plus --save</span><br><span class="line">npm install -D unplugin-vue-components unplugin-auto-import</span><br></pre></td></tr></table></figure>

<h3 id="2-配置自动按需导入"><a href="#2-配置自动按需导入" class="headerlink" title="2. 配置自动按需导入"></a>2. 配置自动按需导入</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-测试组件"><a href="#3-测试组件" class="headerlink" title="3. 测试组件"></a>3. 测试组件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot;&gt;i am button&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="定制elementPlus主题"><a href="#定制elementPlus主题" class="headerlink" title="定制elementPlus主题"></a>定制elementPlus主题</h2><h3 id="1-安装sass"><a href="#1-安装sass" class="headerlink" title="1. 安装sass"></a>1. 安装sass</h3><blockquote>
<p>基于vite的项目默认不支持css预处理器，需要开发者单独安装</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i sass -D</span><br></pre></td></tr></table></figure>

<h3 id="2-准备定制化的样式文件"><a href="#2-准备定制化的样式文件" class="headerlink" title="2. 准备定制化的样式文件"></a>2. 准备定制化的样式文件</h3><p>styles&#x2F;element&#x2F;index.scss</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 只需要重写你需要的即可 */</span></span><br><span class="line">@forward <span class="string">&#x27;element-plus/theme-chalk/src/common/var.scss&#x27;</span> <span class="keyword">with</span> (</span><br><span class="line">  <span class="attr">$colors</span>: (</span><br><span class="line">    <span class="string">&#x27;primary&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 主色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #27ba9b,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;success&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 成功色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #1dc779,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;warning&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 警告色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #ffb302,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;danger&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 危险色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #e26237,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">&#x27;error&#x27;</span>: (</span><br><span class="line">      <span class="comment">// 错误色</span></span><br><span class="line">      <span class="string">&#x27;base&#x27;</span>: #cf4444,</span><br><span class="line">    ),</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="3-自动导入配置"><a href="#3-自动导入配置" class="headerlink" title="3. 自动导入配置"></a>3. 自动导入配置</h3><blockquote>
<p>这里自动导入需要深入到elementPlus的组件中，按照官方的配置文档来</p>
<ol>
<li>自动导入定制化样式文件进行样式覆盖</li>
<li>按需定制主题配置 （需要安装 unplugin-element-plus）</li>
</ol>
</blockquote>
<p>vite.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fileURLToPath, <span class="variable constant_">URL</span> &#125; <span class="keyword">from</span> <span class="string">&quot;node:url&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&quot;unplugin-auto-import/vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&quot;unplugin-vue-components/vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&quot;unplugin-vue-components/resolvers&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>(&#123; <span class="attr">importStyle</span>: <span class="string">&quot;sass&quot;</span> &#125;)],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&quot;@&quot;</span>: <span class="title function_">fileURLToPath</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;./src&quot;</span>, <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>)),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">      <span class="attr">scss</span>: &#123;</span><br><span class="line">        <span class="comment">// 自动导入定制化样式文件进行样式覆盖</span></span><br><span class="line">        <span class="attr">additionalData</span>: <span class="string">`</span></span><br><span class="line"><span class="string">          @use &quot;@/styles/element/index.scss&quot; as *;</span></span><br><span class="line"><span class="string">        `</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="axios安装并简单封装"><a href="#axios安装并简单封装" class="headerlink" title="axios安装并简单封装"></a>axios安装并简单封装</h2><h3 id="1-安装axios"><a href="#1-安装axios" class="headerlink" title="1. 安装axios"></a>1. 安装axios</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i axios</span><br></pre></td></tr></table></figure>

<h3 id="2-基础配置"><a href="#2-基础配置" class="headerlink" title="2. 基础配置"></a>2. 基础配置</h3><blockquote>
<p>官方文档地址：<a target="_blank" rel="noopener" href="https://axios-http.com/zh/docs/intro">https://axios-http.com/zh/docs/intro</a><br>基础配置通常包括：</p>
<ol>
<li>实例化 - baseURL + timeout</li>
<li>拦截器 - 携带token 401拦截等</li>
</ol>
</blockquote>
<p><img src="/../pic/image-20230619091729590.png" alt="image-20230619091729590"></p>
<p>utils&#x2F;http.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> httpInstance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//目前这两个没啥用，以后再用</span></span><br><span class="line"><span class="comment">// axios请求拦截器</span></span><br><span class="line">httpInstance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function"><span class="params">e</span> =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(e))</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios响应式拦截器</span></span><br><span class="line">httpInstance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="property">data</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(e)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> httpInstance</span><br></pre></td></tr></table></figure>

<h3 id="3-封装请求函数"><a href="#3-封装请求函数" class="headerlink" title="3. 封装请求函数"></a>3. 封装请求函数</h3><p>apis&#x2F;testAPI.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> httpInstance <span class="keyword">from</span> <span class="string">&#x27;@/utils/http&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getCategoryAPI</span> () &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">httpInstance</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;home/category/head&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-进行测试"><a href="#4-进行测试" class="headerlink" title="4.进行测试"></a>4.进行测试</h3><p>测试在哪进行都可以</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getCategoryAPI &#125; <span class="keyword">from</span> <span class="string">&quot;@/apis/testAPI.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getCategoryAPI</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="添加不在强制组件重命名的配置"><a href="#添加不在强制组件重命名的配置" class="headerlink" title="添加不在强制组件重命名的配置"></a>添加不在强制组件重命名的配置</h2><p>这个是对eslint的配置</p>
<p>.eslintrc.cjs</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* eslint-env node */</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&#x27;extends&#x27;</span>: [</span><br><span class="line">    <span class="string">&#x27;plugin:vue/vue3-essential&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;eslint:recommended&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="string">&#x27;latest&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//添加不再强制要求组件重命名的配置</span></span><br><span class="line">  <span class="attr">rules</span>:&#123;</span><br><span class="line">    <span class="string">&#x27;vue/multi-word-component-names&#x27;</span>:<span class="number">0</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="路由整体设计"><a href="#路由整体设计" class="headerlink" title="路由整体设计"></a>路由整体设计</h2><p>路由设计原则：找页面的切换方式，如果是<strong>整体切换</strong>，则为一级路由，如果是在一级路由的内部进行的内容切换，则为二级路由</p>
<p><img src="/../pic/image-20230619094847419.png" alt="image-20230619094847419"></p>
<p>view&#x2F;Login&#x2F;index.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  我是Login</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>views&#x2F;Layout&#x2F;index.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  我是Layout</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>





<p>二级路由：如果是在一级路由的内部进行的内容切换，则为二级路由</p>
<p>views&#x2F;Home&#x2F;index.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  我是home</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>views&#x2F;Category&#x2F;index.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  我是Category</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>





<p>router&#x2F;index.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// createRouter：创建router实例对象</span></span><br><span class="line"><span class="comment">// createWebHistory：创建history模式的路由</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Login/index.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Layout/index.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Home/index.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Category</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Category/index.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="comment">// path和component对应关系的位置</span></span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Category</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Login</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>添加一级路由出口</p>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 添加一级路由出口 --&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>添加二级路由出口</p>
<p>view&#x2F;Layout&#x2F;index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;我是layout&lt;/div&gt;</span><br><span class="line">  &lt;!-- 添加二级路由出口 --&gt;</span><br><span class="line">  &lt;router-view /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="静态资源引入和Error-Lens安装"><a href="#静态资源引入和Error-Lens安装" class="headerlink" title="静态资源引入和Error Lens安装"></a>静态资源引入和Error Lens安装</h2><h3 id="1-静态资源引入"><a href="#1-静态资源引入" class="headerlink" title="1. 静态资源引入"></a>1. 静态资源引入</h3><ol>
<li>图片资源 - 把 images 文件夹放到 assets 目录下</li>
<li>样式资源 - 把 common.scss 文件放到 styles 目录下，然后在main.js中引入<img src="/../pic/image-20230619104426694.png" alt="image-20230619104426694"></li>
</ol>
<h3 id="2-Error-Lens插件安装"><a href="#2-Error-Lens插件安装" class="headerlink" title="2. Error Lens插件安装"></a>2. Error Lens插件安装</h3><p>error lens是一个试试提供错误警告信息的VSCode插件，方便开发</p>
<p><img src="/../pic/image-20230619104336861.png" alt="image-20230619104336861"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1677637778086-7314f9de-8130-4388-9fc3-0cf4c59b8454.png#averageHue=%232a2e36&clientId=u68bde7ec-09c8-4&from=paste&height=196&id=udc027a23&name=image.png&originHeight=392&originWidth=1528&originalType=binary&ratio=2&rotation=0&showTitle=false&size=87943&status=done&style=none&taskId=ue37b0611-a082-4595-9dde-66e51632ef7&title=&width=764" alt="image.png"></p>
<h2 id="scss变量自动导入"><a href="#scss变量自动导入" class="headerlink" title="scss变量自动导入"></a>scss变量自动导入</h2><p>为什么要自动导入？</p>
<p>在项目里一些组件共享的色值会以scss变量的方式统一放到一个名叫var.scss的文件中，正常组件中使用这些变量的时候，需要先导入var.scss文件。再使用内部的变量，比较繁琐，自动导入可以免去手动导入的步骤，直接使用内部的变量</p>
<p><img src="/../pic/image-20230619104727521.png" alt="image-20230619104727521"></p>
<p>styles&#x2F;var.scss</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$xtxColor: <span class="number">#27ba9b</span>;</span><br><span class="line">$helpColor: <span class="number">#e26237</span>;</span><br><span class="line">$sucColor: <span class="number">#1dc779</span>;</span><br><span class="line">$warnColor: <span class="number">#ffb302</span>;</span><br><span class="line">$priceColor: <span class="number">#cf4444</span>;</span><br></pre></td></tr></table></figure>

<p>vite.config.js</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">css<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    preprocessorOptions<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      scss<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// 自动导入scss文件</span></span><br><span class="line">        additionalData<span class="punctuation">:</span> `</span><br><span class="line">          @use <span class="string">&quot;@/styles/element/index.scss&quot;</span> as *;</span><br><span class="line">          @use <span class="string">&quot;@/styles/var.scss&quot;</span> as *;</span><br><span class="line">        `<span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;test&quot;&gt;我是layout&lt;/div&gt;</span><br><span class="line">  &lt;!-- 添加二级路由出口 --&gt;</span><br><span class="line">  &lt;router-view /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 这里注意要加lang --&gt;</span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.test &#123;</span><br><span class="line">  // 直接在这里使用就可以了</span><br><span class="line">  color: $priceColor;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Layout页"><a href="#Layout页" class="headerlink" title="Layout页"></a>Layout页</h1><p><img src="/../pic/image-20230619105759274.png" alt="image-20230619105759274"></p>
<h2 id="组件结构快速搭建"><a href="#组件结构快速搭建" class="headerlink" title="组件结构快速搭建"></a>组件结构快速搭建</h2><p>view&#x2F;Latout&#x2F;components&#x2F;LayoutNav.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;nav class=&quot;app-topnav&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;template v-if=&quot;true&quot;&gt;</span><br><span class="line">          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;iconfont icon-user&quot;&gt;&lt;/i&gt;周杰伦&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;el-popconfirm title=&quot;确认退出吗?&quot; confirm-button-text=&quot;确认&quot; cancel-button-text=&quot;取消&quot;&gt;</span><br><span class="line">              &lt;template #reference&gt;</span><br><span class="line">                &lt;a href=&quot;javascript:;&quot;&gt;退出登录&lt;/a&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">            &lt;/el-popconfirm&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;我的订单&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;会员中心&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;template v-else&gt;</span><br><span class="line">          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;请先登录&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">          &lt;li&gt;&lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/nav&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.app-topnav &#123;</span><br><span class="line">  background: #333;</span><br><span class="line">  ul &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    height: 53px;</span><br><span class="line">    justify-content: flex-end;</span><br><span class="line">    align-items: center;</span><br><span class="line">    li &#123;</span><br><span class="line">      a &#123;</span><br><span class="line">        padding: 0 15px;</span><br><span class="line">        color: #cdcdcd;</span><br><span class="line">        line-height: 1;</span><br><span class="line">        display: inline-block;</span><br><span class="line"></span><br><span class="line">        i &#123;</span><br><span class="line">          font-size: 14px;</span><br><span class="line">          margin-right: 2px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &amp;:hover &#123;</span><br><span class="line">          color: $xtxColor;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ~li &#123;</span><br><span class="line">        a &#123;</span><br><span class="line">          border-left: 2px solid #666;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>view&#x2F;Latout&#x2F;components&#x2F;LayoutHeader.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header class=&#x27;app-header&#x27;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;h1 class=&quot;logo&quot;&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;</span><br><span class="line">      &lt;/h1&gt;</span><br><span class="line">      &lt;ul class=&quot;app-header-nav&quot;&gt;</span><br><span class="line">        &lt;li class=&quot;home&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;首页&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt; &lt;RouterLink to=&quot;/&quot;&gt;居家&lt;/RouterLink&gt; &lt;/li&gt;</span><br><span class="line">        &lt;li&gt; &lt;RouterLink to=&quot;/&quot;&gt;美食&lt;/RouterLink&gt; &lt;/li&gt;</span><br><span class="line">        &lt;li&gt; &lt;RouterLink to=&quot;/&quot;&gt;服饰&lt;/RouterLink&gt; &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">      &lt;div class=&quot;search&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;iconfont icon-search&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; placeholder=&quot;搜一搜&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 头部购物车 --&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.app-header &#123;</span><br><span class="line">  background: #fff;</span><br><span class="line"></span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .logo &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      display: block;</span><br><span class="line">      height: 132px;</span><br><span class="line">      width: 100%;</span><br><span class="line">      text-indent: -9999px;</span><br><span class="line">      background: url(&#x27;@/assets/images/logo.png&#x27;) no-repeat center 18px / contain;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .app-header-nav &#123;</span><br><span class="line">    width: 820px;</span><br><span class="line">    display: flex;</span><br><span class="line">    padding-left: 40px;</span><br><span class="line">    position: relative;</span><br><span class="line">    z-index: 998;</span><br><span class="line">  </span><br><span class="line">    li &#123;</span><br><span class="line">      margin-right: 40px;</span><br><span class="line">      width: 38px;</span><br><span class="line">      text-align: center;</span><br><span class="line">  </span><br><span class="line">      a &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        line-height: 32px;</span><br><span class="line">        height: 32px;</span><br><span class="line">        display: inline-block;</span><br><span class="line">  </span><br><span class="line">        &amp;:hover &#123;</span><br><span class="line">          color: $xtxColor;</span><br><span class="line">          border-bottom: 1px solid $xtxColor;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      .active &#123;</span><br><span class="line">        color: $xtxColor;</span><br><span class="line">        border-bottom: 1px solid $xtxColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .search &#123;</span><br><span class="line">    width: 170px;</span><br><span class="line">    height: 32px;</span><br><span class="line">    position: relative;</span><br><span class="line">    border-bottom: 1px solid #e7e7e7;</span><br><span class="line">    line-height: 32px;</span><br><span class="line"></span><br><span class="line">    .icon-search &#123;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      margin-left: 5px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    input &#123;</span><br><span class="line">      width: 140px;</span><br><span class="line">      padding-left: 5px;</span><br><span class="line">      color: #666;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .cart &#123;</span><br><span class="line">    width: 50px;</span><br><span class="line"></span><br><span class="line">    .curr &#123;</span><br><span class="line">      height: 32px;</span><br><span class="line">      line-height: 32px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      position: relative;</span><br><span class="line">      display: block;</span><br><span class="line"></span><br><span class="line">      .icon-cart &#123;</span><br><span class="line">        font-size: 22px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      em &#123;</span><br><span class="line">        font-style: normal;</span><br><span class="line">        position: absolute;</span><br><span class="line">        right: 0;</span><br><span class="line">        top: 0;</span><br><span class="line">        padding: 1px 6px;</span><br><span class="line">        line-height: 1;</span><br><span class="line">        background: $helpColor;</span><br><span class="line">        color: #fff;</span><br><span class="line">        font-size: 12px;</span><br><span class="line">        border-radius: 10px;</span><br><span class="line">        font-family: Arial;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>view&#x2F;Latout&#x2F;components&#x2F;LayoutFooter.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;footer class=&quot;app_footer&quot;&gt;</span><br><span class="line">    &lt;!-- 联系我们 --&gt;</span><br><span class="line">    &lt;div class=&quot;contact&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;dl&gt;</span><br><span class="line">          &lt;dt&gt;客户服务&lt;/dt&gt;</span><br><span class="line">          &lt;dd&gt;&lt;i class=&quot;iconfont icon-kefu&quot;&gt;&lt;/i&gt; 在线客服&lt;/dd&gt;</span><br><span class="line">          &lt;dd&gt;&lt;i class=&quot;iconfont icon-question&quot;&gt;&lt;/i&gt; 问题反馈&lt;/dd&gt;</span><br><span class="line">        &lt;/dl&gt;</span><br><span class="line">        &lt;dl&gt;</span><br><span class="line">          &lt;dt&gt;关注我们&lt;/dt&gt;</span><br><span class="line">          &lt;dd&gt;&lt;i class=&quot;iconfont icon-weixin&quot;&gt;&lt;/i&gt; 公众号&lt;/dd&gt;</span><br><span class="line">          &lt;dd&gt;&lt;i class=&quot;iconfont icon-weibo&quot;&gt;&lt;/i&gt; 微博&lt;/dd&gt;</span><br><span class="line">        &lt;/dl&gt;</span><br><span class="line">        &lt;dl&gt;</span><br><span class="line">          &lt;dt&gt;下载APP&lt;/dt&gt;</span><br><span class="line">          &lt;dd class=&quot;qrcode&quot;&gt;&lt;img src=&quot;@/assets/images/qrcode.jpg&quot; /&gt;&lt;/dd&gt;</span><br><span class="line">          &lt;dd class=&quot;download&quot;&gt;</span><br><span class="line">            &lt;span&gt;扫描二维码&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;立马下载APP&lt;/span&gt;</span><br><span class="line">            &lt;a href=&quot;javascript:;&quot;&gt;下载页面&lt;/a&gt;</span><br><span class="line">          &lt;/dd&gt;</span><br><span class="line">        &lt;/dl&gt;</span><br><span class="line">        &lt;dl&gt;</span><br><span class="line">          &lt;dt&gt;服务热线&lt;/dt&gt;</span><br><span class="line">          &lt;dd class=&quot;hotline&quot;&gt;400-0000-000 &lt;small&gt;周一至周日 8:00-18:00&lt;/small&gt;&lt;/dd&gt;</span><br><span class="line">        &lt;/dl&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 其它 --&gt;</span><br><span class="line">    &lt;div class=&quot;extra&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;slogan&quot;&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-footer01&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;span&gt;价格亲民&lt;/span&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-footer02&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;span&gt;物流快捷&lt;/span&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-footer03&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;span&gt;品质新鲜&lt;/span&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 版权信息 --&gt;</span><br><span class="line">        &lt;div class=&quot;copyright&quot;&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            &lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;javascript:;&quot;&gt;售后服务&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;javascript:;&quot;&gt;配送与验收&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;javascript:;&quot;&gt;商务合作&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;javascript:;&quot;&gt;搜索推荐&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;javascript:;&quot;&gt;友情链接&lt;/a&gt;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">          &lt;p&gt;CopyRight © 小兔鲜儿&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.app_footer &#123;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  background-color: #f5f5f5;</span><br><span class="line">  padding-top: 20px;</span><br><span class="line"></span><br><span class="line">  .contact &#123;</span><br><span class="line">    background: #fff;</span><br><span class="line"></span><br><span class="line">    .container &#123;</span><br><span class="line">      padding: 60px 0 40px 25px;</span><br><span class="line">      display: flex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dl &#123;</span><br><span class="line">      height: 190px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      padding: 0 72px;</span><br><span class="line">      border-right: 1px solid #f2f2f2;</span><br><span class="line">      color: #999;</span><br><span class="line"></span><br><span class="line">      &amp;:first-child &#123;</span><br><span class="line">        padding-left: 0;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-child &#123;</span><br><span class="line">        border-right: none;</span><br><span class="line">        padding-right: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dt &#123;</span><br><span class="line">      line-height: 1;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dd &#123;</span><br><span class="line">      margin: 36px 12px 0 0;</span><br><span class="line">      float: left;</span><br><span class="line">      width: 92px;</span><br><span class="line">      height: 92px;</span><br><span class="line">      padding-top: 10px;</span><br><span class="line">      border: 1px solid #ededed;</span><br><span class="line"></span><br><span class="line">      .iconfont &#123;</span><br><span class="line">        font-size: 36px;</span><br><span class="line">        display: block;</span><br><span class="line">        color: #666;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        .iconfont &#123;</span><br><span class="line">          color: $xtxColor;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-child &#123;</span><br><span class="line">        margin-right: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .qrcode &#123;</span><br><span class="line">      width: 92px;</span><br><span class="line">      height: 92px;</span><br><span class="line">      padding: 7px;</span><br><span class="line">      border: 1px solid #ededed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .download &#123;</span><br><span class="line">      padding-top: 5px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      width: auto;</span><br><span class="line">      height: auto;</span><br><span class="line">      border: none;</span><br><span class="line"></span><br><span class="line">      span &#123;</span><br><span class="line">        display: block;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      a &#123;</span><br><span class="line">        display: block;</span><br><span class="line">        line-height: 1;</span><br><span class="line">        padding: 10px 25px;</span><br><span class="line">        margin-top: 5px;</span><br><span class="line">        color: #fff;</span><br><span class="line">        border-radius: 2px;</span><br><span class="line">        background-color: $xtxColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .hotline &#123;</span><br><span class="line">      padding-top: 20px;</span><br><span class="line">      font-size: 22px;</span><br><span class="line">      color: #666;</span><br><span class="line">      width: auto;</span><br><span class="line">      height: auto;</span><br><span class="line">      border: none;</span><br><span class="line"></span><br><span class="line">      small &#123;</span><br><span class="line">        display: block;</span><br><span class="line">        font-size: 15px;</span><br><span class="line">        color: #999;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .extra &#123;</span><br><span class="line">    background-color: #333;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .slogan &#123;</span><br><span class="line">    height: 178px;</span><br><span class="line">    line-height: 58px;</span><br><span class="line">    padding: 60px 100px;</span><br><span class="line">    border-bottom: 1px solid #434343;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      height: 58px;</span><br><span class="line">      line-height: 58px;</span><br><span class="line">      color: #fff;</span><br><span class="line">      font-size: 28px;</span><br><span class="line"></span><br><span class="line">      i &#123;</span><br><span class="line">        font-size: 50px;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">        font-weight: 100;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      span &#123;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">        text-shadow: 0 0 1px #333;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .copyright &#123;</span><br><span class="line">    height: 170px;</span><br><span class="line">    padding-top: 40px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    color: #999;</span><br><span class="line">    font-size: 15px;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      line-height: 1;</span><br><span class="line">      margin-bottom: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      color: #999;</span><br><span class="line">      line-height: 1;</span><br><span class="line">      padding: 0 10px;</span><br><span class="line">      border-right: 1px solid #999;</span><br><span class="line"></span><br><span class="line">      &amp;:last-child &#123;</span><br><span class="line">        border-right: none;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>view&#x2F;Latout&#x2F;index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import LayoutNav from &#x27;./components/LayoutNav.vue&#x27;</span><br><span class="line">import LayoutHeader from &#x27;./components/LayoutHeader.vue&#x27;</span><br><span class="line">import LayoutFooter from &#x27;./components/LayoutFooter.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;LayoutNav /&gt;</span><br><span class="line">  &lt;LayoutHeader /&gt;</span><br><span class="line">  &lt;RouterView /&gt;</span><br><span class="line">  &lt;LayoutFooter /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="字体图标渲染"><a href="#字体图标渲染" class="headerlink" title="字体图标渲染"></a>字体图标渲染</h2><blockquote>
<p>字体图标采用的是阿里的字体图标库，样式文件已经准备好，在 <code>index.html</code>文件中引入即可</p>
<p><img src="/../pic/image-20230619110946417.png" alt="image-20230619110946417"></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/image-20230619111332619.png" alt="image-20230619111332619"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//at.alicdn.com/t/font_2143783_iq6z4ey5vu.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>





<p>效果：</p>
<p><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/image-20230619111415232.png" alt="image-20230619111415232"></p>
<h2 id="一级导航渲染"><a href="#一级导航渲染" class="headerlink" title="一级导航渲染"></a>一级导航渲染</h2><p>要把上面的导航信息根据后端传过来的数据进行渲染</p>
<p><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/1677638045286-b328a3ce-8241-4ce7-9db3-e9c872da5b73.png" alt="image.png"><br><strong>实现步骤</strong></p>
<ol>
<li>封装接口函数</li>
<li>调用接口函数</li>
<li>v-for渲染模版</li>
</ol>
<p><strong>代码落地</strong></p>
<p>apis&#x2F;layout.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> httpInstance <span class="keyword">from</span> <span class="string">&#x27;@/utils/http&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getCategoryAPI</span> () &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">httpInstance</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/home/category/head&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>views&#x2F;components&#x2F;LayoutHeader.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 引入api</span><br><span class="line">import &#123; getCategoryAPI &#125; from &quot;@/apis/layout&quot;;</span><br><span class="line">import &#123; onMounted, ref &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const categoryList = ref([]);</span><br><span class="line">const getCategory = async () =&gt; &#123;</span><br><span class="line">  const res = await getCategoryAPI();</span><br><span class="line">  // 赋值</span><br><span class="line">  categoryList.value = res.result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; getCategory());</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header class=&quot;app-header&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;h1 class=&quot;logo&quot;&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;</span><br><span class="line">      &lt;/h1&gt;</span><br><span class="line">      &lt;ul class=&quot;app-header-nav&quot;&gt;</span><br><span class="line">        &lt;!-- 遍历list中的数据，渲染列表 --&gt;</span><br><span class="line">        &lt;li class=&quot;home&quot; v-for=&quot;item in categoryList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">      &lt;div class=&quot;search&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;iconfont icon-search&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; placeholder=&quot;搜一搜&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 头部购物车 --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="吸顶导航交互实现"><a href="#吸顶导航交互实现" class="headerlink" title="吸顶导航交互实现"></a>吸顶导航交互实现</h2><p>需求：浏览器在上下滚动的过程中，如果距离顶部的滚动距离大于78px，吸顶导航就显示，如果小于78px就隐藏 </p>
<h3 id="1-准备组件静态结构"><a href="#1-准备组件静态结构" class="headerlink" title="1. 准备组件静态结构"></a>1. 准备组件静态结构</h3><p>view&#x2F;Layout&#x2F;components&#x2F;LayoutFixed.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-header-sticky show&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;RouterLink class=&quot;logo&quot; to=&quot;/&quot; /&gt;</span><br><span class="line">      &lt;!-- 导航区域 --&gt;</span><br><span class="line">      &lt;ul class=&quot;app-header-nav &quot;&gt;</span><br><span class="line">        &lt;li class=&quot;home&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;首页&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;居家&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;美食&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;服饰&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;母婴&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;个护&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;严选&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;数码&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;运动&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;杂项&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/&quot;&gt;品牌&lt;/RouterLink&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/&quot;&gt;专题&lt;/RouterLink&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.app-header-sticky &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 80px;</span><br><span class="line">  position: fixed;</span><br><span class="line">  left: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  z-index: 999;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  border-bottom: 1px solid #e4e4e4;</span><br><span class="line">  // 此处为关键样式!!!</span><br><span class="line">  // 状态一：往上平移自身高度 + 完全透明</span><br><span class="line">  transform: translateY(-100%);</span><br><span class="line">  opacity: 0;</span><br><span class="line"></span><br><span class="line">  // 状态二：移除平移 + 完全不透明</span><br><span class="line">  &amp;.show &#123;</span><br><span class="line">    transition: all 0.3s linear;</span><br><span class="line">    transform: none;</span><br><span class="line">    opacity: 1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .logo &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 80px;</span><br><span class="line">    background: url(&quot;@/assets/images/logo.png&quot;) no-repeat right 2px;</span><br><span class="line">    background-size: 160px auto;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .right &#123;</span><br><span class="line">    width: 220px;</span><br><span class="line">    display: flex;</span><br><span class="line">    text-align: center;</span><br><span class="line">    padding-left: 40px;</span><br><span class="line">    border-left: 2px solid $xtxColor;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      width: 38px;</span><br><span class="line">      margin-right: 40px;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      line-height: 1;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        color: $xtxColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.app-header-nav &#123;</span><br><span class="line">  width: 820px;</span><br><span class="line">  display: flex;</span><br><span class="line">  padding-left: 40px;</span><br><span class="line">  position: relative;</span><br><span class="line">  z-index: 998;</span><br><span class="line"></span><br><span class="line">  li &#123;</span><br><span class="line">    margin-right: 40px;</span><br><span class="line">    width: 38px;</span><br><span class="line">    text-align: center;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      line-height: 32px;</span><br><span class="line">      height: 32px;</span><br><span class="line">      display: inline-block;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        color: $xtxColor;</span><br><span class="line">        border-bottom: 1px solid $xtxColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .active &#123;</span><br><span class="line">      color: $xtxColor;</span><br><span class="line">      border-bottom: 1px solid $xtxColor;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>然后引入到</p>
<h3 id="2-获取滚动距离"><a href="#2-获取滚动距离" class="headerlink" title="2. 获取滚动距离"></a>2. 获取滚动距离</h3><p>安装vueuse</p>
<p><code>npm i @vueuse/core</code></p>
<p>用vueuse的函数来实现获取滚动的距离</p>
<h3 id="3-以滚动距离做判断条件控制组件盒子显示隐藏"><a href="#3-以滚动距离做判断条件控制组件盒子显示隐藏" class="headerlink" title="3. 以滚动距离做判断条件控制组件盒子显示隐藏"></a>3. 以滚动距离做判断条件控制组件盒子显示隐藏</h3><blockquote>
<p>核心逻辑：根据滚动距离判断当前show类名是否显示，大于78显示，小于78，不显示</p>
</blockquote>
<p>view&#x2F;Layout&#x2F;components&#x2F;LayoutFixed.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// vueUse</span><br><span class="line">import &#123; useScroll &#125; from &#x27;@vueuse/core&#x27;</span><br><span class="line">const &#123; y &#125; = useScroll(window)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 以滚动距离做判断条件控制组件盒子显示隐藏 --&gt;</span><br><span class="line">  &lt;div class=&quot;app-header-sticky&quot; :class=&quot;&#123; show: y &gt; 78 &#125;&quot;&gt;</span><br><span class="line">    &lt;!-- 省略部分代码 --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Pinia优化重复请求"><a href="#Pinia优化重复请求" class="headerlink" title="Pinia优化重复请求"></a>Pinia优化重复请求</h2><p><img src="/../pic/image-20230619133325167.png" alt="image-20230619133325167"></p>
<p>store&#x2F;category.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getCategoryAPI &#125; <span class="keyword">from</span> <span class="string">&#x27;@/apis/layout&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCategoryStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;category&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 导航列表的数据管理</span></span><br><span class="line">  <span class="comment">// state 导航列表数据</span></span><br><span class="line">  <span class="keyword">const</span> categoryList = <span class="title function_">ref</span>([])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// action 获取导航数据的方法</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getCategory</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getCategoryAPI</span>()</span><br><span class="line">    categoryList.<span class="property">value</span> = res.<span class="property">result</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    categoryList,</span><br><span class="line">    getCategory</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在index页面中调用action初始化数据</p>
<p><img src="/../pic/image-20230619135715610.png" alt="image-20230619135715610"></p>
<p>然后就是在两个组件中使用了</p>
<p><img src="/../pic/image-20230619135752483.png" alt="image-20230619135752483"></p>
<p>另一个组件同理</p>
<h1 id="Home页"><a href="#Home页" class="headerlink" title="Home页"></a>Home页</h1><h2 id="静态结构搭建和分类实现"><a href="#静态结构搭建和分类实现" class="headerlink" title="静态结构搭建和分类实现"></a>静态结构搭建和分类实现</h2><h3 id="1-整体结构创建"><a href="#1-整体结构创建" class="headerlink" title="1. 整体结构创建"></a>1. 整体结构创建</h3><p><img src="/../pic/image-20230624194329394.png" alt="image-20230624194329394"></p>
<p>1- 按照结构新增五个组件，准备最简单的模版，分别在Home模块的入口组件中引入</p>
<ul>
<li>HomeCategory  轮播图左侧分类</li>
<li>HomeBanner 轮播图</li>
<li>HomeNew 新鲜好物</li>
<li>HomeHot 人气推荐</li>
<li>HomeProduct 产品列表</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt; HomeCategory &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>剩下的四个省略</p>
<p>2- Home模块入口组件中引入并渲染</p>
<p>views&#x2F;Home&#x2F;index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import HomeCategory from &#x27;./components/HomeCategory.vue&#x27;</span><br><span class="line">import HomeBanner from &#x27;./components/HomeBanner.vue&#x27;</span><br><span class="line">import HomeNew from &#x27;./components/HomeNew.vue&#x27;</span><br><span class="line">import HomeHot from &#x27;./components/HomeHot.vue&#x27;</span><br><span class="line">import homeProduct from &#x27;./components/HomeProduct.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;HomeCategory /&gt;</span><br><span class="line">    &lt;HomeBanner /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;HomeNew /&gt;</span><br><span class="line">  &lt;HomeHot /&gt;</span><br><span class="line">  &lt;homeProduct /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-分类实现"><a href="#2-分类实现" class="headerlink" title="2. 分类实现"></a>2. 分类实现</h3><p>1- 准备详细模版</p>
<p>HomeCategory.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-category&quot;&gt;</span><br><span class="line">    &lt;ul class=&quot;menu&quot;&gt;</span><br><span class="line">      &lt;li v-for=&quot;item in 9&quot; :key=&quot;item&quot;&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/&quot;&gt;居家&lt;/RouterLink&gt;</span><br><span class="line">        &lt;RouterLink v-for=&quot;i in 2&quot; :key=&quot;i&quot; to=&quot;/&quot;&gt;南北干货&lt;/RouterLink&gt;</span><br><span class="line">        &lt;!-- 弹层layer位置 --&gt;</span><br><span class="line">        &lt;div class=&quot;layer&quot;&gt;</span><br><span class="line">          &lt;h4&gt;分类推荐 &lt;small&gt;根据您的购买或浏览记录推荐&lt;/small&gt;&lt;/h4&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;i in 5&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">              &lt;RouterLink to=&quot;/&quot;&gt;</span><br><span class="line">                &lt;img alt=&quot;&quot; /&gt;</span><br><span class="line">                &lt;div class=&quot;info&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;name ellipsis-2&quot;&gt;</span><br><span class="line">                    男士外套</span><br><span class="line">                  &lt;/p&gt;</span><br><span class="line">                  &lt;p class=&quot;desc ellipsis&quot;&gt;男士外套，冬季必选&lt;/p&gt;</span><br><span class="line">                  &lt;p class=&quot;price&quot;&gt;&lt;i&gt;¥&lt;/i&gt;200.00&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/RouterLink&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.home-category &#123;</span><br><span class="line">  width: 250px;</span><br><span class="line">  height: 500px;</span><br><span class="line">  background: rgba(0, 0, 0, 0.8);</span><br><span class="line">  position: relative;</span><br><span class="line">  z-index: 99;</span><br><span class="line"></span><br><span class="line">  .menu &#123;</span><br><span class="line">    li &#123;</span><br><span class="line">      padding-left: 40px;</span><br><span class="line">      height: 55px;</span><br><span class="line">      line-height: 55px;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        background: $xtxColor;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      a &#123;</span><br><span class="line">        margin-right: 4px;</span><br><span class="line">        color: #fff;</span><br><span class="line"></span><br><span class="line">        &amp;:first-child &#123;</span><br><span class="line">          font-size: 16px;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .layer &#123;</span><br><span class="line">        width: 990px;</span><br><span class="line">        height: 500px;</span><br><span class="line">        background: rgba(255, 255, 255, 0.8);</span><br><span class="line">        position: absolute;</span><br><span class="line">        left: 250px;</span><br><span class="line">        top: 0;</span><br><span class="line">        display: none;</span><br><span class="line">        padding: 0 15px;</span><br><span class="line"></span><br><span class="line">        h4 &#123;</span><br><span class="line">          font-size: 20px;</span><br><span class="line">          font-weight: normal;</span><br><span class="line">          line-height: 80px;</span><br><span class="line"></span><br><span class="line">          small &#123;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">            color: #666;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ul &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-wrap: wrap;</span><br><span class="line"></span><br><span class="line">          li &#123;</span><br><span class="line">            width: 310px;</span><br><span class="line">            height: 120px;</span><br><span class="line">            margin-right: 15px;</span><br><span class="line">            margin-bottom: 15px;</span><br><span class="line">            border: 1px solid #eee;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            background: #fff;</span><br><span class="line"></span><br><span class="line">            &amp;:nth-child(3n) &#123;</span><br><span class="line">              margin-right: 0;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            a &#123;</span><br><span class="line">              display: flex;</span><br><span class="line">              width: 100%;</span><br><span class="line">              height: 100%;</span><br><span class="line">              align-items: center;</span><br><span class="line">              padding: 10px;</span><br><span class="line"></span><br><span class="line">              &amp;:hover &#123;</span><br><span class="line">                background: #e3f9f4;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              img &#123;</span><br><span class="line">                width: 95px;</span><br><span class="line">                height: 95px;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              .info &#123;</span><br><span class="line">                padding-left: 10px;</span><br><span class="line">                line-height: 24px;</span><br><span class="line">                overflow: hidden;</span><br><span class="line"></span><br><span class="line">                .name &#123;</span><br><span class="line">                  font-size: 16px;</span><br><span class="line">                  color: #666;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                .desc &#123;</span><br><span class="line">                  color: #999;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                .price &#123;</span><br><span class="line">                  font-size: 22px;</span><br><span class="line">                  color: $priceColor;</span><br><span class="line"></span><br><span class="line">                  i &#123;</span><br><span class="line">                    font-size: 16px;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 关键样式  hover状态下的layer盒子变成block</span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        .layer &#123;</span><br><span class="line">          display: block;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>2- 完成代码</p>
<p><img src="/../pic/image-20230624201633518.png" alt="image-20230624201633518"></p>
<p>HomeCategory.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useCategoryStore &#125; from &quot;@/stores/category&quot;;</span><br><span class="line"></span><br><span class="line">const categoryStore = useCategoryStore();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-category&quot;&gt;</span><br><span class="line">    &lt;ul class=&quot;menu&quot;&gt;</span><br><span class="line">      &lt;li v-for=&quot;item in categoryStore.categoryList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;!-- 一级标题 --&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line">        &lt;!-- 二级标题，但是只需要显示两个就可以了 --&gt;</span><br><span class="line">        &lt;RouterLink v-for=&quot;i in item.children.slice(0, 2)&quot; :key=&quot;i&quot; to=&quot;/&quot;&gt;&#123;&#123;</span><br><span class="line">          i.name</span><br><span class="line">        &#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line">        &lt;!-- 弹层layer位置 --&gt;</span><br><span class="line">        &lt;div class=&quot;layer&quot;&gt;</span><br><span class="line">          &lt;h4&gt;分类推荐 &lt;small&gt;根据您的购买或浏览记录推荐&lt;/small&gt;&lt;/h4&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;!-- 遍历goods信息 --&gt;</span><br><span class="line">            &lt;li v-for=&quot;i in item.goods&quot; :key=&quot;i.id&quot;&gt;</span><br><span class="line">              &lt;RouterLink to=&quot;/&quot;&gt;</span><br><span class="line">                &lt;img :src=&quot;i.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">                &lt;div class=&quot;info&quot;&gt;</span><br><span class="line">                  &lt;p class=&quot;name ellipsis-2&quot;&gt;</span><br><span class="line">                    &#123;&#123; i.name &#125;&#125;</span><br><span class="line">                  &lt;/p&gt;</span><br><span class="line">                  &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; i.desc &#125;&#125;&lt;/p&gt;</span><br><span class="line">                  &lt;p class=&quot;price&quot;&gt;&lt;i&gt;¥&lt;/i&gt;&#123;&#123; i.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/RouterLink&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="banner轮播图实现"><a href="#banner轮播图实现" class="headerlink" title="banner轮播图实现"></a>banner轮播图实现</h2><h3 id="1-熟悉组件"><a href="#1-熟悉组件" class="headerlink" title="1. 熟悉组件"></a>1. 熟悉组件</h3><p>这里直接使用elment-ui的组件进行完成</p>
<p>src\views\Home\components\HomeBanner.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-banner&quot;&gt;</span><br><span class="line">    &lt;el-carousel height=&quot;500px&quot;&gt;</span><br><span class="line">      &lt;el-carousel-item v-for=&quot;item in 4&quot; :key=&quot;item&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;http://yjy-xiaotuxian-dev.oss-cn-beijing.aliyuncs.com/picture/2021-04-15/6d202d8e-bb47-4f92-9523-f32ab65754f4.jpg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">      &lt;/el-carousel-item&gt;</span><br><span class="line">    &lt;/el-carousel&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.home-banner &#123;</span><br><span class="line">  width: 1240px;</span><br><span class="line">  height: 500px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  z-index: 98;</span><br><span class="line"></span><br><span class="line">  img &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 500px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-获取数据渲染组件"><a href="#2-获取数据渲染组件" class="headerlink" title="2. 获取数据渲染组件"></a>2. 获取数据渲染组件</h3><p>1- 封装接口</p>
<p>src\apis\home.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 获取banner图</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> httpInstance <span class="keyword">from</span> <span class="string">&quot;@/utils/http&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getBannerAPI</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">httpInstance</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;home/banner&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2- 获取数据渲染模版</p>
<p>src\views\Home\components\HomeBanner.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; getBannerAPI &#125; from &#x27;@/apis/home&#x27;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const bannerList = ref([])</span><br><span class="line"></span><br><span class="line">const getBanner = async () =&gt; &#123;</span><br><span class="line">  const res = await getBannerAPI()</span><br><span class="line">  console.log(res)</span><br><span class="line">  bannerList.value = res.result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; getBanner())</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-banner&quot;&gt;</span><br><span class="line">    &lt;el-carousel height=&quot;500px&quot;&gt;</span><br><span class="line">      &lt;el-carousel-item v-for=&quot;item in bannerList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;img :src=&quot;item.imgUrl&quot; alt=&quot;&quot;&gt;</span><br><span class="line">      &lt;/el-carousel-item&gt;</span><br><span class="line">    &lt;/el-carousel&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="面板组件封装"><a href="#面板组件封装" class="headerlink" title="面板组件封装"></a>面板组件封装</h2><p><img src="/../pic/image-20230624203449908.png" alt="image-20230624203449908"></p>
<p>并且我们把需要改变的部分可以抽象成组件参数（插槽&#x2F;props）</p>
<p><img src="/../pic/image-20230624203615722.png" alt="image-20230624203615722"></p>
<h3 id="1-纯静态结构"><a href="#1-纯静态结构" class="headerlink" title="1. 纯静态结构"></a>1. 纯静态结构</h3><p>HomePanel.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-panel&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;head&quot;&gt;</span><br><span class="line">         &lt;!-- 主标题和副标题 --&gt;</span><br><span class="line">        &lt;h3&gt;</span><br><span class="line">          新鲜好物&lt;small&gt;新鲜出炉 品质靠谱&lt;/small&gt;</span><br><span class="line">        &lt;/h3&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 主体内容区域 --&gt;</span><br><span class="line">      &lt;div&gt; 主体内容 &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.home-panel &#123;</span><br><span class="line">  background-color: #fff;</span><br><span class="line"></span><br><span class="line">  .head &#123;</span><br><span class="line">    padding: 40px 0;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: flex-end;</span><br><span class="line"></span><br><span class="line">    h3 &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      font-size: 32px;</span><br><span class="line">      font-weight: normal;</span><br><span class="line">      margin-left: 6px;</span><br><span class="line">      height: 35px;</span><br><span class="line">      line-height: 35px;</span><br><span class="line"></span><br><span class="line">      small &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #999;</span><br><span class="line">        margin-left: 20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-完整代码"><a href="#2-完整代码" class="headerlink" title="2. 完整代码"></a>2. 完整代码</h3><p>HomePanel.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">defineProps(&#123;</span><br><span class="line">  title: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    default: &#x27;&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  subTitle: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    default: &#x27;&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-panel&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;head&quot;&gt;</span><br><span class="line">        &lt;!-- 主标题和副标题 --&gt;</span><br><span class="line">        &lt;h3&gt;</span><br><span class="line">          &#123;&#123; title &#125;&#125;</span><br><span class="line">            &lt;small&gt;&#123;&#123; subTitle &#125;&#125;&lt;/small&gt;</span><br><span class="line">        &lt;/h3&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 主体内容区域 --&gt;</span><br><span class="line">      &lt;slot name=&quot;main&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.home-panel &#123;</span><br><span class="line">  background-color: #fff;</span><br><span class="line"></span><br><span class="line">  .head &#123;</span><br><span class="line">    padding: 40px 0;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: flex-end;</span><br><span class="line"></span><br><span class="line">    h3 &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      font-size: 32px;</span><br><span class="line">      font-weight: normal;</span><br><span class="line">      margin-left: 6px;</span><br><span class="line">      height: 35px;</span><br><span class="line">      line-height: 35px;</span><br><span class="line"></span><br><span class="line">      small &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #999;</span><br><span class="line">        margin-left: 20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="新鲜好物实现"><a href="#新鲜好物实现" class="headerlink" title="新鲜好物实现"></a>新鲜好物实现</h2><h3 id="1-准备模版"><a href="#1-准备模版" class="headerlink" title="1. 准备模版"></a>1. 准备模版</h3><p>src\views\Home\components\HomeNew.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&lt;/div&gt;</span><br><span class="line">  &lt;!-- 下面是插槽主体内容模版</span><br><span class="line">  &lt;ul class=&quot;goods-list&quot;&gt;</span><br><span class="line">    &lt;li v-for=&quot;item in newList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/&quot;&gt;</span><br><span class="line">        &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">        &lt;p class=&quot;name&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/RouterLink&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.goods-list &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  height: 406px;</span><br><span class="line"></span><br><span class="line">  li &#123;</span><br><span class="line">    width: 306px;</span><br><span class="line">    height: 406px;</span><br><span class="line"></span><br><span class="line">    background: #f0f9f4;</span><br><span class="line">    transition: all .5s;</span><br><span class="line"></span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      transform: translate3d(0, -3px, 0);</span><br><span class="line">      box-shadow: 0 3px 8px rgb(0 0 0 / 20%);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: 306px;</span><br><span class="line">      height: 306px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      font-size: 22px;</span><br><span class="line">      padding-top: 12px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      text-overflow: ellipsis;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      white-space: nowrap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .price &#123;</span><br><span class="line">      color: $priceColor;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-封装接口"><a href="#2-封装接口" class="headerlink" title="2. 封装接口"></a>2. 封装接口</h3><p>home.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 获取新鲜好物</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">findNewAPI</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">httpInstance</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/home/new&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-获取数据渲染模版"><a href="#3-获取数据渲染模版" class="headerlink" title="3. 获取数据渲染模版"></a>3. 获取数据渲染模版</h3><p>src\views\Home\components\HomeNew.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import HomePanel from &quot;./HomePanel.vue&quot;;</span><br><span class="line">import &#123; findNewAPI &#125; from &quot;@/apis/home&quot;;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const newList = ref([]);</span><br><span class="line">const getNewList = async () =&gt; &#123;</span><br><span class="line">  const res = await findNewAPI();</span><br><span class="line">  newList.value = res.result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">getNewList();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;HomePanel title=&quot;新鲜好物&quot; sub-title=&quot;新鲜出炉 品质靠谱&quot;&gt;</span><br><span class="line">    &lt;template #main&gt;</span><br><span class="line">      &lt;ul class=&quot;goods-list&quot;&gt;</span><br><span class="line">        &lt;li v-for=&quot;item in newList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">          &lt;RouterLink :to=&quot;`/detail/$&#123;item.id&#125;`&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">            &lt;p class=&quot;name&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">          &lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/HomePanel&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-list &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  height: 406px;</span><br><span class="line"></span><br><span class="line">  li &#123;</span><br><span class="line">    width: 306px;</span><br><span class="line">    height: 406px;</span><br><span class="line"></span><br><span class="line">    background: #f0f9f4;</span><br><span class="line">    transition: all 0.5s;</span><br><span class="line"></span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      transform: translate3d(0, -3px, 0);</span><br><span class="line">      box-shadow: 0 3px 8px rgb(0 0 0 / 20%);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: 306px;</span><br><span class="line">      height: 306px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      font-size: 22px;</span><br><span class="line">      padding-top: 12px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      text-overflow: ellipsis;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      white-space: nowrap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .price &#123;</span><br><span class="line">      color: $priceColor;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="人气推荐实现"><a href="#人气推荐实现" class="headerlink" title="人气推荐实现"></a>人气推荐实现</h2><h3 id="1-封装接口"><a href="#1-封装接口" class="headerlink" title="1. 封装接口"></a>1. 封装接口</h3><p>src\apis\home.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 获取人气推荐</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getHotAPI</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span>  <span class="title function_">httpInstance</span>(<span class="string">&#x27;home/hot&#x27;</span>, <span class="string">&#x27;get&#x27;</span>, &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-获取数据渲染模版"><a href="#2-获取数据渲染模版" class="headerlink" title="2. 获取数据渲染模版"></a>2. 获取数据渲染模版</h3><p>src\views\Home\components\HomeHot.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import HomePanel from &quot;./HomePanel.vue&quot;;</span><br><span class="line">import &#123; getHotAPI &#125; from &quot;@/apis/home&quot;;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const hotList = ref([]);</span><br><span class="line">const getHotList = async () =&gt; &#123;</span><br><span class="line">  const res = await getHotAPI();</span><br><span class="line">  hotList.value = res.result;</span><br><span class="line">&#125;;</span><br><span class="line">getHotList();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;HomePanel title=&quot;人气推荐&quot; sub-title=&quot;人气爆款 不容错过&quot;&gt;</span><br><span class="line">    &lt;template #main&gt;</span><br><span class="line">      &lt;ul class=&quot;goods-list&quot;&gt;</span><br><span class="line">        &lt;li v-for=&quot;item in hotList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">            &lt;p class=&quot;name&quot;&gt;&#123;&#123; item.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;p class=&quot;desc&quot;&gt;&#123;&#123; item.alt &#125;&#125;&lt;/p&gt;</span><br><span class="line">          &lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/HomePanel&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-list &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  height: 426px;</span><br><span class="line"></span><br><span class="line">  li &#123;</span><br><span class="line">    width: 306px;</span><br><span class="line">    height: 406px;</span><br><span class="line">    transition: all 0.5s;</span><br><span class="line"></span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      transform: translate3d(0, -3px, 0);</span><br><span class="line">      box-shadow: 0 3px 8px rgb(0 0 0 / 20%);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: 306px;</span><br><span class="line">      height: 306px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      font-size: 22px;</span><br><span class="line">      padding-top: 12px;</span><br><span class="line">      text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .desc &#123;</span><br><span class="line">      color: #999;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="懒加载指令实现"><a href="#懒加载指令实现" class="headerlink" title="懒加载指令实现"></a>懒加载指令实现</h2><h3 id="1-封装全局指令"><a href="#1-封装全局指令" class="headerlink" title="1. 封装全局指令"></a>1. 封装全局指令</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义懒加载插件</span></span><br><span class="line"><span class="keyword">import</span> &#123; useIntersectionObserver &#125; <span class="keyword">from</span> <span class="string">&quot;@vueuse/core&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> lazyPlugin = &#123;</span><br><span class="line">  <span class="title function_">install</span>(<span class="params">app</span>) &#123;</span><br><span class="line">    <span class="comment">// 懒加载指令逻辑</span></span><br><span class="line">    app.<span class="title function_">directive</span>(<span class="string">&quot;img-lazy&quot;</span>, &#123;</span><br><span class="line">      <span class="title function_">mounted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">        <span class="comment">// el: 指令绑定的那个元素 img</span></span><br><span class="line">        <span class="comment">// binding: binding.value  指令等于号后面绑定的表达式的值  图片url</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(el, binding.<span class="property">value</span>);</span><br><span class="line">        <span class="keyword">const</span> &#123; stop &#125; = <span class="title function_">useIntersectionObserver</span>(el, <span class="function">(<span class="params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(isIntersecting);</span><br><span class="line">          <span class="keyword">if</span> (isIntersecting) &#123;</span><br><span class="line">            <span class="comment">// 进入视口区域</span></span><br><span class="line">            el.<span class="property">src</span> = binding.<span class="property">value</span>;</span><br><span class="line">            <span class="comment">// 停止监听器</span></span><br><span class="line">            <span class="title function_">stop</span>();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-注册全局指令"><a href="#2-注册全局指令" class="headerlink" title="2. 注册全局指令"></a>2. 注册全局指令</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全局指令注册</span></span><br><span class="line"><span class="keyword">import</span> &#123; lazyPlugin &#125; <span class="keyword">from</span> <span class="string">&quot;@/directives&quot;</span>;</span><br><span class="line">app.<span class="title function_">use</span>(lazyPlugin);</span><br></pre></td></tr></table></figure>

<h3 id="3-修改HomeHot"><a href="#3-修改HomeHot" class="headerlink" title="3.修改HomeHot"></a>3.修改HomeHot</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;HomePanel title=&quot;人气推荐&quot; sub-title=&quot;人气爆款 不容错过&quot;&gt;</span><br><span class="line">    &lt;template #main&gt;</span><br><span class="line">      &lt;ul class=&quot;goods-list&quot;&gt;</span><br><span class="line">        &lt;li v-for=&quot;item in hotList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;</span><br><span class="line">            &lt;!-- 这里使用了懒加载 --&gt;</span><br><span class="line">            &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">            &lt;p class=&quot;name&quot;&gt;&#123;&#123; item.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;p class=&quot;desc&quot;&gt;&#123;&#123; item.alt &#125;&#125;&lt;/p&gt;</span><br><span class="line">          &lt;/RouterLink&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/HomePanel&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h2 id="Product产品列表实现"><a href="#Product产品列表实现" class="headerlink" title="Product产品列表实现"></a>Product产品列表实现</h2><h3 id="1-基础数据渲染"><a href="#1-基础数据渲染" class="headerlink" title="1. 基础数据渲染"></a>1. 基础数据渲染</h3><p>1- 准备静态模版</p>
<p>HomeProduct.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import HomePanel from &#x27;./HomePanel.vue&#x27;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-product&quot;&gt;</span><br><span class="line">    &lt;!-- &lt;HomePanel :title=&quot;cate.name&quot; v-for=&quot;cate in goodsProduct&quot; :key=&quot;cate.id&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;RouterLink class=&quot;cover&quot; to=&quot;/&quot;&gt;</span><br><span class="line">          &lt;img :src=&quot;cate.picture&quot; /&gt;</span><br><span class="line">          &lt;strong class=&quot;label&quot;&gt;</span><br><span class="line">            &lt;span&gt;&#123;&#123; cate.name &#125;&#125;馆&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;&#123;&#123; cate.saleInfo &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;/strong&gt;</span><br><span class="line">        &lt;/RouterLink&gt;</span><br><span class="line">        &lt;ul class=&quot;goods-list&quot;&gt;</span><br><span class="line">          &lt;li v-for=&quot;good in cate.goods&quot; :key=&quot;good.id&quot;&gt;</span><br><span class="line">            &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot;&gt;</span><br><span class="line">              &lt;img :src=&quot;good.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">              &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; good.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; good.desc &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; good.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;/RouterLink&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/HomePanel&gt; --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.home-product &#123;</span><br><span class="line">  background: #fff;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  .sub &#123;</span><br><span class="line">    margin-bottom: 2px;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      padding: 2px 12px;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      border-radius: 4px;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        background: $xtxColor;</span><br><span class="line">        color: #fff;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-child &#123;</span><br><span class="line">        margin-right: 80px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .box &#123;</span><br><span class="line">    display: flex;</span><br><span class="line"></span><br><span class="line">    .cover &#123;</span><br><span class="line">      width: 240px;</span><br><span class="line">      height: 610px;</span><br><span class="line">      margin-right: 10px;</span><br><span class="line">      position: relative;</span><br><span class="line"></span><br><span class="line">      img &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .label &#123;</span><br><span class="line">        width: 188px;</span><br><span class="line">        height: 66px;</span><br><span class="line">        display: flex;</span><br><span class="line">        font-size: 18px;</span><br><span class="line">        color: #fff;</span><br><span class="line">        line-height: 66px;</span><br><span class="line">        font-weight: normal;</span><br><span class="line">        position: absolute;</span><br><span class="line">        left: 0;</span><br><span class="line">        top: 50%;</span><br><span class="line">        transform: translate3d(0, -50%, 0);</span><br><span class="line"></span><br><span class="line">        span &#123;</span><br><span class="line">          text-align: center;</span><br><span class="line"></span><br><span class="line">          &amp;:first-child &#123;</span><br><span class="line">            width: 76px;</span><br><span class="line">            background: rgba(0, 0, 0, 0.9);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          &amp;:last-child &#123;</span><br><span class="line">            flex: 1;</span><br><span class="line">            background: rgba(0, 0, 0, 0.7);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .goods-list &#123;</span><br><span class="line">      width: 990px;</span><br><span class="line">      display: flex;</span><br><span class="line">      flex-wrap: wrap;</span><br><span class="line"></span><br><span class="line">      li &#123;</span><br><span class="line">        width: 240px;</span><br><span class="line">        height: 300px;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line"></span><br><span class="line">        &amp;:nth-last-child(-n + 4) &#123;</span><br><span class="line">          margin-bottom: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &amp;:nth-child(4n) &#123;</span><br><span class="line">          margin-right: 0;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .goods-item &#123;</span><br><span class="line">      display: block;</span><br><span class="line">      width: 220px;</span><br><span class="line">      padding: 20px 30px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      transition: all .5s;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        transform: translate3d(0, -3px, 0);</span><br><span class="line">        box-shadow: 0 3px 8px rgb(0 0 0 / 20%);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      img &#123;</span><br><span class="line">        width: 160px;</span><br><span class="line">        height: 160px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      p &#123;</span><br><span class="line">        padding-top: 10px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .name &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .desc &#123;</span><br><span class="line">        color: #999;</span><br><span class="line">        height: 29px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .price &#123;</span><br><span class="line">        color: $priceColor;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>2- 封装接口</p>
<p>src\apis\home.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 获取所有商品模块</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getGoodsAPI</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">httpInstance</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/home/goods&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3- 获取并渲染数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import HomePanel from &quot;./HomePanel.vue&quot;;</span><br><span class="line">import &#123; getGoodsAPI &#125; from &quot;@/apis/home&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">const goodsProduct = ref([]);</span><br><span class="line">const getGoods = async () =&gt; &#123;</span><br><span class="line">  const &#123; result &#125; = await getGoodsAPI();</span><br><span class="line">  goodsProduct.value = result;</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; getGoods());</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-product&quot;&gt;</span><br><span class="line">    &lt;HomePanel :title=&quot;cate.name&quot; v-for=&quot;cate in goodsProduct&quot; :key=&quot;cate.id&quot;&gt;</span><br><span class="line">      &lt;template #main&gt;</span><br><span class="line">        &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">          &lt;RouterLink class=&quot;cover&quot; to=&quot;/&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;cate.picture&quot; /&gt;</span><br><span class="line">            &lt;strong class=&quot;label&quot;&gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123; cate.name &#125;&#125;馆&lt;/span&gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123; cate.saleInfo &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/strong&gt;</span><br><span class="line">          &lt;/RouterLink&gt;</span><br><span class="line">          &lt;ul class=&quot;goods-list&quot;&gt;</span><br><span class="line">            &lt;li v-for=&quot;goods in cate.goods&quot; :key=&quot;goods.id&quot;&gt;</span><br><span class="line">              &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot;&gt;</span><br><span class="line">                &lt;img :src=&quot;goods.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">                &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; goods.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">                &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; goods.desc &#125;&#125;&lt;/p&gt;</span><br><span class="line">                &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; goods.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;/RouterLink&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/HomePanel&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-图片懒加载"><a href="#2-图片懒加载" class="headerlink" title="2. 图片懒加载"></a>2. 图片懒加载</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home-product&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">HomePanel</span> <span class="attr">:title</span>=<span class="string">&quot;cate.name&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;cate in goodsProduct&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;cate.id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指令替换 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-img-lazy</span>=<span class="string">&quot;cate.picture&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;goods in cate.goods&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;goods.id&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;goods-item&quot;</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- 指令替换 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-img-lazy</span>=<span class="string">&quot;goods.picture&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">HomePanel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="GoodsItem组件封装"><a href="#GoodsItem组件封装" class="headerlink" title="GoodsItem组件封装"></a>GoodsItem组件封装</h2><p>由于下面这个组件经常用，所以我们可以给他封装成一个组件<img src="/../pic/image-20230624214314007.png" alt="image-20230624214314007"></p>
<h3 id="1-封装组件"><a href="#1-封装组件" class="headerlink" title="1. 封装组件"></a>1. 封装组件</h3><p>src\views\Home\components\GoodsItem.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">defineProps(&#123;</span><br><span class="line">  goods: &#123;</span><br><span class="line">    type: Object,</span><br><span class="line">    default: () =&gt; &#123; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot;&gt;</span><br><span class="line">    &lt;img :src=&quot;goods.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">    &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; goods.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; goods.desc &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; goods.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/RouterLink&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-item &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  width: 220px;</span><br><span class="line">  padding: 20px 30px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  transition: all .5s;</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    transform: translate3d(0, -3px, 0);</span><br><span class="line">    box-shadow: 0 3px 8px rgb(0 0 0 / 20%);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  img &#123;</span><br><span class="line">    width: 160px;</span><br><span class="line">    height: 160px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  p &#123;</span><br><span class="line">    padding-top: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .name &#123;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .desc &#123;</span><br><span class="line">    color: #999;</span><br><span class="line">    height: 29px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .price &#123;</span><br><span class="line">    color: $priceColor;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-使用组件"><a href="#2-使用组件" class="headerlink" title="2. 使用组件"></a>2. 使用组件</h3><p>src\views\Home\components\GoodsItem.vue</p>
<p>下面就不写导入组件了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;ul class=&quot;goods-list&quot;&gt;</span><br><span class="line">    &lt;li v-for=&quot;goods in cate.goods&quot; :key=&quot;goods.id&quot;&gt;</span><br><span class="line">        &lt;GoodsItem :goods=&quot;goods&quot; /&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<h1 id="一级分类页"><a href="#一级分类页" class="headerlink" title="一级分类页"></a>一级分类页</h1><h2 id="静态结构搭建和路由配置"><a href="#静态结构搭建和路由配置" class="headerlink" title="静态结构搭建和路由配置"></a>静态结构搭建和路由配置</h2><h3 id="1-准备分类组件"><a href="#1-准备分类组件" class="headerlink" title="1. 准备分类组件"></a>1. 准备分类组件</h3><p>src\views\Category\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&#x27;top-category&#x27;&gt;</span><br><span class="line">    我是分类</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-配置路由"><a href="#2-配置路由" class="headerlink" title="2. 配置路由"></a>2. 配置路由</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// createRouter：创建router实例对象</span></span><br><span class="line"><span class="comment">// createWebHistory：创建history模式的路由</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Login/index.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Layout/index.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Home/index.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Category</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Category/index.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="comment">// path和component对应关系的位置</span></span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;layout&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;category/:id&quot;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Category</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;login&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Login</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-配置导航区域链接"><a href="#3-配置导航区域链接" class="headerlink" title="3. 配置导航区域链接"></a>3. 配置导航区域链接</h3><p>LayoutHeader.vue和LayoutFixed.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in categoryStore.categoryList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">:to</span>=<span class="string">&quot;`/category/$&#123;item.id&#125;`&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; item.name &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="面包屑导航渲染"><a href="#面包屑导航渲染" class="headerlink" title="面包屑导航渲染"></a>面包屑导航渲染</h2><h3 id="1-认识组件准备模版"><a href="#1-认识组件准备模版" class="headerlink" title="1. 认识组件准备模版"></a>1. 认识组件准备模版</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;top-category&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container m-top-20&quot;&gt;</span><br><span class="line">      &lt;!-- 面包屑 --&gt;</span><br><span class="line">      &lt;div class=&quot;bread-container&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;居家&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.top-category &#123;</span><br><span class="line">  h3 &#123;</span><br><span class="line">    font-size: 28px;</span><br><span class="line">    color: #666;</span><br><span class="line">    font-weight: normal;</span><br><span class="line">    text-align: center;</span><br><span class="line">    line-height: 100px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .sub-list &#123;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    background-color: #fff;</span><br><span class="line"></span><br><span class="line">    ul &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      padding: 0 32px;</span><br><span class="line">      flex-wrap: wrap;</span><br><span class="line"></span><br><span class="line">      li &#123;</span><br><span class="line">        width: 168px;</span><br><span class="line">        height: 160px;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        a &#123;</span><br><span class="line">          text-align: center;</span><br><span class="line">          display: block;</span><br><span class="line">          font-size: 16px;</span><br><span class="line"></span><br><span class="line">          img &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          p &#123;</span><br><span class="line">            line-height: 40px;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          &amp;:hover &#123;</span><br><span class="line">            color: $xtxColor;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .ref-goods &#123;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    position: relative;</span><br><span class="line"></span><br><span class="line">    .head &#123;</span><br><span class="line">      .xtx-more &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 20px;</span><br><span class="line">        right: 20px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .tag &#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">        color: #999;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">        position: relative;</span><br><span class="line">        top: -20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .body &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-around;</span><br><span class="line">      padding: 0 40px 30px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .bread-container &#123;</span><br><span class="line">    padding: 25px 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-封装接口-1"><a href="#2-封装接口-1" class="headerlink" title="2. 封装接口"></a>2. 封装接口</h3><p>category.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;@/utils/http.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 获取分类数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; id 分类id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getTopCategoryAPI</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/category&quot;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-渲染面包屑导航"><a href="#3-渲染面包屑导航" class="headerlink" title="3. 渲染面包屑导航"></a>3. 渲染面包屑导航</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; getTopCategoryAPI &#125; from &quot;@/apis/category&quot;;</span><br><span class="line">const categoryData = ref(&#123;&#125;);</span><br><span class="line">// 这里可以获取路由的参数，这里还没引入，注意一下</span><br><span class="line">const route = useRoute();</span><br><span class="line">const getCategory = async () =&gt; &#123;</span><br><span class="line">  // 如何在setup中获取路由参数 useRoute() -&gt; route 等价于this.$route</span><br><span class="line">  const res = await getTopCategoryAPI(route.params.id);</span><br><span class="line">  categoryData.value = res.result;</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;这里是category&quot;);</span><br><span class="line">  getCategory();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;bread-container&quot;&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;&#123;&#123; categoryData.name &#125;&#125;&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="分类Banner渲染"><a href="#分类Banner渲染" class="headerlink" title="分类Banner渲染"></a>分类Banner渲染</h2><p><img src="/../pic/image-20230624222342197.png" alt="image-20230624222342197"></p>
<h3 id="1-适配接口"><a href="#1-适配接口" class="headerlink" title="1. 适配接口"></a>1. 适配接口</h3><p>apis&#x2F;home.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getBannerAPI</span>(<span class="params">params = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// 默认为1 商品为2</span></span><br><span class="line">  <span class="keyword">const</span> &#123; distributionSite = <span class="string">&quot;1&quot;</span> &#125; = params;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">httpInstance</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/home/banner&quot;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      distributionSite,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-迁移首页Banner逻辑"><a href="#2-迁移首页Banner逻辑" class="headerlink" title="2. 迁移首页Banner逻辑"></a>2. 迁移首页Banner逻辑</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 部分代码省略</span><br><span class="line">import &#123; getBannerAPI &#125; from &#x27;@/apis/home&#x27;</span><br><span class="line"></span><br><span class="line">// 获取banner</span><br><span class="line">const bannerList = ref([])</span><br><span class="line"></span><br><span class="line">const getBanner = async () =&gt; &#123;</span><br><span class="line">  const res = await getBannerAPI(&#123;</span><br><span class="line">    distributionSite: &#x27;2&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">  console.log(res)</span><br><span class="line">  bannerList.value = res.result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; getBanner())</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;top-category&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container m-top-20&quot;&gt;</span><br><span class="line">      &lt;!-- 面包屑 --&gt;</span><br><span class="line">      &lt;div class=&quot;bread-container&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;&#123;&#123; categoryData.name &#125;&#125;&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 轮播图 --&gt;</span><br><span class="line">      &lt;div class=&quot;home-banner&quot;&gt;</span><br><span class="line">        &lt;el-carousel height=&quot;500px&quot;&gt;</span><br><span class="line">          &lt;el-carousel-item v-for=&quot;item in bannerList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;item.imgUrl&quot; alt=&quot;&quot;&gt;</span><br><span class="line">          &lt;/el-carousel-item&gt;</span><br><span class="line">        &lt;/el-carousel&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">// 部分代码省略</span><br><span class="line">.home-banner &#123;</span><br><span class="line">  width: 1240px;</span><br><span class="line">  height: 500px;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  img &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 500px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="导航激活设置分类列表渲染"><a href="#导航激活设置分类列表渲染" class="headerlink" title="导航激活设置分类列表渲染"></a>导航激活设置分类列表渲染</h2><h3 id="1-导航激活状态设置"><a href="#1-导航激活状态设置" class="headerlink" title="1. 导航激活状态设置"></a>1. 导航激活状态设置</h3><p>其实就是如果点击导航，然后点击的这个导航就会一直高亮的效果</p>
<p><img src="/../pic/%E5%8A%A8%E7%94%BB-16877541703231.gif" alt="动画"></p>
<p>src\views\Layout\components\LayoutHeader.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 这个active-class=&quot;active&quot;的value是一个需要激活的class样式，样式写在了下面 --&gt;</span><br><span class="line">&lt;RouterLink active-class=&quot;active&quot; :to=&quot;`/category/$&#123;item.id&#125;`&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-分类数据模版"><a href="#2-分类数据模版" class="headerlink" title="2. 分类数据模版"></a>2. 分类数据模版</h3><p><img src="/../pic/image-20230626124207877.png" alt="image-20230626124207877"></p>
<p>src\views\Category\index.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sub-list&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>全部分类<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;i in categoryData.children&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;i.picture&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ref-goods&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in categoryData.children&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;head&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>- &#123;&#123; item.name &#125;&#125;-<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">GoodsItem</span> <span class="attr">v-for</span>=<span class="string">&quot;good in item.goods&quot;</span> <span class="attr">:goods</span>=<span class="string">&quot;good&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;good.id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="路由缓存问题解决"><a href="#路由缓存问题解决" class="headerlink" title="路由缓存问题解决"></a>路由缓存问题解决</h2><p><img src="/../pic/image-20230626124345027.png" alt="image-20230626124345027"></p>
<blockquote>
<p>解决方案：</p>
<ol>
<li>让组件实例不再复用，强制销毁重建</li>
<li>监听路由变化，变化之后执行数据更新操作</li>
</ol>
</blockquote>
<p>具体实现：</p>
<h3 id="第一种方法"><a href="#第一种方法" class="headerlink" title="第一种方法"></a>第一种方法</h3><p>给 routerv-view 添加key属性，强制不添加缓存，破坏缓存，所以这个方法性能会比较差<img src="../pic/image-20230626124558757.png" alt="image-20230626124558757"  /></p>
<p><img src="/../pic/image-20230626125816209.png" alt="image-20230626125816209"></p>
<h3 id="第二种方法"><a href="#第二种方法" class="headerlink" title="第二种方法"></a>第二种方法</h3><p>使用 onBeforeRouteUpdate钩子函数，做精确更新</p>
<p><img src="/../pic/image-20230626131111706.png" alt="image-20230626131111706"></p>
<p>src\views\Category\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; getBannerAPI &#125; from &quot;@/apis/home&quot;;</span><br><span class="line">import &#123; useRoute, onBeforeRouteUpdate &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; getTopCategoryAPI &#125; from &quot;@/apis/category&quot;;</span><br><span class="line">import GoodsItem from &quot;../Home/components/GoodsItem.vue&quot;;</span><br><span class="line">const categoryData = ref(&#123;&#125;);</span><br><span class="line">// 这里可以获取路由的参数，这里还没引入，注意一下</span><br><span class="line">const route = useRoute();</span><br><span class="line">// 这里是给id付了一个初始值，是一种高级的写法，如果</span><br><span class="line">const getCategory = async (id = route.params.id) =&gt; &#123;</span><br><span class="line">  // 如何在setup中获取路由参数 useRoute() -&gt; route 等价于this.$route</span><br><span class="line">  const res = await getTopCategoryAPI(id);</span><br><span class="line">  categoryData.value = res.result;</span><br><span class="line">&#125;;</span><br><span class="line">// 获取banner</span><br><span class="line">const bannerList = ref([]);</span><br><span class="line"></span><br><span class="line">const getBanner = async () =&gt; &#123;</span><br><span class="line">  const res = await getBannerAPI(&#123;</span><br><span class="line">    distributionSite: &quot;2&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">  console.log(res);</span><br><span class="line">  bannerList.value = res.result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  getBanner();</span><br><span class="line">  console.log(&quot;这里是category&quot;);</span><br><span class="line">  getCategory();</span><br><span class="line">&#125;);</span><br><span class="line">// 这里的to对象里面有跳转到指定网址的参数和信息</span><br><span class="line">onBeforeRouteUpdate((to) =&gt; &#123;</span><br><span class="line">  console.log(&quot;hahha路由变化了&quot;);</span><br><span class="line">  getCategory(to.params.id);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;top-category&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container m-top-20&quot;&gt;</span><br><span class="line">      &lt;!-- 面包屑 --&gt;</span><br><span class="line">      &lt;div class=&quot;bread-container&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;&#123;&#123; categoryData.name &#125;&#125;&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 轮播图 --&gt;</span><br><span class="line">      &lt;div class=&quot;home-banner&quot;&gt;</span><br><span class="line">        &lt;el-carousel height=&quot;500px&quot;&gt;</span><br><span class="line">          &lt;el-carousel-item v-for=&quot;item in bannerList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;item.imgUrl&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">          &lt;/el-carousel-item&gt;</span><br><span class="line">        &lt;/el-carousel&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!--  --&gt;</span><br><span class="line">      &lt;div class=&quot;sub-list&quot;&gt;</span><br><span class="line">        &lt;h3&gt;全部分类&lt;/h3&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;i in categoryData.children&quot; :key=&quot;i.id&quot;&gt;</span><br><span class="line">            &lt;RouterLink to=&quot;/&quot;&gt;</span><br><span class="line">              &lt;img :src=&quot;i.picture&quot; /&gt;</span><br><span class="line">              &lt;p&gt;&#123;&#123; i.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;/RouterLink&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        class=&quot;ref-goods&quot;</span><br><span class="line">        v-for=&quot;item in categoryData.children&quot;</span><br><span class="line">        :key=&quot;item.id&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div class=&quot;head&quot;&gt;</span><br><span class="line">          &lt;h3&gt;- &#123;&#123; item.name &#125;&#125;-&lt;/h3&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;body&quot;&gt;</span><br><span class="line">          &lt;GoodsItem v-for=&quot;good in item.goods&quot; :goods=&quot;good&quot; :key=&quot;good.id&quot; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">// 部分代码省略</span><br><span class="line">.home-banner &#123;</span><br><span class="line">  width: 1240px;</span><br><span class="line">  height: 500px;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  img &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 500px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.top-category &#123;</span><br><span class="line">  h3 &#123;</span><br><span class="line">    font-size: 28px;</span><br><span class="line">    color: #666;</span><br><span class="line">    font-weight: normal;</span><br><span class="line">    text-align: center;</span><br><span class="line">    line-height: 100px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .sub-list &#123;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    background-color: #fff;</span><br><span class="line"></span><br><span class="line">    ul &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      padding: 0 32px;</span><br><span class="line">      flex-wrap: wrap;</span><br><span class="line"></span><br><span class="line">      li &#123;</span><br><span class="line">        width: 168px;</span><br><span class="line">        height: 160px;</span><br><span class="line"></span><br><span class="line">        a &#123;</span><br><span class="line">          text-align: center;</span><br><span class="line">          display: block;</span><br><span class="line">          font-size: 16px;</span><br><span class="line"></span><br><span class="line">          img &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          p &#123;</span><br><span class="line">            line-height: 40px;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          &amp;:hover &#123;</span><br><span class="line">            color: $xtxColor;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .ref-goods &#123;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    position: relative;</span><br><span class="line"></span><br><span class="line">    .head &#123;</span><br><span class="line">      .xtx-more &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 20px;</span><br><span class="line">        right: 20px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .tag &#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">        color: #999;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">        position: relative;</span><br><span class="line">        top: -20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .body &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-around;</span><br><span class="line">      padding: 0 40px 30px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .bread-container &#123;</span><br><span class="line">    padding: 25px 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="基于业务逻辑的函数拆分"><a href="#基于业务逻辑的函数拆分" class="headerlink" title="基于业务逻辑的函数拆分"></a>基于业务逻辑的函数拆分</h2><blockquote>
<p>基本思想：把组件内独立的业务逻辑通过 <code>useXXX</code> 函数做封装处理，在组件中做组合使用</p>
</blockquote>
<p><img src="/../pic/image-20230626132841940.png" alt="image-20230626132841940"></p>
<p>实现步骤：</p>
<ol>
<li>按照业务 声明以use打头的逻辑函数</li>
<li>把独立的业务逻辑封装到各个函数的内部</li>
<li>函数内部把组件中需要用到的数据或者方法return出去</li>
<li>在组件中调用函数然后把数据或者方法解构赋值进行使用</li>
</ol>
<p>src\views\Category\composables\useBanner.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 封装分类数据业务相关代码</span></span><br><span class="line"><span class="keyword">import</span> &#123; onMounted, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getTopCategoryAPI &#125; <span class="keyword">from</span> <span class="string">&quot;@/apis/category&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onBeforeRouteUpdate &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCategory</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 获取分类数据</span></span><br><span class="line">  <span class="keyword">const</span> categoryData = <span class="title function_">ref</span>(&#123;&#125;);</span><br><span class="line">  <span class="keyword">const</span> route = <span class="title function_">useRoute</span>();</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getCategory</span> = <span class="keyword">async</span> (<span class="params">id = route.params.id</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getTopCategoryAPI</span>(id);</span><br><span class="line">    categoryData.<span class="property">value</span> = res.<span class="property">result</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> <span class="title function_">getCategory</span>());</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 目标:路由参数变化的时候 可以把分类数据接口重新发送</span></span><br><span class="line">  <span class="title function_">onBeforeRouteUpdate</span>(<span class="function">(<span class="params">to</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 存在问题：使用最新的路由参数请求最新的分类数据</span></span><br><span class="line">    <span class="title function_">getCategory</span>(to.<span class="property">params</span>.<span class="property">id</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    categoryData,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>src\views\Category\composables\useBanner.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 封装banner轮播图相关的业务代码</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getBannerAPI &#125; <span class="keyword">from</span> <span class="string">&#x27;@/apis/home&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useBanner</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> bannerList = <span class="title function_">ref</span>([])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getBanner</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getBannerAPI</span>(&#123;</span><br><span class="line">      <span class="attr">distributionSite</span>: <span class="string">&#x27;2&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    bannerList.<span class="property">value</span> = res.<span class="property">result</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> <span class="title function_">getBanner</span>())</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    bannerList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>src\views\Category\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">import &#123; useBanner &#125; from &#x27;./composables/useBanner&#x27;</span><br><span class="line">import &#123; useCategory &#125; from &#x27;./composables/useCategory&#x27;</span><br><span class="line">const &#123; bannerList &#125; = useBanner()</span><br><span class="line">const &#123; categoryData &#125; = useCategory()</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="二级分类"><a href="#二级分类" class="headerlink" title="二级分类"></a>二级分类</h1><h2 id="整体业务认识和路由配置"><a href="#整体业务认识和路由配置" class="headerlink" title="整体业务认识和路由配置"></a>整体业务认识和路由配置</h2><p><img src="/../pic/image-20230626134756387.png" alt="image-20230626134756387"></p>
<h3 id="1-准备组件模版"><a href="#1-准备组件模版" class="headerlink" title="1. 准备组件模版"></a>1. 准备组件模版</h3><p>src\views\SubCategory\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;!-- 面包屑 --&gt;</span><br><span class="line">    &lt;div class=&quot;bread-container&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;居家 &lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item&gt;居家生活用品&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;sub-container&quot;&gt;</span><br><span class="line">      &lt;el-tabs&gt;</span><br><span class="line">        &lt;el-tab-pane label=&quot;最新商品&quot; name=&quot;publishTime&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;el-tab-pane label=&quot;最高人气&quot; name=&quot;orderNum&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;el-tab-pane label=&quot;评论最多&quot; name=&quot;evaluateNum&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">      &lt;/el-tabs&gt;</span><br><span class="line">      &lt;div class=&quot;body&quot;&gt;</span><br><span class="line">        &lt;!-- 商品列表--&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.bread-container &#123;</span><br><span class="line">  padding: 25px 0;</span><br><span class="line">  color: #666;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sub-container &#123;</span><br><span class="line">  padding: 20px 10px;</span><br><span class="line">  background-color: #fff;</span><br><span class="line"></span><br><span class="line">  .body &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">    padding: 0 10px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods-item &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    width: 220px;</span><br><span class="line">    margin-right: 20px;</span><br><span class="line">    padding: 20px 30px;</span><br><span class="line">    text-align: center;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: 160px;</span><br><span class="line">      height: 160px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      padding-top: 10px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .name &#123;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .desc &#123;</span><br><span class="line">      color: #999;</span><br><span class="line">      height: 29px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .price &#123;</span><br><span class="line">      color: $priceColor;</span><br><span class="line">      font-size: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .pagination-container &#123;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-配置路由关系"><a href="#2-配置路由关系" class="headerlink" title="2. 配置路由关系"></a>2. 配置路由关系</h3><p>src\router\index.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Layout/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Home/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Category</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Category/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SubCategory</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/SubCategory/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;layout&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;category/:id&#x27;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Category</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;category/sub/:id&#x27;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;subCategory&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">SubCategory</span></span><br><span class="line">        &#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Login</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<h3 id="3-跳转配置"><a href="#3-跳转配置" class="headerlink" title="3. 跳转配置"></a>3. 跳转配置</h3><p>src\views\Category\index.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sub-list&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>全部分类<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;i in categoryData.children&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">:to</span>=<span class="string">&quot;`/category/sub/$&#123;i.id&#125;`&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;i.picture&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="面包屑导航实现"><a href="#面包屑导航实现" class="headerlink" title="面包屑导航实现"></a>面包屑导航实现</h2><h3 id="1-准备接口"><a href="#1-准备接口" class="headerlink" title="1. 准备接口"></a>1. 准备接口</h3><p>src\apis\category.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 获取二级分类列表数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; id 二级分类id </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getCategoryFilterAPI</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/category/sub/filter&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>:&#123;</span><br><span class="line">      id</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-获取数据渲染模版-1"><a href="#2-获取数据渲染模版-1" class="headerlink" title="2. 获取数据渲染模版"></a>2. 获取数据渲染模版</h3><p>src\views\SubCategory\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; getCategoryFilterAPI &#125; from &quot;@/apis/category&quot;;</span><br><span class="line">import &#123; useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">// 获取面包屑导航数据</span><br><span class="line">const route = useRoute();</span><br><span class="line">const filterData = ref(&#123;&#125;);</span><br><span class="line">const getFilterData = async () =&gt; &#123;</span><br><span class="line">  const res = await getCategoryFilterAPI(route.params.id);</span><br><span class="line">  filterData.value = res.result;</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  getFilterData();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;!-- 面包屑 --&gt;</span><br><span class="line">    &lt;div class=&quot;bread-container&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/$&#123;filterData.parentId&#125;` &#125;&quot;</span><br><span class="line">          &gt;&#123;&#123; filterData.parentName &#125;&#125;</span><br><span class="line">        &lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item&gt;&#123;&#123; filterData.name &#125;&#125;&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;sub-container&quot;&gt;</span><br><span class="line">      &lt;el-tabs&gt;</span><br><span class="line">        &lt;el-tab-pane label=&quot;最新商品&quot; name=&quot;publishTime&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;el-tab-pane label=&quot;最高人气&quot; name=&quot;orderNum&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;el-tab-pane label=&quot;评论最多&quot; name=&quot;evaluateNum&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">      &lt;/el-tabs&gt;</span><br><span class="line">      &lt;div class=&quot;body&quot;&gt;</span><br><span class="line">        &lt;!-- 商品列表--&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="分类基础列表实现"><a href="#分类基础列表实现" class="headerlink" title="分类基础列表实现"></a>分类基础列表实现</h2><p><img src="/../pic/image-20230626143453649.png" alt="image-20230626143453649"></p>
<p>这里我们先实现第一步，也就是得到基础的列表</p>
<h3 id="1-准备接口-1"><a href="#1-准备接口-1" class="headerlink" title="1. 准备接口"></a>1. 准备接口</h3><p>@&#x2F;apis&#x2F;category.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 获取导航数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@data</span> &#123;<span class="type"> </span></span></span><br><span class="line"><span class="type"><span class="comment">     categoryId: 1005000 ,</span></span></span><br><span class="line"><span class="type"><span class="comment">     page: 1,</span></span></span><br><span class="line"><span class="type"><span class="comment">     pageSize: 20,</span></span></span><br><span class="line"><span class="type"><span class="comment">     sortField: &#x27;publishTime&#x27; | &#x27;orderNum&#x27; | &#x27;evaluateNum&#x27;</span></span></span><br><span class="line"><span class="type"><span class="comment">   </span>&#125; </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getSubCategoryAPI</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/category/goods/temporary&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-获取数据列表"><a href="#2-获取数据列表" class="headerlink" title="2. 获取数据列表"></a>2. 获取数据列表</h3><p>src\views\SubCategory\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import GoodsItem from &quot;../Home/components/GoodsItem.vue&quot;;</span><br><span class="line">import &#123; getSubCategoryAPI &#125; from &quot;@/apis/category.js&quot;;</span><br><span class="line">// 获取基础列表数据渲染</span><br><span class="line">const goodList = ref([])</span><br><span class="line">const reqData = ref(&#123;</span><br><span class="line">  categoryId: route.params.id,</span><br><span class="line">  page: 1,</span><br><span class="line">  pageSize: 20,</span><br><span class="line">  sortField: &#x27;publishTime&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">  </span><br><span class="line">const getGoodList = async () =&gt; &#123;</span><br><span class="line">  const res = await getSubCategoryAPI(reqData.value)</span><br><span class="line">  console.log(res)</span><br><span class="line">  goodList.value = res.result.items</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">onMounted(() =&gt; getGoodList())</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      &lt;div class=&quot;body&quot;&gt;</span><br><span class="line">        &lt;!-- 商品列表--&gt;</span><br><span class="line">        &lt;GoodsItem v-for=&quot;goods in goodList&quot; :goods=&quot;goods&quot; :key=&quot;goods.id&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="列表筛选实现"><a href="#列表筛选实现" class="headerlink" title="列表筛选实现"></a>列表筛选实现</h2><blockquote>
<p>思路：tab组件切换时修改reqData中的sortField字段，重新拉取接口列表</p>
</blockquote>
<p>src\views\SubCategory\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// tab切换回调</span><br><span class="line">const tabChange = () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;tab切换了&#x27;, reqData.value.sortField)</span><br><span class="line">  reqData.value.page = 1</span><br><span class="line">  getGoodList()</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-tabs v-model=&quot;reqData.sortField&quot; @tab-change=&quot;tabChange&quot;&gt;</span><br><span class="line">    &lt;el-tab-pane label=&quot;最新商品&quot; name=&quot;publishTime&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">    &lt;el-tab-pane label=&quot;最高人气&quot; name=&quot;orderNum&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">    &lt;el-tab-pane label=&quot;评论最多&quot; name=&quot;evaluateNum&quot;&gt;&lt;/el-tab-pane&gt;</span><br><span class="line">  &lt;/el-tabs&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="无限加载实现"><a href="#无限加载实现" class="headerlink" title="无限加载实现"></a>无限加载实现</h2><blockquote>
<p>基础思路</p>
<ol>
<li>触底条件满足之后 page++，拉取下一页数据</li>
<li>新老数据做数组拼接</li>
<li>判断是否已经全部加载完毕，停止监听</li>
</ol>
</blockquote>
<p><img src="/../pic/image-20230626165042583.png" alt="image-20230626165042583"></p>
<p>src\views\SubCategory\index.vue</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加载更多</span></span><br><span class="line"><span class="keyword">const</span> disabled = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;加载更多数据咯&#x27;</span>)</span><br><span class="line">  <span class="comment">// 获取下一页的数据</span></span><br><span class="line">  reqData.<span class="property">value</span>.<span class="property">page</span>++</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getSubCategoryAPI</span>(reqData.<span class="property">value</span>)</span><br><span class="line">  goodList.<span class="property">value</span> = [...goodList.<span class="property">value</span>, ...res.<span class="property">result</span>.<span class="property">items</span>]</span><br><span class="line">  <span class="comment">// 加载完毕 停止监听</span></span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">result</span>.<span class="property">items</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    disabled.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在页面上监听load方法,并且设置如果到底的话不再加载新数据</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;body&quot;</span> <span class="attr">v-infinite-scroll</span>=<span class="string">&quot;load&quot;</span> <span class="attr">:infinite-scroll-disabled</span>=<span class="string">&quot;disabled&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 商品列表--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">GoodsItem</span> <span class="attr">v-for</span>=<span class="string">&quot;goods in goodList&quot;</span> <span class="attr">:goods</span>=<span class="string">&quot;goods&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;goods.id&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="定制路由行为"><a href="#定制路由行为" class="headerlink" title="定制路由行为"></a>定制路由行为</h2><p>定制路由行为可以让我们在切换不同路由的时候，可以自动滚动到页面的任何一个部分（比如说顶部），如果不配置默认会停留到原先的位置</p>
<p>配置</p>
<p><img src="/../pic/image-20230626171339818.png" alt="image-20230626171339818"></p>
<h1 id="新鲜好物商品详情"><a href="#新鲜好物商品详情" class="headerlink" title="新鲜好物商品详情"></a>新鲜好物商品详情</h1><h2 id="整体认识和路由配置"><a href="#整体认识和路由配置" class="headerlink" title="整体认识和路由配置"></a>整体认识和路由配置</h2><p><img src="/../pic/image-20230626171923568.png" alt="image-20230626171923568"></p>
<h3 id="1-准备组件模版-1"><a href="#1-准备组件模版-1" class="headerlink" title="1. 准备组件模版"></a>1. 准备组件模版</h3><p>src\views\Detail\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-goods-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;bread-container&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;母婴</span><br><span class="line">          &lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;跑步鞋</span><br><span class="line">          &lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;抓绒保暖，毛毛虫子儿童运动鞋&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 商品信息 --&gt;</span><br><span class="line">      &lt;div class=&quot;info-container&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;div class=&quot;goods-info&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;media&quot;&gt;</span><br><span class="line">              &lt;!-- 图片预览区 --&gt;</span><br><span class="line"></span><br><span class="line">              &lt;!-- 统计数量 --&gt;</span><br><span class="line">              &lt;ul class=&quot;goods-sales&quot;&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;p&gt;销量人气&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt; 100+ &lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&lt;i class=&quot;iconfont icon-task-filling&quot;&gt;&lt;/i&gt;销量人气&lt;/p&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;p&gt;商品评价&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;200+&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&lt;i class=&quot;iconfont icon-comment-filling&quot;&gt;&lt;/i&gt;查看评价&lt;/p&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;p&gt;收藏人气&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;300+&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&lt;i class=&quot;iconfont icon-favorite-filling&quot;&gt;&lt;/i&gt;收藏商品&lt;/p&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;p&gt;品牌信息&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;400+&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&lt;i class=&quot;iconfont icon-dynamic-filling&quot;&gt;&lt;/i&gt;品牌主页&lt;/p&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;spec&quot;&gt;</span><br><span class="line">              &lt;!-- 商品信息区 --&gt;</span><br><span class="line">              &lt;p class=&quot;g-name&quot;&gt; 抓绒保暖，毛毛虫儿童鞋 &lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;g-desc&quot;&gt;好穿 &lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;g-price&quot;&gt;</span><br><span class="line">                &lt;span&gt;200&lt;/span&gt;</span><br><span class="line">                &lt;span&gt; 100&lt;/span&gt;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">              &lt;div class=&quot;g-service&quot;&gt;</span><br><span class="line">                &lt;dl&gt;</span><br><span class="line">                  &lt;dt&gt;促销&lt;/dt&gt;</span><br><span class="line">                  &lt;dd&gt;12月好物放送，App领券购买直降120元&lt;/dd&gt;</span><br><span class="line">                &lt;/dl&gt;</span><br><span class="line">                &lt;dl&gt;</span><br><span class="line">                  &lt;dt&gt;服务&lt;/dt&gt;</span><br><span class="line">                  &lt;dd&gt;</span><br><span class="line">                    &lt;span&gt;无忧退货&lt;/span&gt;</span><br><span class="line">                    &lt;span&gt;快速退款&lt;/span&gt;</span><br><span class="line">                    &lt;span&gt;免费包邮&lt;/span&gt;</span><br><span class="line">                    &lt;a href=&quot;javascript:;&quot;&gt;了解详情&lt;/a&gt;</span><br><span class="line">                  &lt;/dd&gt;</span><br><span class="line">                &lt;/dl&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;!-- sku组件 --&gt;</span><br><span class="line"></span><br><span class="line">              &lt;!-- 数据组件 --&gt;</span><br><span class="line"></span><br><span class="line">              &lt;!-- 按钮组件 --&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;el-button size=&quot;large&quot; class=&quot;btn&quot;&gt;</span><br><span class="line">                  加入购物车</span><br><span class="line">                &lt;/el-button&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;goods-footer&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;goods-article&quot;&gt;</span><br><span class="line">              &lt;!-- 商品详情 --&gt;</span><br><span class="line">              &lt;div class=&quot;goods-tabs&quot;&gt;</span><br><span class="line">                &lt;nav&gt;</span><br><span class="line">                  &lt;a&gt;商品详情&lt;/a&gt;</span><br><span class="line">                &lt;/nav&gt;</span><br><span class="line">                &lt;div class=&quot;goods-detail&quot;&gt;</span><br><span class="line">                  &lt;!-- 属性 --&gt;</span><br><span class="line">                  &lt;ul class=&quot;attrs&quot;&gt;</span><br><span class="line">                    &lt;li v-for=&quot;item in 3&quot; :key=&quot;item.value&quot;&gt;</span><br><span class="line">                      &lt;span class=&quot;dt&quot;&gt;白色&lt;/span&gt;</span><br><span class="line">                      &lt;span class=&quot;dd&quot;&gt;纯棉&lt;/span&gt;</span><br><span class="line">                    &lt;/li&gt;</span><br><span class="line">                  &lt;/ul&gt;</span><br><span class="line">                  &lt;!-- 图片 --&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- 24热榜+专题推荐 --&gt;</span><br><span class="line">            &lt;div class=&quot;goods-aside&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.xtx-goods-page &#123;</span><br><span class="line">  .goods-info &#123;</span><br><span class="line">    min-height: 600px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    display: flex;</span><br><span class="line"></span><br><span class="line">    .media &#123;</span><br><span class="line">      width: 580px;</span><br><span class="line">      height: 600px;</span><br><span class="line">      padding: 30px 50px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .spec &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      padding: 30px 30px 30px 0;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods-footer &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line"></span><br><span class="line">    .goods-article &#123;</span><br><span class="line">      width: 940px;</span><br><span class="line">      margin-right: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .goods-aside &#123;</span><br><span class="line">      width: 280px;</span><br><span class="line">      min-height: 1000px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods-tabs &#123;</span><br><span class="line">    min-height: 600px;</span><br><span class="line">    background: #fff;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods-warn &#123;</span><br><span class="line">    min-height: 600px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .number-box &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line"></span><br><span class="line">    .label &#123;</span><br><span class="line">      width: 60px;</span><br><span class="line">      color: #999;</span><br><span class="line">      padding-left: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .g-name &#123;</span><br><span class="line">    font-size: 22px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .g-desc &#123;</span><br><span class="line">    color: #999;</span><br><span class="line">    margin-top: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .g-price &#123;</span><br><span class="line">    margin-top: 10px;</span><br><span class="line"></span><br><span class="line">    span &#123;</span><br><span class="line">      &amp;::before &#123;</span><br><span class="line">        content: &quot;¥&quot;;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:first-child &#123;</span><br><span class="line">        color: $priceColor;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">        font-size: 22px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-child &#123;</span><br><span class="line">        color: #999;</span><br><span class="line">        text-decoration: line-through;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .g-service &#123;</span><br><span class="line">    background: #f5f5f5;</span><br><span class="line">    width: 500px;</span><br><span class="line">    padding: 20px 10px 0 10px;</span><br><span class="line">    margin-top: 10px;</span><br><span class="line"></span><br><span class="line">    dl &#123;</span><br><span class="line">      padding-bottom: 20px;</span><br><span class="line">      display: flex;</span><br><span class="line">      align-items: center;</span><br><span class="line"></span><br><span class="line">      dt &#123;</span><br><span class="line">        width: 50px;</span><br><span class="line">        color: #999;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      dd &#123;</span><br><span class="line">        color: #666;</span><br><span class="line"></span><br><span class="line">        &amp;:last-child &#123;</span><br><span class="line">          span &#123;</span><br><span class="line">            margin-right: 10px;</span><br><span class="line"></span><br><span class="line">            &amp;::before &#123;</span><br><span class="line">              content: &quot;•&quot;;</span><br><span class="line">              color: $xtxColor;</span><br><span class="line">              margin-right: 2px;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          a &#123;</span><br><span class="line">            color: $xtxColor;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods-sales &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    width: 400px;</span><br><span class="line">    align-items: center;</span><br><span class="line">    text-align: center;</span><br><span class="line">    height: 140px;</span><br><span class="line"></span><br><span class="line">    li &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      position: relative;</span><br><span class="line"></span><br><span class="line">      ~li::after &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 10px;</span><br><span class="line">        left: 0;</span><br><span class="line">        height: 60px;</span><br><span class="line">        border-left: 1px solid #e4e4e4;</span><br><span class="line">        content: &quot;&quot;;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      p &#123;</span><br><span class="line">        &amp;:first-child &#123;</span><br><span class="line">          color: #999;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &amp;:nth-child(2) &#123;</span><br><span class="line">          color: $priceColor;</span><br><span class="line">          margin-top: 10px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &amp;:last-child &#123;</span><br><span class="line">          color: #666;</span><br><span class="line">          margin-top: 10px;</span><br><span class="line"></span><br><span class="line">          i &#123;</span><br><span class="line">            color: $xtxColor;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            margin-right: 2px;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          &amp;:hover &#123;</span><br><span class="line">            color: $xtxColor;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.goods-tabs &#123;</span><br><span class="line">  min-height: 600px;</span><br><span class="line">  background: #fff;</span><br><span class="line"></span><br><span class="line">  nav &#123;</span><br><span class="line">    height: 70px;</span><br><span class="line">    line-height: 70px;</span><br><span class="line">    display: flex;</span><br><span class="line">    border-bottom: 1px solid #f5f5f5;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      padding: 0 40px;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      position: relative;</span><br><span class="line"></span><br><span class="line">      &gt;span &#123;</span><br><span class="line">        color: $priceColor;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        margin-left: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.goods-detail &#123;</span><br><span class="line">  padding: 40px;</span><br><span class="line"></span><br><span class="line">  .attrs &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">    margin-bottom: 30px;</span><br><span class="line"></span><br><span class="line">    li &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      margin-bottom: 10px;</span><br><span class="line">      width: 50%;</span><br><span class="line"></span><br><span class="line">      .dt &#123;</span><br><span class="line">        width: 100px;</span><br><span class="line">        color: #999;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .dd &#123;</span><br><span class="line">        flex: 1;</span><br><span class="line">        color: #666;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &gt;img &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.btn &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bread-container &#123;</span><br><span class="line">  padding: 25px 0;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-配置路由-1"><a href="#2-配置路由-1" class="headerlink" title="2. 配置路由"></a>2. 配置路由</h3><p>src\router\index.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="comment">// path和component对应关系的位置</span></span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;category/:id&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Category</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;category/sub/:id&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">SubCategory</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;detail/:id&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Login</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 路由滚动行为定制</span></span><br><span class="line">  scrollBehavior () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">top</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-绑定模版测试跳转"><a href="#3-绑定模版测试跳转" class="headerlink" title="3. 绑定模版测试跳转"></a>3. 绑定模版测试跳转</h3><p>src\views\Home\components\HomeNew.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">:to</span>=<span class="string">&quot;`/detail/$&#123;item.id&#125;`&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item.picture&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span><span class="symbol">&amp;yen;</span>&#123;&#123; item.price &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="渲染基础数据"><a href="#渲染基础数据" class="headerlink" title="渲染基础数据"></a>渲染基础数据</h2><h3 id="1-封装接口-1"><a href="#1-封装接口-1" class="headerlink" title="1. 封装接口"></a>1. 封装接口</h3><p>src\apis\category.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/http&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getDetail</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/goods&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      id</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-获取数据渲染模版-2"><a href="#2-获取数据渲染模版-2" class="headerlink" title="2. 获取数据渲染模版"></a>2. 获取数据渲染模版</h3><p>src\views\Detail\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; getDetail &#125; from &#x27;@/apis/detail&#x27;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line">const goods = ref(&#123;&#125;)</span><br><span class="line">const route = useRoute()</span><br><span class="line">const getGoods = async () =&gt; &#123;</span><br><span class="line">  const res = await getDetail(route.params.id)</span><br><span class="line">  goods.value = res.result</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; getGoods())</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-goods-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot; v-if=&quot;goods.details&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;bread-container&quot;&gt;</span><br><span class="line">        &lt;el-breadcrumb separator=&quot;&gt;&quot;&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;!-- </span><br><span class="line">            错误原因：goods一开始&#123;&#125;  &#123;&#125;.categories -&gt; undefined  -&gt; undefined[1]</span><br><span class="line">            1. 可选链的语法?. </span><br><span class="line">            2. v-if手动控制渲染时机 保证只有数据存在才渲染</span><br><span class="line">           --&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/$&#123;goods.categories[1].id&#125;` &#125;&quot;&gt;&#123;&#123; goods.categories[1].name &#125;&#125;</span><br><span class="line">          &lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: `/category/sub/$&#123;goods.categories[0].id&#125;` &#125;&quot;&gt;&#123;&#123;</span><br><span class="line">            goods.categories[0].name</span><br><span class="line">          &#125;&#125;</span><br><span class="line">          &lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;抓绒保暖，毛毛虫子儿童运动鞋&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 商品信息 --&gt;</span><br><span class="line">      &lt;div class=&quot;info-container&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;div class=&quot;goods-info&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;media&quot;&gt;</span><br><span class="line">              &lt;!-- 图片预览区 --&gt;</span><br><span class="line"></span><br><span class="line">              &lt;!-- 统计数量 --&gt;</span><br><span class="line">              &lt;ul class=&quot;goods-sales&quot;&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;p&gt;销量人气&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt; &#123;&#123; goods.salesCount &#125;&#125;+ &lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&lt;i class=&quot;iconfont icon-task-filling&quot;&gt;&lt;/i&gt;销量人气&lt;/p&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;p&gt;商品评价&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&#123;&#123; goods.commentCount &#125;&#125;+&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&lt;i class=&quot;iconfont icon-comment-filling&quot;&gt;&lt;/i&gt;查看评价&lt;/p&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;p&gt;收藏人气&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&#123;&#123; goods.collectCount &#125;&#125;+&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&lt;i class=&quot;iconfont icon-favorite-filling&quot;&gt;&lt;/i&gt;收藏商品&lt;/p&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;p&gt;品牌信息&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&#123;&#123; goods.brand.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">                  &lt;p&gt;&lt;i class=&quot;iconfont icon-dynamic-filling&quot;&gt;&lt;/i&gt;品牌主页&lt;/p&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;spec&quot;&gt;</span><br><span class="line">              &lt;!-- 商品信息区 --&gt;</span><br><span class="line">              &lt;p class=&quot;g-name&quot;&gt; &#123;&#123; goods.name &#125;&#125; &lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;g-desc&quot;&gt;&#123;&#123; goods.desc &#125;&#125; &lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;g-price&quot;&gt;</span><br><span class="line">                &lt;span&gt;&#123;&#123; goods.oldPrice &#125;&#125;&lt;/span&gt;</span><br><span class="line">                &lt;span&gt; &#123;&#123; goods.price &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">              &lt;div class=&quot;g-service&quot;&gt;</span><br><span class="line">                &lt;dl&gt;</span><br><span class="line">                  &lt;dt&gt;促销&lt;/dt&gt;</span><br><span class="line">                  &lt;dd&gt;12月好物放送，App领券购买直降120元&lt;/dd&gt;</span><br><span class="line">                &lt;/dl&gt;</span><br><span class="line">                &lt;dl&gt;</span><br><span class="line">                  &lt;dt&gt;服务&lt;/dt&gt;</span><br><span class="line">                  &lt;dd&gt;</span><br><span class="line">                    &lt;span&gt;无忧退货&lt;/span&gt;</span><br><span class="line">                    &lt;span&gt;快速退款&lt;/span&gt;</span><br><span class="line">                    &lt;span&gt;免费包邮&lt;/span&gt;</span><br><span class="line">                    &lt;a href=&quot;javascript:;&quot;&gt;了解详情&lt;/a&gt;</span><br><span class="line">                  &lt;/dd&gt;</span><br><span class="line">                &lt;/dl&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;!-- sku组件 --&gt;</span><br><span class="line"></span><br><span class="line">              &lt;!-- 数据组件 --&gt;</span><br><span class="line"></span><br><span class="line">              &lt;!-- 按钮组件 --&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;el-button size=&quot;large&quot; class=&quot;btn&quot;&gt;</span><br><span class="line">                  加入购物车</span><br><span class="line">                &lt;/el-button&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;goods-footer&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;goods-article&quot;&gt;</span><br><span class="line">              &lt;!-- 商品详情 --&gt;</span><br><span class="line">              &lt;div class=&quot;goods-tabs&quot;&gt;</span><br><span class="line">                &lt;nav&gt;</span><br><span class="line">                  &lt;a&gt;商品详情&lt;/a&gt;</span><br><span class="line">                &lt;/nav&gt;</span><br><span class="line">                &lt;div class=&quot;goods-detail&quot;&gt;</span><br><span class="line">                  &lt;!-- 属性 --&gt;</span><br><span class="line">                  &lt;ul class=&quot;attrs&quot;&gt;</span><br><span class="line">                    &lt;li v-for=&quot;item in goods.details.properties&quot; :key=&quot;item.value&quot;&gt;</span><br><span class="line">                      &lt;span class=&quot;dt&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">                      &lt;span class=&quot;dd&quot;&gt;&#123;&#123; item.value &#125;&#125;&lt;/span&gt;</span><br><span class="line">                    &lt;/li&gt;</span><br><span class="line">                  &lt;/ul&gt;</span><br><span class="line">                  &lt;!-- 图片 --&gt;</span><br><span class="line">                  &lt;img v-for=&quot;img in goods.details.pictures&quot; :src=&quot;img&quot; :key=&quot;img&quot; alt=&quot;&quot;&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- 24热榜+专题推荐 --&gt;</span><br><span class="line">            &lt;div class=&quot;goods-aside&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="热榜区域"><a href="#热榜区域" class="headerlink" title="热榜区域"></a>热榜区域</h2><p><img src="/../pic/image-20230626223232285.png" alt="image-20230626223232285"></p>
<h3 id="1-渲染基础热榜数据"><a href="#1-渲染基础热榜数据" class="headerlink" title="1. 渲染基础热榜数据"></a>1. 渲染基础热榜数据</h3><p>1- 准备模版</p>
<p>src\views\Detail\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-hot&quot;&gt;</span><br><span class="line">    &lt;h3&gt;周日榜单&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 商品区块 --&gt;</span><br><span class="line">    &lt;RouterLink to=&quot;/&quot; class=&quot;goods-item&quot; v-for=&quot;item in 3&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">      &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;p class=&quot;name ellipsis&quot;&gt;一双男鞋&lt;/p&gt;</span><br><span class="line">      &lt;p class=&quot;desc ellipsis&quot;&gt;一双好穿的男鞋&lt;/p&gt;</span><br><span class="line">      &lt;p class=&quot;price&quot;&gt;&amp;yen;200.00&lt;/p&gt;</span><br><span class="line">    &lt;/RouterLink&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-hot &#123;</span><br><span class="line">  h3 &#123;</span><br><span class="line">    height: 70px;</span><br><span class="line">    background: $helpColor;</span><br><span class="line">    color: #fff;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    line-height: 70px;</span><br><span class="line">    padding-left: 25px;</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    font-weight: normal;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods-item &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    padding: 20px 30px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    background: #fff;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: 160px;</span><br><span class="line">      height: 160px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      padding-top: 10px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .name &#123;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .desc &#123;</span><br><span class="line">      color: #999;</span><br><span class="line">      height: 29px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .price &#123;</span><br><span class="line">      color: $priceColor;</span><br><span class="line">      font-size: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>2- 封装接口</p>
<p>src\apis\detail.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取热榜商品</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Number</span>&#125; <span class="variable">id</span> - 商品id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Number</span>&#125; <span class="variable">type</span> - 1代表24小时热销榜 2代表周热销榜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Number</span>&#125; <span class="variable">limit</span> - 获取个数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">fetchHotGoodsAPI</span> = (<span class="params">&#123; id, type, limit = <span class="number">3</span> &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/goods/hot&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>:&#123;</span><br><span class="line">      id, </span><br><span class="line">      type, </span><br><span class="line">      limit</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3- 获取基础数据渲染模版</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; getHotGoodsAPI &#125; from &#x27;@/apis/detail&#x27;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line"></span><br><span class="line">const goodList = ref([])</span><br><span class="line">const route = useRoute()</span><br><span class="line">const getHotList = async () =&gt; &#123;</span><br><span class="line">  const res = await getHotGoodsAPI(&#123;</span><br><span class="line">    id: route.params.id,</span><br><span class="line">    type: 1</span><br><span class="line">  &#125;)</span><br><span class="line">  goodList.value = res.result</span><br><span class="line">&#125;</span><br><span class="line">getHotList()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-hot&quot;&gt;</span><br><span class="line">    &lt;h3&gt; 24小时热榜 &lt;/h3&gt;</span><br><span class="line">    &lt;!-- 商品区块 --&gt;</span><br><span class="line">    &lt;RouterLink :to=&quot;`/detail/$&#123;item.id&#125;`&quot; class=&quot;goods-item&quot; v-for=&quot;item in goodList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">      &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; item.desc &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/RouterLink&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-适配热榜类型"><a href="#2-适配热榜类型" class="headerlink" title="2. 适配热榜类型"></a>2. 适配热榜类型</h3><p>1- 设计props参数type</p>
<p>src\views\Detail\components\DetailHot.vue</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// type适配不同类型热榜数据</span></span><br><span class="line"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Number</span>, <span class="comment">// 1代表24小时热销榜 2代表周热销榜 3代表总热销榜 可以使用type去适配title和数据列表</span></span><br><span class="line">    <span class="attr">default</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetchHotGoodsAPI</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: route.<span class="property">params</span>.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">type</span>: props.<span class="property">type</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>2- 使用组件传入不同的type</p>
<p>src\views\Detail\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 24小时热榜 --&gt;</span><br><span class="line">&lt;DetailHot :type=&quot;1&quot; /&gt;</span><br><span class="line">&lt;!-- 周热榜 --&gt;</span><br><span class="line">&lt;DetailHot :type=&quot;2&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-适配热榜title"><a href="#3-适配热榜title" class="headerlink" title="3. 适配热榜title"></a>3. 适配热榜title</h3><p>src\views\Detail\components\DetailHot.vue</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">TITLEMAP</span> = &#123;</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;24小时热榜&#x27;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&#x27;周热榜&#x27;</span>, </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> title = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> <span class="variable constant_">TITLEMAP</span>[props.<span class="property">type</span>])</span><br></pre></td></tr></table></figure>

<p>在页面中使用</p>
<p>src\views\Detail\components\DetailHot.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-汇总热榜代码"><a href="#4-汇总热榜代码" class="headerlink" title="4.汇总热榜代码"></a>4.汇总热榜代码</h3><p>src\views\Detail\components\DetailHot.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; fetchHotGoodsAPI &#125; from &quot;@/apis/detail&quot;;</span><br><span class="line">import &#123; useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const goodList = ref([]);</span><br><span class="line">const route = useRoute();</span><br><span class="line">// type适配不同类型热榜数据</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  type: &#123;</span><br><span class="line">    type: Number, // 1代表24小时热销榜 2代表周热销榜 3代表总热销榜 可以使用type去适配title和数据列表</span><br><span class="line">    default: 1,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const getHotList = async () =&gt; &#123;</span><br><span class="line">  const res = await fetchHotGoodsAPI(&#123;</span><br><span class="line">    id: route.params.id,</span><br><span class="line">    // 这里传入type类型，是为了传参用来区别周榜和日榜</span><br><span class="line">    type: props.type,</span><br><span class="line">  &#125;);</span><br><span class="line">  goodList.value = res.result;</span><br><span class="line">&#125;;</span><br><span class="line">getHotList();</span><br><span class="line">const TITLEMAP = &#123;</span><br><span class="line">  1: &quot;24小时热榜&quot;,</span><br><span class="line">  2: &quot;周热榜&quot;,</span><br><span class="line">&#125;;</span><br><span class="line">const title = computed(() =&gt; TITLEMAP[props.type]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-hot&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 商品区块 --&gt;</span><br><span class="line">    &lt;RouterLink</span><br><span class="line">      :to=&quot;`/detail/$&#123;item.id&#125;`&quot;</span><br><span class="line">      class=&quot;goods-item&quot;</span><br><span class="line">      v-for=&quot;item in goodList&quot;</span><br><span class="line">      :key=&quot;item.id&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;p class=&quot;name ellipsis&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p class=&quot;desc ellipsis&quot;&gt;&#123;&#123; item.desc &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; item.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/RouterLink&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-hot &#123;</span><br><span class="line">  h3 &#123;</span><br><span class="line">    height: 70px;</span><br><span class="line">    background: $helpColor;</span><br><span class="line">    color: #fff;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    line-height: 70px;</span><br><span class="line">    padding-left: 25px;</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    font-weight: normal;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods-item &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    padding: 20px 30px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    background: #fff;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: 160px;</span><br><span class="line">      height: 160px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      padding-top: 10px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .name &#123;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .desc &#123;</span><br><span class="line">      color: #999;</span><br><span class="line">      height: 29px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .price &#123;</span><br><span class="line">      color: $priceColor;</span><br><span class="line">      font-size: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="图片预览组件封装"><a href="#图片预览组件封装" class="headerlink" title="图片预览组件封装"></a>图片预览组件封装</h2><p><img src="/../pic/image-20230626223459674.png" alt="image-20230626223459674"></p>
<h3 id="1-小图切换大图显示"><a href="#1-小图切换大图显示" class="headerlink" title="1. 小图切换大图显示"></a>1. 小图切换大图显示</h3><p>1- 准备模版</p>
<p>src\components\ImageView.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 图片列表</span><br><span class="line">const imageList = [</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/d917c92e663c5ed0bb577c7ded73e4ec.png&quot;,</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/e801b9572f0b0c02a52952b01adab967.jpg&quot;,</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/b52c447ad472d51adbdde1a83f550ac2.jpg&quot;,</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/f93243224dc37674dfca5874fe089c60.jpg&quot;,</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/f881cfe7de9a576aaeea6ee0d1d24823.jpg&quot;</span><br><span class="line">]</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-image&quot;&gt;</span><br><span class="line">    &lt;!-- 左侧大图--&gt;</span><br><span class="line">    &lt;div class=&quot;middle&quot; ref=&quot;target&quot;&gt;</span><br><span class="line">      &lt;img :src=&quot;imageList[0]&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;!-- 蒙层小滑块 --&gt;</span><br><span class="line">      &lt;div class=&quot;layer&quot; :style=&quot;&#123; left: `0px`, top: `0px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 小图列表 --&gt;</span><br><span class="line">    &lt;ul class=&quot;small&quot;&gt;</span><br><span class="line">      &lt;li v-for=&quot;(img, i) in imageList&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">        &lt;img :src=&quot;img&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 放大镜大图 --&gt;</span><br><span class="line">    &lt;div class=&quot;large&quot; :style=&quot;[</span><br><span class="line">      &#123;</span><br><span class="line">        backgroundImage: `url($&#123;imageList[0]&#125;)`,</span><br><span class="line">        backgroundPositionX: `0px`,</span><br><span class="line">        backgroundPositionY: `0px`,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]&quot; v-show=&quot;false&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-image &#123;</span><br><span class="line">  width: 480px;</span><br><span class="line">  height: 400px;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: flex;</span><br><span class="line"></span><br><span class="line">  .middle &#123;</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    background: #f5f5f5;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .large &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 412px;</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    z-index: 500;</span><br><span class="line">    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);</span><br><span class="line">    background-repeat: no-repeat;</span><br><span class="line">    // 背景图:盒子的大小 = 2:1  将来控制背景图的移动来实现放大的效果查看 background-position</span><br><span class="line">    background-size: 800px 800px;</span><br><span class="line">    background-color: #f8f8f8;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .layer &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">    background: rgba(0, 0, 0, 0.2);</span><br><span class="line">    // 绝对定位 然后跟随咱们鼠标控制left和top属性就可以让滑块移动起来</span><br><span class="line">    left: 0;</span><br><span class="line">    top: 0;</span><br><span class="line">    position: absolute;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .small &#123;</span><br><span class="line">    width: 80px;</span><br><span class="line"></span><br><span class="line">    li &#123;</span><br><span class="line">      width: 68px;</span><br><span class="line">      height: 68px;</span><br><span class="line">      margin-left: 12px;</span><br><span class="line">      margin-bottom: 15px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line"></span><br><span class="line">      &amp;:hover,</span><br><span class="line">      &amp;.active &#123;</span><br><span class="line">        border: 2px solid $xtxColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>2- 实现逻辑</p>
<p>src\components\ImageView.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 实现鼠标移入交互</span><br><span class="line">const curIndex = ref(0)</span><br><span class="line">const mouseEnterFn = (i) =&gt; curIndex.value = i</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-image&quot;&gt;</span><br><span class="line">    &lt;!-- 小图列表 --&gt;</span><br><span class="line">    &lt;ul class=&quot;small&quot;&gt;</span><br><span class="line">      &lt;li v-for=&quot;(img, i) in imageList&quot; </span><br><span class="line">        :key=&quot;i&quot; </span><br><span class="line">        @mouseenter=&quot;mouseEnterFn(i)&quot; </span><br><span class="line">        :class=&quot;&#123; active: i === curIndex &#125;&quot;&gt;</span><br><span class="line">        &lt;img :src=&quot;img&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-放大镜效果实现"><a href="#2-放大镜效果实现" class="headerlink" title="2. 放大镜效果实现"></a>2. 放大镜效果实现</h3><p>功能拆解：</p>
<ol>
<li>左侧滑块跟随鼠标移动（这里用到了vueuese）</li>
<li>右侧大图放大效果实现</li>
<li>鼠标移入控制滑块和大图显示隐藏</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useMouseInElement &#125; from &#x27;@vueuse/core&#x27;</span><br><span class="line"></span><br><span class="line">// 图片列表</span><br><span class="line">const imageList = [</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/d917c92e663c5ed0bb577c7ded73e4ec.png&quot;,</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/e801b9572f0b0c02a52952b01adab967.jpg&quot;,</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/b52c447ad472d51adbdde1a83f550ac2.jpg&quot;,</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/f93243224dc37674dfca5874fe089c60.jpg&quot;,</span><br><span class="line">  &quot;https://yanxuan-item.nosdn.127.net/f881cfe7de9a576aaeea6ee0d1d24823.jpg&quot;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">// 1.小图切换大图显示</span><br><span class="line">const activeIndex = ref(0)</span><br><span class="line"></span><br><span class="line">const enterhandler = (i) =&gt; &#123;</span><br><span class="line">  activeIndex.value = i</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 2. 获取鼠标相对位置</span><br><span class="line">const target = ref(null)</span><br><span class="line">const &#123; elementX, elementY, isOutside &#125; = useMouseInElement(target)</span><br><span class="line"></span><br><span class="line">// 3. 控制滑块跟随鼠标移动（监听elementX/Y变化，一旦变化 重新设置left/top）</span><br><span class="line">const left = ref(0)</span><br><span class="line">const top = ref(0)</span><br><span class="line"></span><br><span class="line">const positionX = ref(0)</span><br><span class="line">const positionY = ref(0)</span><br><span class="line">watch([elementX, elementY, isOutside], () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;xy变化了&#x27;)</span><br><span class="line">  // 如果鼠标没有移入到盒子里面 直接不执行后面的逻辑</span><br><span class="line">  if (isOutside.value) return</span><br><span class="line">  console.log(&#x27;后续逻辑执行了&#x27;)</span><br><span class="line">  // 有效范围内控制滑块距离</span><br><span class="line">  // 横向</span><br><span class="line">  if (elementX.value &gt; 100 &amp;&amp; elementX.value &lt; 300) &#123;</span><br><span class="line">    left.value = elementX.value - 100</span><br><span class="line">  &#125;</span><br><span class="line">  // 纵向</span><br><span class="line">  if (elementY.value &gt; 100 &amp;&amp; elementY.value &lt; 300) &#123;</span><br><span class="line">    top.value = elementY.value - 100</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 处理边界</span><br><span class="line">  if (elementX.value &gt; 300) &#123; left.value = 200 &#125;</span><br><span class="line">  if (elementX.value &lt; 100) &#123; left.value = 0 &#125;</span><br><span class="line"></span><br><span class="line">  if (elementY.value &gt; 300) &#123; top.value = 200 &#125;</span><br><span class="line">  if (elementY.value &lt; 100) &#123; top.value = 0 &#125;</span><br><span class="line"></span><br><span class="line">  // 控制大图的显示</span><br><span class="line">  positionX.value = -left.value * 2</span><br><span class="line">  positionY.value = -top.value * 2</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-image&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 左侧大图--&gt;</span><br><span class="line">    &lt;div class=&quot;middle&quot; ref=&quot;target&quot;&gt;</span><br><span class="line">      &lt;img :src=&quot;imageList[activeIndex]&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;!-- 蒙层小滑块 --&gt;</span><br><span class="line">      &lt;div class=&quot;layer&quot; v-show=&quot;!isOutside&quot; :style=&quot;&#123; left: `$&#123;left&#125;px`, top: `$&#123;top&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 小图列表 --&gt;</span><br><span class="line">    &lt;ul class=&quot;small&quot;&gt;</span><br><span class="line">      &lt;li v-for=&quot;(img, i) in imageList&quot; :key=&quot;i&quot; @mouseenter=&quot;enterhandler(i)&quot; :class=&quot;&#123; active: i === activeIndex &#125;&quot;&gt;</span><br><span class="line">        &lt;img :src=&quot;img&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 放大镜大图 --&gt;</span><br><span class="line">    &lt;div class=&quot;large&quot; :style=&quot;[</span><br><span class="line">      &#123;</span><br><span class="line">        backgroundImage: `url($&#123;imageList[0]&#125;)`,</span><br><span class="line">        backgroundPositionX: `$&#123;positionX&#125;px`,</span><br><span class="line">        backgroundPositionY: `$&#123;positionY&#125;px`,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]&quot; v-show=&quot;!isOutside&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-image &#123;</span><br><span class="line">  width: 480px;</span><br><span class="line">  height: 400px;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: flex;</span><br><span class="line"></span><br><span class="line">  .middle &#123;</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    background: #f5f5f5;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .large &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 412px;</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    z-index: 500;</span><br><span class="line">    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);</span><br><span class="line">    background-repeat: no-repeat;</span><br><span class="line">    // 背景图:盒子的大小 = 2:1  将来控制背景图的移动来实现放大的效果查看 background-position</span><br><span class="line">    background-size: 800px 800px;</span><br><span class="line">    background-color: #f8f8f8;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .layer &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">    background: rgba(0, 0, 0, 0.2);</span><br><span class="line">    // 绝对定位 然后跟随咱们鼠标控制left和top属性就可以让滑块移动起来</span><br><span class="line">    left: 0;</span><br><span class="line">    top: 0;</span><br><span class="line">    position: absolute;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .small &#123;</span><br><span class="line">    width: 80px;</span><br><span class="line"></span><br><span class="line">    li &#123;</span><br><span class="line">      width: 68px;</span><br><span class="line">      height: 68px;</span><br><span class="line">      margin-left: 12px;</span><br><span class="line">      margin-bottom: 15px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line"></span><br><span class="line">      &amp;:hover,</span><br><span class="line">      &amp;.active &#123;</span><br><span class="line">        border: 2px solid $xtxColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="SKU组件熟悉"><a href="#SKU组件熟悉" class="headerlink" title="SKU组件熟悉"></a>SKU组件熟悉</h2><h2 id="全局组件统一插件化"><a href="#全局组件统一插件化" class="headerlink" title="全局组件统一插件化"></a>全局组件统一插件化</h2><p>存货单位，也翻译为库存单元，是一个会计学名词，定义为库存管理中的最小可用单元，例如纺织品中一个SKU通常表示规格、颜色、款式，而在连锁零售门店中有时称单品为一个SKU</p>
<p><img src="/../pic/image-20230627140647608.png" alt="image-20230627140647608"></p>
<h3 id="1-插件化开发"><a href="#1-插件化开发" class="headerlink" title="1. 插件化开发"></a>1. 插件化开发</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 把components中的所组件都进行全局化注册</span></span><br><span class="line"><span class="comment">// 通过插件的方式</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ImageView</span> <span class="keyword">from</span> <span class="string">&#x27;./ImageView/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Sku</span> <span class="keyword">from</span> <span class="string">&#x27;./XtxSku/index.vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> componentPlugin = &#123;</span><br><span class="line">  install (app) &#123;</span><br><span class="line">    <span class="comment">// app.component(&#x27;组件名字&#x27;，组件配置对象)</span></span><br><span class="line">    app.<span class="title function_">component</span>(<span class="string">&#x27;XtxImageView&#x27;</span>, <span class="title class_">ImageView</span>)</span><br><span class="line">    app.<span class="title function_">component</span>(<span class="string">&#x27;XtxSku&#x27;</span>, <span class="title class_">Sku</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-插件注册"><a href="#2-插件注册" class="headerlink" title="2. 插件注册"></a>2. 插件注册</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 引入全局组件插件</span><br><span class="line">import &#123; componentPlugin &#125; from &#x27;@/components&#x27;</span><br><span class="line"></span><br><span class="line">app.use(componentPlugin) </span><br></pre></td></tr></table></figure>

<h1 id="登录页"><a href="#登录页" class="headerlink" title="登录页"></a>登录页</h1><h2 id="整体认识和路由配置-1"><a href="#整体认识和路由配置-1" class="headerlink" title="整体认识和路由配置"></a>整体认识和路由配置</h2><h3 id="1-准备模版-1"><a href="#1-准备模版-1" class="headerlink" title="1. 准备模版"></a>1. 准备模版</h3><p>src\views\Login\index.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;header class=&quot;login-header&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container m-top-20&quot;&gt;</span><br><span class="line">        &lt;h1 class=&quot;logo&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/h1&gt;</span><br><span class="line">        &lt;RouterLink class=&quot;entry&quot; to=&quot;/&quot;&gt;</span><br><span class="line">          进入网站首页</span><br><span class="line">          &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">          &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;/RouterLink&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    &lt;section class=&quot;login-section&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">        &lt;nav&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;账户登录&lt;/a&gt;</span><br><span class="line">        &lt;/nav&gt;</span><br><span class="line">        &lt;div class=&quot;account-box&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;form&quot;&gt;</span><br><span class="line">            &lt;el-form label-position=&quot;right&quot; label-width=&quot;60px&quot;</span><br><span class="line">              status-icon&gt;</span><br><span class="line">              &lt;el-form-item  label=&quot;账户&quot;&gt;</span><br><span class="line">                &lt;el-input/&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label=&quot;密码&quot;&gt;</span><br><span class="line">                &lt;el-input/&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label-width=&quot;22px&quot;&gt;</span><br><span class="line">                &lt;el-checkbox  size=&quot;large&quot;&gt;</span><br><span class="line">                  我已同意隐私条款和服务条款</span><br><span class="line">                &lt;/el-checkbox&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-button size=&quot;large&quot; class=&quot;subBtn&quot;&gt;点击登录&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">    &lt;footer class=&quot;login-footer&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;关于我们&lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;帮助中心&lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;售后服务&lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;配送与验收&lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;商务合作&lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;搜索推荐&lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;javascript:;&quot;&gt;友情链接&lt;/a&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;CopyRight &amp;copy; 小兔鲜儿&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&#x27;scss&#x27;&gt;</span><br><span class="line">.login-header &#123;</span><br><span class="line">  background: #fff;</span><br><span class="line">  border-bottom: 1px solid #e4e4e4;</span><br><span class="line"></span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: flex-end;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .logo &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      display: block;</span><br><span class="line">      height: 132px;</span><br><span class="line">      width: 100%;</span><br><span class="line">      text-indent: -9999px;</span><br><span class="line">      background: url(&quot;@/assets/images/logo.png&quot;) no-repeat center 18px / contain;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .sub &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    font-size: 24px;</span><br><span class="line">    font-weight: normal;</span><br><span class="line">    margin-bottom: 38px;</span><br><span class="line">    margin-left: 20px;</span><br><span class="line">    color: #666;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .entry &#123;</span><br><span class="line">    width: 120px;</span><br><span class="line">    margin-bottom: 38px;</span><br><span class="line">    font-size: 16px;</span><br><span class="line"></span><br><span class="line">    i &#123;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      color: $xtxColor;</span><br><span class="line">      letter-spacing: -5px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.login-section &#123;</span><br><span class="line">  background: url(&#x27;@/assets/images/login-bg.png&#x27;) no-repeat center / cover;</span><br><span class="line">  height: 488px;</span><br><span class="line">  position: relative;</span><br><span class="line"></span><br><span class="line">  .wrapper &#123;</span><br><span class="line">    width: 380px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 50%;</span><br><span class="line">    top: 54px;</span><br><span class="line">    transform: translate3d(100px, 0, 0);</span><br><span class="line">    box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);</span><br><span class="line"></span><br><span class="line">    nav &#123;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      height: 55px;</span><br><span class="line">      margin-bottom: 20px;</span><br><span class="line">      border-bottom: 1px solid #f5f5f5;</span><br><span class="line">      display: flex;</span><br><span class="line">      padding: 0 40px;</span><br><span class="line">      text-align: right;</span><br><span class="line">      align-items: center;</span><br><span class="line"></span><br><span class="line">      a &#123;</span><br><span class="line">        flex: 1;</span><br><span class="line">        line-height: 1;</span><br><span class="line">        display: inline-block;</span><br><span class="line">        font-size: 18px;</span><br><span class="line">        position: relative;</span><br><span class="line">        text-align: center;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.login-footer &#123;</span><br><span class="line">  padding: 30px 0 50px;</span><br><span class="line">  background: #fff;</span><br><span class="line"></span><br><span class="line">  p &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">    color: #999;</span><br><span class="line">    padding-top: 20px;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      line-height: 1;</span><br><span class="line">      padding: 0 10px;</span><br><span class="line">      color: #999;</span><br><span class="line">      display: inline-block;</span><br><span class="line"></span><br><span class="line">      ~a &#123;</span><br><span class="line">        border-left: 1px solid #ccc;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.account-box &#123;</span><br><span class="line">  .toggle &#123;</span><br><span class="line">    padding: 15px 40px;</span><br><span class="line">    text-align: right;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      color: $xtxColor;</span><br><span class="line"></span><br><span class="line">      i &#123;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .form &#123;</span><br><span class="line">    padding: 0 20px 20px 20px;</span><br><span class="line"></span><br><span class="line">    &amp;-item &#123;</span><br><span class="line">      margin-bottom: 28px;</span><br><span class="line"></span><br><span class="line">      .input &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        height: 36px;</span><br><span class="line"></span><br><span class="line">        &gt;i &#123;</span><br><span class="line">          width: 34px;</span><br><span class="line">          height: 34px;</span><br><span class="line">          background: #cfcdcd;</span><br><span class="line">          color: #fff;</span><br><span class="line">          position: absolute;</span><br><span class="line">          left: 1px;</span><br><span class="line">          top: 1px;</span><br><span class="line">          text-align: center;</span><br><span class="line">          line-height: 34px;</span><br><span class="line">          font-size: 18px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        input &#123;</span><br><span class="line">          padding-left: 44px;</span><br><span class="line">          border: 1px solid #cfcdcd;</span><br><span class="line">          height: 36px;</span><br><span class="line">          line-height: 36px;</span><br><span class="line">          width: 100%;</span><br><span class="line"></span><br><span class="line">          &amp;.error &#123;</span><br><span class="line">            border-color: $priceColor;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          &amp;.active,</span><br><span class="line">          &amp;:focus &#123;</span><br><span class="line">            border-color: $xtxColor;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .code &#123;</span><br><span class="line">          position: absolute;</span><br><span class="line">          right: 1px;</span><br><span class="line">          top: 1px;</span><br><span class="line">          text-align: center;</span><br><span class="line">          line-height: 34px;</span><br><span class="line">          font-size: 14px;</span><br><span class="line">          background: #f5f5f5;</span><br><span class="line">          color: #666;</span><br><span class="line">          width: 90px;</span><br><span class="line">          height: 34px;</span><br><span class="line">          cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &gt;.error &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        font-size: 12px;</span><br><span class="line">        line-height: 28px;</span><br><span class="line">        color: $priceColor;</span><br><span class="line"></span><br><span class="line">        i &#123;</span><br><span class="line">          font-size: 14px;</span><br><span class="line">          margin-right: 2px;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .agree &#123;</span><br><span class="line">      a &#123;</span><br><span class="line">        color: #069;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btn &#123;</span><br><span class="line">      display: block;</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 40px;</span><br><span class="line">      color: #fff;</span><br><span class="line">      text-align: center;</span><br><span class="line">      line-height: 40px;</span><br><span class="line">      background: $xtxColor;</span><br><span class="line"></span><br><span class="line">      &amp;.disabled &#123;</span><br><span class="line">        background: #cfcdcd;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .action &#123;</span><br><span class="line">    padding: 20px 40px;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    align-items: center;</span><br><span class="line"></span><br><span class="line">    .url &#123;</span><br><span class="line">      a &#123;</span><br><span class="line">        color: #999;</span><br><span class="line">        margin-left: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.subBtn &#123;</span><br><span class="line">  background: $xtxColor;</span><br><span class="line">  width: 100%;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-配置路由跳转"><a href="#2-配置路由跳转" class="headerlink" title="2. 配置路由跳转"></a>2. 配置路由跳转</h3><p>src\views\Layout\components\LayoutNav.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;li&gt;&lt;a href=&quot;javascript:;&quot; @click=&quot;router.push(&#x27;/login&#x27;)&quot;&gt;请先登录&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<h2 id="表单校验实现"><a href="#表单校验实现" class="headerlink" title="表单校验实现"></a>表单校验实现</h2><p><img src="/../pic/image-20230627144611157.png" alt="image-20230627144611157"></p>
<h3 id="1-校验要求"><a href="#1-校验要求" class="headerlink" title="1. 校验要求"></a>1. 校验要求</h3><blockquote>
<p>用户名：不能为空，字段名为 account<br>密码：不能为空且为6-14个字符，字段名为 password<br>同意协议：必选，字段名为 agree</p>
</blockquote>
<h3 id="2-代码实现"><a href="#2-代码实现" class="headerlink" title="2. 代码实现"></a>2. 代码实现</h3><p><img src="/../pic/image-20230627144757263.png" alt="image-20230627144757263"></p>
<p>这里用到了自定义校验规则</p>
<p><img src="/../pic/image-20230627145321643.png" alt="image-20230627145321643"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">// 表单数据对象</span><br><span class="line">const userInfo = ref(&#123;</span><br><span class="line">  account: &#x27;1311111111&#x27;,</span><br><span class="line">  password: &#x27;123456&#x27;,</span><br><span class="line">  agree: true</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 规则数据对象</span><br><span class="line">const rules = &#123;</span><br><span class="line">  account: [</span><br><span class="line">    &#123; required: true, message: &#x27;用户名不能为空&#x27; &#125;</span><br><span class="line">  ],</span><br><span class="line">  password: [</span><br><span class="line">    &#123; required: true, message: &#x27;密码不能为空&#x27; &#125;,</span><br><span class="line">    &#123; min: 6, max: 24, message: &#x27;密码长度要求6-14个字符&#x27; &#125;</span><br><span class="line">  ],</span><br><span class="line">  agree: [</span><br><span class="line">    &#123;</span><br><span class="line">      validator: (rule, val, callback) =&gt; &#123;</span><br><span class="line">        return val ? callback() : new Error(&#x27;请先同意协议&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;form&quot;&gt;</span><br><span class="line">      &lt;el-form ref=&quot;formRef&quot; :model=&quot;userInfo&quot; :rules=&quot;rules&quot; status-icon&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;account&quot; label=&quot;账户&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;userInfo.account&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;password&quot; label=&quot;密码&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;userInfo.password&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;agree&quot; label-width=&quot;22px&quot;&gt;</span><br><span class="line">          &lt;el-checkbox v-model=&quot;userInfo.agree&quot; size=&quot;large&quot;&gt;</span><br><span class="line">            我已同意隐私条款和服务条款</span><br><span class="line">          &lt;/el-checkbox&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-button size=&quot;large&quot; class=&quot;subBtn&quot; @click=&quot;doLogin&quot;&gt;点击登录&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="登录基础业务实现"><a href="#登录基础业务实现" class="headerlink" title="登录基础业务实现"></a>登录基础业务实现</h2><p><img src="/../pic/image-20230627150412626.png" alt="image-20230627150412626"></p>
<blockquote>
<p>基础思想</p>
<ol>
<li>调用登录接口获取用户信息</li>
<li>提示用户当前是否成功</li>
<li>跳转到首页</li>
</ol>
</blockquote>
<p>封装接口</p>
<p>src\apis\user.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 封装所有和用户相关的接口函数</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;@/utils/http&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">loginAPI</span> = (<span class="params">&#123; account, password &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      account,</span><br><span class="line">      password,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>src\views\Login\index.vue</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;element-plus/theme-chalk/el-message.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; loginAPI &#125; <span class="keyword">from</span> <span class="string">&quot;@/apis/user.js&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doLogin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; account, password &#125; = userInfo.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">// 调用实例方法</span></span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> (valid) =&gt; &#123;</span><br><span class="line">    <span class="comment">// valid: 所有表单都通过校验  才为true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(valid);</span><br><span class="line">    <span class="comment">// 以valid做为判断条件 如果通过校验才执行登录逻辑</span></span><br><span class="line">    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">      <span class="comment">// TODO LOGIN</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">loginAPI</span>(&#123; account, password &#125;);</span><br><span class="line">      <span class="comment">// 这里其实很奇怪，不知道为什么登录出错就不执行这个了</span></span><br><span class="line">      <span class="comment">// 1. 提示用户</span></span><br><span class="line">      <span class="title class_">ElMessage</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;登录成功&quot;</span> &#125;);</span><br><span class="line">      <span class="comment">// 2. 跳转首页</span></span><br><span class="line">      router.<span class="title function_">replace</span>(&#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这里其实我有点不理解，这里如果登录失败就不会执行后面的语句，然后就会执行拦截器里面的语句了</p>
<p>src\utils\http.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// axios响应式拦截器</span></span><br><span class="line">httpInstance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="property">data</span>,</span><br><span class="line">  <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 这里通过拦截器的方式，来发送提示信息，</span></span><br><span class="line">    <span class="comment">// 这个response是拦截到响应码不是200了就会执行这个</span></span><br><span class="line">    <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">      <span class="attr">message</span>: e.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="Pinia管理用户数据"><a href="#Pinia管理用户数据" class="headerlink" title="Pinia管理用户数据"></a>Pinia管理用户数据</h2><blockquote>
<p>基本思想：Pinia负责用户数据相关的state和action，组件中只负责触发action函数并传递参数</p>
</blockquote>
<p>src\stores\user.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 管理用户数据相关</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; loginAPI &#125; <span class="keyword">from</span> <span class="string">&#x27;@/apis/user&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. 定义管理用户数据的state</span></span><br><span class="line">  <span class="keyword">const</span> userInfo = <span class="title function_">ref</span>(&#123;&#125;)</span><br><span class="line">  <span class="comment">// 2. 定义获取接口数据的action函数</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getUserInfo</span> = <span class="keyword">async</span> (<span class="params">&#123; account, password &#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">loginAPI</span>(&#123; account, password &#125;)</span><br><span class="line">    userInfo.<span class="property">value</span> = res.<span class="property">result</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 3. 以对象的格式把state和action return</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getUserInfo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">persist</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用pinia替换原来的api形式</p>
<p>src\views\Login\index.vue</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;element-plus/theme-chalk/el-message.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&quot;@/stores/user.js&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"><span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>();</span><br><span class="line"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doLogin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; account, password &#125; = userInfo.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">// 调用实例方法</span></span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> (valid) =&gt; &#123;</span><br><span class="line">    <span class="comment">// valid: 所有表单都通过校验  才为true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(valid);</span><br><span class="line">    <span class="comment">// 以valid做为判断条件 如果通过校验才执行登录逻辑</span></span><br><span class="line">    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">      <span class="comment">// TODO LOGIN</span></span><br><span class="line">      <span class="keyword">await</span> userStore.<span class="title function_">getUserInfo</span>(&#123; account, password &#125;);</span><br><span class="line">      <span class="comment">// 这里其实很奇怪，不知道为什么登录出错就不执行这个了</span></span><br><span class="line">      <span class="comment">// 1. 提示用户</span></span><br><span class="line">      <span class="title class_">ElMessage</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;登录成功&quot;</span> &#125;);</span><br><span class="line">      <span class="comment">// 2. 跳转首页</span></span><br><span class="line">      router.<span class="title function_">replace</span>(&#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="持久化用户数据"><a href="#持久化用户数据" class="headerlink" title="持久化用户数据"></a>持久化用户数据</h3><p><img src="/../pic/image-20230701193844143.png" alt="image-20230701193844143"></p>
<p>这个pinia的插件也是把token存储到localstorage中。只是更方便一些</p>
<p><img src="/../pic/image-20230701193914896.png" alt="image-20230701193914896"></p>
<p><img src="/../pic/image-20230701194419890.png" alt="image-20230701194419890"></p>
<h2 id="请求拦截器携带token"><a href="#请求拦截器携带token" class="headerlink" title="请求拦截器携带token"></a>请求拦截器携带token</h2><p><img src="/../pic/image-20230701195811256.png" alt="image-20230701195811256"></p>
<blockquote>
<p>基础思想：很多接口如果想要获取数据必须要带着有效的Token信息才可以，拦截器中做一次，用到axios实例的其他都可以拿到</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// axios请求拦截器</span></span><br><span class="line">httpInstance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. 从pinia获取token数据</span></span><br><span class="line">  <span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>()</span><br><span class="line">  <span class="comment">// 2. 按照后端的要求拼接token数据</span></span><br><span class="line">  <span class="keyword">const</span> token = userStore.<span class="property">userInfo</span>.<span class="property">token</span></span><br><span class="line">  <span class="keyword">if</span> (token) &#123;</span><br><span class="line">    config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function"><span class="params">e</span> =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(e))</span><br></pre></td></tr></table></figure>

<h2 id="退出登录实现"><a href="#退出登录实现" class="headerlink" title="退出登录实现"></a>退出登录实现</h2><blockquote>
<p>基础思想：</p>
<ol>
<li>清除用户信息</li>
<li>跳转到登录页</li>
</ol>
</blockquote>
<p>1- 新增清除用户信息action</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 退出时清除用户信息</span></span><br><span class="line"> <span class="keyword">const</span> <span class="title function_">clearUserInfo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">   userInfo.<span class="property">value</span> = &#123;&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>2- 组件中执行业务逻辑</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/stores/userStore&#x27;</span><br><span class="line">import &#123; useRouter &#125; from &#x27;vue-router&#x27;</span><br><span class="line">const userStore = useUserStore()</span><br><span class="line">const router = useRouter()</span><br><span class="line">const confirm = () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;用户要退出登录了&#x27;)</span><br><span class="line">  // 退出登录业务逻辑实现</span><br><span class="line">  // 1.清除用户信息 触发action</span><br><span class="line">  userStore.clearUserInfo()</span><br><span class="line">  // 2.跳转到登录页</span><br><span class="line">  router.push(&#x27;/login&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="购物车"><a href="#购物车" class="headerlink" title="购物车"></a>购物车</h1><p><img src="/../pic/image-20230701202406372.png" alt="image-20230701202406372"></p>
<h2 id="本地购物车"><a href="#本地购物车" class="headerlink" title="本地购物车"></a>本地购物车</h2><h3 id="1-添加购物车"><a href="#1-添加购物车" class="headerlink" title="1. 添加购物车"></a>1. 添加购物车</h3><blockquote>
<p>基础思想：如果已经添加过相同的商品，就在其数量count上加一，如果没有添加过，就直接push到购物车列表中</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 封装购物车模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCartStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;cart&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. 定义state - cartList</span></span><br><span class="line">  <span class="keyword">const</span> cartList = <span class="title function_">ref</span>([])</span><br><span class="line">  <span class="comment">// 2. 定义action - addCart</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addCart</span> = (<span class="params">goods</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;添加&#x27;</span>, goods)</span><br><span class="line">    <span class="comment">// 添加购物车操作</span></span><br><span class="line">    <span class="comment">// 已添加过 - count + 1</span></span><br><span class="line">    <span class="comment">// 没有添加过 - 直接push</span></span><br><span class="line">    <span class="comment">// 思路：通过匹配传递过来的商品对象中的skuId能不能在cartList中找到，找到了就是添加过</span></span><br><span class="line">    <span class="keyword">const</span> item = cartList.<span class="property">value</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> goods.<span class="property">skuId</span> === item.<span class="property">skuId</span>)</span><br><span class="line">    <span class="keyword">if</span> (item) &#123;</span><br><span class="line">      <span class="comment">// 找到了</span></span><br><span class="line">      item.<span class="property">count</span>++</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 没找到</span></span><br><span class="line">      cartList.<span class="property">value</span>.<span class="title function_">push</span>(goods)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    cartList,</span><br><span class="line">    addCart</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">persist</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2-头部购物车"><a href="#2-头部购物车" class="headerlink" title="2. 头部购物车"></a>2. 头部购物车</h3><h4 id="2-1-头部购物车组件模版"><a href="#2-1-头部购物车组件模版" class="headerlink" title="2.1. 头部购物车组件模版"></a>2.1. 头部购物车组件模版</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;cart&quot;&gt;</span><br><span class="line">    &lt;a class=&quot;curr&quot; href=&quot;javascript:;&quot;&gt;</span><br><span class="line">      &lt;i class=&quot;iconfont icon-cart&quot;&gt;&lt;/i&gt;&lt;em&gt;2&lt;/em&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    &lt;div class=&quot;layer&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;list&quot;&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">        &lt;div class=&quot;item&quot; v-for=&quot;i in cartList&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;i.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">            &lt;div class=&quot;center&quot;&gt;</span><br><span class="line">              &lt;p class=&quot;name ellipsis-2&quot;&gt;</span><br><span class="line">                &#123;&#123; i.name &#125;&#125;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;attr ellipsis&quot;&gt;&#123;&#123; i.attrsText &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">              &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;count&quot;&gt;x&#123;&#123; i.count &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/RouterLink&gt;</span><br><span class="line">          &lt;i class=&quot;iconfont icon-close-new&quot; @click=&quot;store.delCart(i.skuId)&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        --&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;foot&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;total&quot;&gt;</span><br><span class="line">          &lt;p&gt;共 10 件商品&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;&amp;yen; 100.00 &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-button size=&quot;large&quot; type=&quot;primary&quot; &gt;去购物车结算&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.cart &#123;</span><br><span class="line">  width: 50px;</span><br><span class="line">  position: relative;</span><br><span class="line">  z-index: 600;</span><br><span class="line"></span><br><span class="line">  .curr &#123;</span><br><span class="line">    height: 32px;</span><br><span class="line">    line-height: 32px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    position: relative;</span><br><span class="line">    display: block;</span><br><span class="line"></span><br><span class="line">    .icon-cart &#123;</span><br><span class="line">      font-size: 22px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    em &#123;</span><br><span class="line">      font-style: normal;</span><br><span class="line">      position: absolute;</span><br><span class="line">      right: 0;</span><br><span class="line">      top: 0;</span><br><span class="line">      padding: 1px 6px;</span><br><span class="line">      line-height: 1;</span><br><span class="line">      background: $helpColor;</span><br><span class="line">      color: #fff;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      border-radius: 10px;</span><br><span class="line">      font-family: Arial;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    .layer &#123;</span><br><span class="line">      opacity: 1;</span><br><span class="line">      transform: none;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .layer &#123;</span><br><span class="line">    opacity: 0;</span><br><span class="line">    transition: all 0.4s 0.2s;</span><br><span class="line">    transform: translateY(-200px) scale(1, 0);</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 50px;</span><br><span class="line">    right: 0;</span><br><span class="line">    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);</span><br><span class="line">    background: #fff;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    padding-top: 10px;</span><br><span class="line"></span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">      content: &quot;&quot;;</span><br><span class="line">      position: absolute;</span><br><span class="line">      right: 14px;</span><br><span class="line">      top: -10px;</span><br><span class="line">      width: 20px;</span><br><span class="line">      height: 20px;</span><br><span class="line">      background: #fff;</span><br><span class="line">      transform: scale(0.6, 1) rotate(45deg);</span><br><span class="line">      box-shadow: -3px -3px 5px rgba(0, 0, 0, 0.1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .foot &#123;</span><br><span class="line">      position: absolute;</span><br><span class="line">      left: 0;</span><br><span class="line">      bottom: 0;</span><br><span class="line">      height: 70px;</span><br><span class="line">      width: 100%;</span><br><span class="line">      padding: 10px;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-between;</span><br><span class="line">      background: #f8f8f8;</span><br><span class="line">      align-items: center;</span><br><span class="line"></span><br><span class="line">      .total &#123;</span><br><span class="line">        padding-left: 10px;</span><br><span class="line">        color: #999;</span><br><span class="line"></span><br><span class="line">        p &#123;</span><br><span class="line">          &amp;:last-child &#123;</span><br><span class="line">            font-size: 18px;</span><br><span class="line">            color: $priceColor;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .list &#123;</span><br><span class="line">    height: 310px;</span><br><span class="line">    overflow: auto;</span><br><span class="line">    padding: 0 10px;</span><br><span class="line"></span><br><span class="line">    &amp;::-webkit-scrollbar &#123;</span><br><span class="line">      width: 10px;</span><br><span class="line">      height: 10px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;::-webkit-scrollbar-track &#123;</span><br><span class="line">      background: #f8f8f8;</span><br><span class="line">      border-radius: 2px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;::-webkit-scrollbar-thumb &#123;</span><br><span class="line">      background: #eee;</span><br><span class="line">      border-radius: 10px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">      background: #ccc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item &#123;</span><br><span class="line">      border-bottom: 1px solid #f5f5f5;</span><br><span class="line">      padding: 10px 0;</span><br><span class="line">      position: relative;</span><br><span class="line"></span><br><span class="line">      i &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        bottom: 38px;</span><br><span class="line">        right: 0;</span><br><span class="line">        opacity: 0;</span><br><span class="line">        color: #666;</span><br><span class="line">        transition: all 0.5s;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        i &#123;</span><br><span class="line">          opacity: 1;</span><br><span class="line">          cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      a &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        align-items: center;</span><br><span class="line"></span><br><span class="line">        img &#123;</span><br><span class="line">          height: 80px;</span><br><span class="line">          width: 80px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .center &#123;</span><br><span class="line">          padding: 0 10px;</span><br><span class="line">          width: 200px;</span><br><span class="line"></span><br><span class="line">          .name &#123;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          .attr &#123;</span><br><span class="line">            color: #999;</span><br><span class="line">            padding-top: 5px;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .right &#123;</span><br><span class="line">          width: 100px;</span><br><span class="line">          padding-right: 20px;</span><br><span class="line">          text-align: center;</span><br><span class="line"></span><br><span class="line">          .price &#123;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">            color: $priceColor;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          .count &#123;</span><br><span class="line">            color: #999;</span><br><span class="line">            margin-top: 5px;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-渲染头部购物车数据"><a href="#2-2-渲染头部购物车数据" class="headerlink" title="2.2 渲染头部购物车数据"></a>2.2 渲染头部购物车数据</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useCartStore &#125; from &#x27;@/stores/cartStore&#x27;</span><br><span class="line">const cartStore = useCartStore()</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;cart&quot;&gt;</span><br><span class="line">    &lt;a class=&quot;curr&quot; href=&quot;javascript:;&quot;&gt;</span><br><span class="line">      &lt;i class=&quot;iconfont icon-cart&quot;&gt;&lt;/i&gt;&lt;em&gt;&#123;&#123; cartStore.cartList.length &#125;&#125;&lt;/em&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    &lt;div class=&quot;layer&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;list&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;item&quot; v-for=&quot;i in cartStore.cartList&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;i.picture&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">            &lt;div class=&quot;center&quot;&gt;</span><br><span class="line">              &lt;p class=&quot;name ellipsis-2&quot;&gt;</span><br><span class="line">                &#123;&#123; i.name &#125;&#125;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;attr ellipsis&quot;&gt;&#123;&#123; i.attrsText &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">              &lt;p class=&quot;price&quot;&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;p class=&quot;count&quot;&gt;x&#123;&#123; i.count &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/RouterLink&gt;</span><br><span class="line">          &lt;i class=&quot;iconfont icon-close-new&quot; @click=&quot;cartStore.delCart(i.skuId)&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;foot&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;total&quot;&gt;</span><br><span class="line">          &lt;p&gt;共 &#123;&#123; cartStore.allCount &#125;&#125; 件商品&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;&amp;yen; &#123;&#123; cartStore.allPrice.toFixed(2) &#125;&#125; &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-button size=&quot;large&quot; type=&quot;primary&quot; @click=&quot;$router.push(&#x27;/cartlist&#x27;)&quot;&gt;去购物车结算&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-删除功能实现"><a href="#2-3-删除功能实现" class="headerlink" title="2.3 删除功能实现"></a>2.3 删除功能实现</h4><p>1- 添加删除action函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 删除购物车</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">delCart</span> = <span class="keyword">async</span> (<span class="params">skuId</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 思路：</span></span><br><span class="line">    <span class="comment">// 1. 找到要删除项的下标值 - splice</span></span><br><span class="line">    <span class="comment">// 2. 使用数组的过滤方法 - filter</span></span><br><span class="line">    <span class="keyword">const</span> idx = cartList.<span class="property">value</span>.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> skuId === item.<span class="property">skuId</span>)</span><br><span class="line">    cartList.<span class="property">value</span>.<span class="title function_">splice</span>(idx, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2- 组件触发action函数并传递参数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;i class=&quot;iconfont icon-close-new&quot; @click=&quot;cartStore.delCart(i.skuId)&quot;&gt;&lt;/i&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-列表购物车-基础内容渲染"><a href="#3-列表购物车-基础内容渲染" class="headerlink" title="3. 列表购物车-基础内容渲染"></a>3. 列表购物车-基础内容渲染</h3><h4 id="3-1-准备模版"><a href="#3-1-准备模版" class="headerlink" title="3.1. 准备模版"></a>3.1. 准备模版</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">const cartList = []</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-cart-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container m-top-20&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;cart&quot;&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">          &lt;thead&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th width=&quot;120&quot;&gt;</span><br><span class="line">                &lt;el-checkbox/&gt;</span><br><span class="line">              &lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;400&quot;&gt;商品信息&lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;220&quot;&gt;单价&lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;180&quot;&gt;数量&lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;180&quot;&gt;小计&lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;140&quot;&gt;操作&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/thead&gt;</span><br><span class="line">          &lt;!-- 商品列表 --&gt;</span><br><span class="line">          &lt;tbody&gt;</span><br><span class="line">            &lt;tr v-for=&quot;i in cartList&quot; :key=&quot;i.id&quot;&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                &lt;el-checkbox /&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                &lt;div class=&quot;goods&quot;&gt;</span><br><span class="line">                  &lt;RouterLink to=&quot;/&quot;&gt;&lt;img :src=&quot;i.picture&quot; alt=&quot;&quot; /&gt;&lt;/RouterLink&gt;</span><br><span class="line">                  &lt;div&gt;</span><br><span class="line">                    &lt;p class=&quot;name ellipsis&quot;&gt;</span><br><span class="line">                      &#123;&#123; i.name &#125;&#125;</span><br><span class="line">                    &lt;/p&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td class=&quot;tc&quot;&gt;</span><br><span class="line">                &lt;p&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td class=&quot;tc&quot;&gt;</span><br><span class="line">                &lt;el-input-number v-model=&quot;i.count&quot; /&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td class=&quot;tc&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;f16 red&quot;&gt;&amp;yen;&#123;&#123; (i.price * i.count).toFixed(2) &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td class=&quot;tc&quot;&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;el-popconfirm title=&quot;确认删除吗?&quot; confirm-button-text=&quot;确认&quot; cancel-button-text=&quot;取消&quot; @confirm=&quot;delCart(i)&quot;&gt;</span><br><span class="line">                    &lt;template #reference&gt;</span><br><span class="line">                      &lt;a href=&quot;javascript:;&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">                    &lt;/template&gt;</span><br><span class="line">                  &lt;/el-popconfirm&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr v-if=&quot;cartList.length === 0&quot;&gt;</span><br><span class="line">              &lt;td colspan=&quot;6&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;cart-none&quot;&gt;</span><br><span class="line">                  &lt;el-empty description=&quot;购物车列表为空&quot;&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot;&gt;随便逛逛&lt;/el-button&gt;</span><br><span class="line">                  &lt;/el-empty&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/tbody&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 操作栏 --&gt;</span><br><span class="line">      &lt;div class=&quot;action&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;batch&quot;&gt;</span><br><span class="line">          共 10 件商品，已选择 2 件，商品合计：</span><br><span class="line">          &lt;span class=&quot;red&quot;&gt;¥ 200.00 &lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;total&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;large&quot; type=&quot;primary&quot; &gt;下单结算&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.xtx-cart-page &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line"></span><br><span class="line">  .cart &#123;</span><br><span class="line">    background: #fff;</span><br><span class="line">    color: #666;</span><br><span class="line"></span><br><span class="line">    table &#123;</span><br><span class="line">      border-spacing: 0;</span><br><span class="line">      border-collapse: collapse;</span><br><span class="line">      line-height: 24px;</span><br><span class="line"></span><br><span class="line">      th,</span><br><span class="line">      td &#123;</span><br><span class="line">        padding: 10px;</span><br><span class="line">        border-bottom: 1px solid #f5f5f5;</span><br><span class="line"></span><br><span class="line">        &amp;:first-child &#123;</span><br><span class="line">          text-align: left;</span><br><span class="line">          padding-left: 30px;</span><br><span class="line">          color: #999;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      th &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        font-weight: normal;</span><br><span class="line">        line-height: 50px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .cart-none &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">    padding: 120px 0;</span><br><span class="line">    background: #fff;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      color: #999;</span><br><span class="line">      padding: 20px 0;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .tc &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      color: $xtxColor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .xtx-numbox &#123;</span><br><span class="line">      margin: 0 auto;</span><br><span class="line">      width: 120px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .red &#123;</span><br><span class="line">    color: $priceColor;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .green &#123;</span><br><span class="line">    color: $xtxColor;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .f16 &#123;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &gt;div &#123;</span><br><span class="line">      width: 280px;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      padding-left: 10px;</span><br><span class="line"></span><br><span class="line">      .attr &#123;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">        color: #999;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .action &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    background: #fff;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    height: 80px;</span><br><span class="line">    align-items: center;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    padding: 0 30px;</span><br><span class="line"></span><br><span class="line">    .xtx-checkbox &#123;</span><br><span class="line">      color: #999;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .batch &#123;</span><br><span class="line">      a &#123;</span><br><span class="line">        margin-left: 20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .red &#123;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      margin-right: 20px;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .tit &#123;</span><br><span class="line">    color: #666;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    font-weight: normal;</span><br><span class="line">    line-height: 50px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-绑定路由"><a href="#3-2-绑定路由" class="headerlink" title="3.2. 绑定路由"></a>3.2. 绑定路由</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">CartList</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/CartList/index.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;cartlist&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">CartList</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-渲染列表"><a href="#3-3-渲染列表" class="headerlink" title="3.3. 渲染列表"></a>3.3. 渲染列表</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useCartStore &#125; from &#x27;@/stores/cartStore&#x27;</span><br><span class="line">const cartStore = useCartStore()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-cart-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container m-top-20&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;cart&quot;&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">          &lt;thead&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th width=&quot;120&quot;&gt;</span><br><span class="line">                &lt;el-checkbox /&gt;</span><br><span class="line">              &lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;400&quot;&gt;商品信息&lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;220&quot;&gt;单价&lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;180&quot;&gt;数量&lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;180&quot;&gt;小计&lt;/th&gt;</span><br><span class="line">              &lt;th width=&quot;140&quot;&gt;操作&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/thead&gt;</span><br><span class="line">          &lt;!-- 商品列表 --&gt;</span><br><span class="line">          &lt;tbody&gt;</span><br><span class="line">            &lt;tr v-for=&quot;i in cartStore.cartList&quot; :key=&quot;i.id&quot;&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                &lt;!-- 单选框 --&gt;</span><br><span class="line">                &lt;el-checkbox/&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                &lt;div class=&quot;goods&quot;&gt;</span><br><span class="line">                  &lt;RouterLink to=&quot;/&quot;&gt;&lt;img :src=&quot;i.picture&quot; alt=&quot;&quot; /&gt;&lt;/RouterLink&gt;</span><br><span class="line">                  &lt;div&gt;</span><br><span class="line">                    &lt;p class=&quot;name ellipsis&quot;&gt;</span><br><span class="line">                      &#123;&#123; i.name &#125;&#125;</span><br><span class="line">                    &lt;/p&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td class=&quot;tc&quot;&gt;</span><br><span class="line">                &lt;p&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td class=&quot;tc&quot;&gt;</span><br><span class="line">                &lt;el-input-number v-model=&quot;i.count&quot; /&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td class=&quot;tc&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;f16 red&quot;&gt;&amp;yen;&#123;&#123; (i.price * i.count).toFixed(2) &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td class=&quot;tc&quot;&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;el-popconfirm title=&quot;确认删除吗?&quot; confirm-button-text=&quot;确认&quot; cancel-button-text=&quot;取消&quot; @confirm=&quot;delCart(i)&quot;&gt;</span><br><span class="line">                    &lt;template #reference&gt;</span><br><span class="line">                      &lt;a href=&quot;javascript:;&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">                    &lt;/template&gt;</span><br><span class="line">                  &lt;/el-popconfirm&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr v-if=&quot;cartStore.cartList.length === 0&quot;&gt;</span><br><span class="line">              &lt;td colspan=&quot;6&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;cart-none&quot;&gt;</span><br><span class="line">                  &lt;el-empty description=&quot;购物车列表为空&quot;&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot;&gt;随便逛逛&lt;/el-button&gt;</span><br><span class="line">                  &lt;/el-empty&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/tbody&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 操作栏 --&gt;</span><br><span class="line">      &lt;div class=&quot;action&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;batch&quot;&gt;</span><br><span class="line">          共 10 件商品，已选择 2 件，商品合计：</span><br><span class="line">          &lt;span class=&quot;red&quot;&gt;¥ 200.00 &lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;total&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;large&quot; type=&quot;primary&quot; &gt;下单结算&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-列表购物车-单选功能实现"><a href="#4-列表购物车-单选功能实现" class="headerlink" title="4. 列表购物车-单选功能实现"></a>4. 列表购物车-单选功能实现</h3><blockquote>
<p>基本思想：通过skuId找到要进行单选操作的商品，把控制是否选中的selected字段修改为当前单选框的状态</p>
</blockquote>
<p>1- 添加单选action</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单选功能</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">singleCheck</span> = (<span class="params">skuId, selected</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 通过skuId找到要修改的那一项 然后把它的selected修改为传过来的selected</span></span><br><span class="line">  <span class="keyword">const</span> item = cartList.<span class="property">value</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">skuId</span> === skuId)</span><br><span class="line">  item.<span class="property">selected</span> = selected</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2- 触发action函数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 单选回调</span><br><span class="line">const singleCheck = (i, selected) =&gt; &#123;</span><br><span class="line">  console.log(i, selected)</span><br><span class="line">  // store cartList 数组 无法知道要修改谁的选中状态？</span><br><span class="line">  // 除了selected补充一个用来筛选的参数 - skuId</span><br><span class="line">  cartStore.singleCheck(i.skuId, selected)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;td&gt;</span><br><span class="line">    &lt;!-- 单选框 --&gt;</span><br><span class="line">    &lt;el-checkbox :model-value=&quot;i.selected&quot; @change=&quot;(selected) =&gt; singleCheck(i, selected)&quot; /&gt;</span><br><span class="line">  &lt;/td&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-列表购物车-全选功能实现"><a href="#5-列表购物车-全选功能实现" class="headerlink" title="5. 列表购物车-全选功能实现"></a>5. 列表购物车-全选功能实现</h3><blockquote>
<p>基础思想：</p>
<ol>
<li>全选状态决定单选框状态 - 遍历cartList把每一项的selected都设置为何全选框状态一致</li>
<li>单选框状态决定全选状态 - 只有所有单选框的selected都为true, 全选框才为true</li>
</ol>
</blockquote>
<p>1- store中定义action和计算属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全选功能action</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">allCheck</span> = (<span class="params">selected</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 把cartList中的每一项的selected都设置为当前的全选框状态</span></span><br><span class="line">  cartList.<span class="property">value</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">selected</span> = selected)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否全选计算属性</span></span><br><span class="line"><span class="keyword">const</span> isAll = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> cartList.<span class="property">value</span>.<span class="title function_">every</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">selected</span>))</span><br></pre></td></tr></table></figure>

<p>2- 组件中触发aciton和使用计算属性</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">const allCheck = (selected) =&gt; &#123;</span><br><span class="line">  cartStore.allCheck(selected)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 全选框 --&gt;</span><br><span class="line">  &lt;el-checkbox :model-value=&quot;cartStore.isAll&quot; @change=&quot;allCheck&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-列表购物车-统计数据功能实现"><a href="#6-列表购物车-统计数据功能实现" class="headerlink" title="6. 列表购物车-统计数据功能实现"></a>6. 列表购物车-统计数据功能实现</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 3. 已选择数量</span></span><br><span class="line"><span class="keyword">const</span> selectedCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> cartList.<span class="property">value</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">selected</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, c</span>) =&gt;</span> a + c.<span class="property">count</span>, <span class="number">0</span>))</span><br><span class="line"><span class="comment">// 4. 已选择商品价钱合计</span></span><br><span class="line"><span class="keyword">const</span> selectedPrice = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> cartList.<span class="property">value</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">selected</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, c</span>) =&gt;</span> a + c.<span class="property">count</span> * c.<span class="property">price</span>, <span class="number">0</span>))</span><br></pre></td></tr></table></figure>

<h2 id="接口购物车"><a href="#接口购物车" class="headerlink" title="接口购物车"></a>接口购物车</h2><h4 id="1-加入购物车"><a href="#1-加入购物车" class="headerlink" title="1. 加入购物车"></a>1. 加入购物车</h4><p>1-接口封装</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加入购物车</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">insertCartAPI</span> = (<span class="params">&#123; skuId, count &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/member/cart&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      skuId,</span><br><span class="line">      count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2- action中适配登录和非登录</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&#x27;./userStore&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; insertCartAPI &#125; <span class="keyword">from</span> <span class="string">&#x27;@/apis/cart&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCartStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;cart&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>()</span><br><span class="line">  <span class="keyword">const</span> isLogin = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> userStore.<span class="property">userInfo</span>.<span class="property">token</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addCart</span> = <span class="keyword">async</span> (<span class="params">goods</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; skuId, count &#125; = goods</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    <span class="keyword">if</span> (isLogin.<span class="property">value</span>) &#123;</span><br><span class="line">      <span class="comment">// 登录之后的加入购车逻辑</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">insertCartAPI</span>(&#123; skuId, count &#125;)</span><br><span class="line">      <span class="title function_">updateNewList</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 未登录</span></span><br><span class="line">      <span class="keyword">const</span> item = cartList.<span class="property">value</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> goods.<span class="property">skuId</span> === item.<span class="property">skuId</span>)</span><br><span class="line">      <span class="keyword">if</span> (item) &#123;</span><br><span class="line">        <span class="comment">// 找到了</span></span><br><span class="line">        item.<span class="property">count</span>++</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 没找到</span></span><br><span class="line">        cartList.<span class="property">value</span>.<span class="title function_">push</span>(goods)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">persist</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-删除购物车"><a href="#2-删除购物车" class="headerlink" title="2. 删除购物车"></a>2. 删除购物车</h4><p>1- 封装接口</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 删除购物车</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">delCartAPI</span> = (<span class="params">ids</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/member/cart&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;DELETE&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      ids</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2- action中适配登录和非登录</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 删除购物车</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">delCart</span> = <span class="keyword">async</span> (<span class="params">skuId</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (isLogin.<span class="property">value</span>) &#123;</span><br><span class="line">    <span class="comment">// 调用接口实现接口购物车中的删除功能</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">delCartAPI</span>([skuId])</span><br><span class="line">    <span class="title function_">updateNewList</span>()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 思路：</span></span><br><span class="line">    <span class="comment">// 1. 找到要删除项的下标值 - splice</span></span><br><span class="line">    <span class="comment">// 2. 使用数组的过滤方法 - filter</span></span><br><span class="line">    <span class="keyword">const</span> idx = cartList.<span class="property">value</span>.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> skuId === item.<span class="property">skuId</span>)</span><br><span class="line">    cartList.<span class="property">value</span>.<span class="title function_">splice</span>(idx, <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="订单页"><a href="#订单页" class="headerlink" title="订单页"></a>订单页</h1><h2 id="路由配置和基础数据渲染"><a href="#路由配置和基础数据渲染" class="headerlink" title="路由配置和基础数据渲染"></a>路由配置和基础数据渲染</h2><h3 id="1-准备组件模版-2"><a href="#1-准备组件模版-2" class="headerlink" title="1. 准备组件模版"></a>1. 准备组件模版</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">const checkInfo = &#123;&#125;  // 订单对象</span><br><span class="line">const curAddress = &#123;&#125;  // 地址对象</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-pay-checkout-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">        &lt;!-- 收货地址 --&gt;</span><br><span class="line">        &lt;h3 class=&quot;box-title&quot;&gt;收货地址&lt;/h3&gt;</span><br><span class="line">        &lt;div class=&quot;box-body&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;address&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;text&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;none&quot; v-if=&quot;!curAddress&quot;&gt;您需要先添加收货地址才可提交订单。&lt;/div&gt;</span><br><span class="line">              &lt;ul v-else&gt;</span><br><span class="line">                &lt;li&gt;&lt;span&gt;收&lt;i /&gt;货&lt;i /&gt;人：&lt;/span&gt;&#123;&#123; curAddress.receiver &#125;&#125;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;span&gt;联系方式：&lt;/span&gt;&#123;&#123; curAddress.contact &#125;&#125;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;span&gt;收货地址：&lt;/span&gt;&#123;&#123; curAddress.fullLocation &#125;&#125; &#123;&#123; curAddress.address &#125;&#125;&lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;action&quot;&gt;</span><br><span class="line">              &lt;el-button size=&quot;large&quot; @click=&quot;toggleFlag = true&quot;&gt;切换地址&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button size=&quot;large&quot; @click=&quot;addFlag = true&quot;&gt;添加地址&lt;/el-button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 商品信息 --&gt;</span><br><span class="line">        &lt;h3 class=&quot;box-title&quot;&gt;商品信息&lt;/h3&gt;</span><br><span class="line">        &lt;div class=&quot;box-body&quot;&gt;</span><br><span class="line">          &lt;table class=&quot;goods&quot;&gt;</span><br><span class="line">            &lt;thead&gt;</span><br><span class="line">              &lt;tr&gt;</span><br><span class="line">                &lt;th width=&quot;520&quot;&gt;商品信息&lt;/th&gt;</span><br><span class="line">                &lt;th width=&quot;170&quot;&gt;单价&lt;/th&gt;</span><br><span class="line">                &lt;th width=&quot;170&quot;&gt;数量&lt;/th&gt;</span><br><span class="line">                &lt;th width=&quot;170&quot;&gt;小计&lt;/th&gt;</span><br><span class="line">                &lt;th width=&quot;170&quot;&gt;实付&lt;/th&gt;</span><br><span class="line">              &lt;/tr&gt;</span><br><span class="line">            &lt;/thead&gt;</span><br><span class="line">            &lt;tbody&gt;</span><br><span class="line">              &lt;tr v-for=&quot;i in checkInfo.goods&quot; :key=&quot;i.id&quot;&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                  &lt;a href=&quot;javascript:;&quot; class=&quot;info&quot;&gt;</span><br><span class="line">                    &lt;img :src=&quot;i.picture&quot; alt=&quot;&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">                      &lt;p&gt;&#123;&#123; i.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">                      &lt;p&gt;&#123;&#123; i.attrsText &#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/a&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&amp;yen;&#123;&#123; i.price &#125;&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123; i.price &#125;&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&amp;yen;&#123;&#123; i.totalPrice &#125;&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&amp;yen;&#123;&#123; i.totalPayPrice &#125;&#125;&lt;/td&gt;</span><br><span class="line">              &lt;/tr&gt;</span><br><span class="line">            &lt;/tbody&gt;</span><br><span class="line">          &lt;/table&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 配送时间 --&gt;</span><br><span class="line">        &lt;h3 class=&quot;box-title&quot;&gt;配送时间&lt;/h3&gt;</span><br><span class="line">        &lt;div class=&quot;box-body&quot;&gt;</span><br><span class="line">          &lt;a class=&quot;my-btn active&quot; href=&quot;javascript:;&quot;&gt;不限送货时间：周一至周日&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;工作日送货：周一至周五&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;双休日、假日送货：周六至周日&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 支付方式 --&gt;</span><br><span class="line">        &lt;h3 class=&quot;box-title&quot;&gt;支付方式&lt;/h3&gt;</span><br><span class="line">        &lt;div class=&quot;box-body&quot;&gt;</span><br><span class="line">          &lt;a class=&quot;my-btn active&quot; href=&quot;javascript:;&quot;&gt;在线支付&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;my-btn&quot; href=&quot;javascript:;&quot;&gt;货到付款&lt;/a&gt;</span><br><span class="line">          &lt;span style=&quot;color:#999&quot;&gt;货到付款需付5元手续费&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 金额明细 --&gt;</span><br><span class="line">        &lt;h3 class=&quot;box-title&quot;&gt;金额明细&lt;/h3&gt;</span><br><span class="line">        &lt;div class=&quot;box-body&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;total&quot;&gt;</span><br><span class="line">            &lt;dl&gt;</span><br><span class="line">              &lt;dt&gt;商品件数：&lt;/dt&gt;</span><br><span class="line">              &lt;dd&gt;&#123;&#123; checkInfo.summary?.goodsCount &#125;&#125;件&lt;/dd&gt;</span><br><span class="line">            &lt;/dl&gt;</span><br><span class="line">            &lt;dl&gt;</span><br><span class="line">              &lt;dt&gt;商品总价：&lt;/dt&gt;</span><br><span class="line">              &lt;dd&gt;¥&#123;&#123; checkInfo.summary?.totalPrice.toFixed(2) &#125;&#125;&lt;/dd&gt;</span><br><span class="line">            &lt;/dl&gt;</span><br><span class="line">            &lt;dl&gt;</span><br><span class="line">              &lt;dt&gt;运&lt;i&gt;&lt;/i&gt;费：&lt;/dt&gt;</span><br><span class="line">              &lt;dd&gt;¥&#123;&#123; checkInfo.summary?.postFee.toFixed(2) &#125;&#125;&lt;/dd&gt;</span><br><span class="line">            &lt;/dl&gt;</span><br><span class="line">            &lt;dl&gt;</span><br><span class="line">              &lt;dt&gt;应付总额：&lt;/dt&gt;</span><br><span class="line">              &lt;dd class=&quot;price&quot;&gt;&#123;&#123; checkInfo.summary?.totalPayPrice.toFixed(2) &#125;&#125;&lt;/dd&gt;</span><br><span class="line">            &lt;/dl&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 提交订单 --&gt;</span><br><span class="line">        &lt;div class=&quot;submit&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; size=&quot;large&quot; &gt;提交订单&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;!-- 切换地址 --&gt;</span><br><span class="line">  &lt;!-- 添加地址 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.xtx-pay-checkout-page &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line"></span><br><span class="line">  .wrapper &#123;</span><br><span class="line">    background: #fff;</span><br><span class="line">    padding: 0 20px;</span><br><span class="line"></span><br><span class="line">    .box-title &#123;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      font-weight: normal;</span><br><span class="line">      padding-left: 10px;</span><br><span class="line">      line-height: 70px;</span><br><span class="line">      border-bottom: 1px solid #f5f5f5;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .box-body &#123;</span><br><span class="line">      padding: 20px 0;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address &#123;</span><br><span class="line">  border: 1px solid #f5f5f5;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line"></span><br><span class="line">  .text &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    min-height: 90px;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line"></span><br><span class="line">    .none &#123;</span><br><span class="line">      line-height: 90px;</span><br><span class="line">      color: #999;</span><br><span class="line">      text-align: center;</span><br><span class="line">      width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &gt;ul &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      padding: 20px;</span><br><span class="line"></span><br><span class="line">      li &#123;</span><br><span class="line">        line-height: 30px;</span><br><span class="line"></span><br><span class="line">        span &#123;</span><br><span class="line">          color: #999;</span><br><span class="line">          margin-right: 5px;</span><br><span class="line"></span><br><span class="line">          &gt;i &#123;</span><br><span class="line">            width: 0.5em;</span><br><span class="line">            display: inline-block;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &gt;a &#123;</span><br><span class="line">      color: $xtxColor;</span><br><span class="line">      width: 160px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      height: 90px;</span><br><span class="line">      line-height: 90px;</span><br><span class="line">      border-right: 1px solid #f5f5f5;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .action &#123;</span><br><span class="line">    width: 420px;</span><br><span class="line">    text-align: center;</span><br><span class="line"></span><br><span class="line">    .btn &#123;</span><br><span class="line">      width: 140px;</span><br><span class="line">      height: 46px;</span><br><span class="line">      line-height: 44px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line"></span><br><span class="line">      &amp;:first-child &#123;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.goods &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  border-collapse: collapse;</span><br><span class="line">  border-spacing: 0;</span><br><span class="line"></span><br><span class="line">  .info &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    text-align: left;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: 70px;</span><br><span class="line">      height: 70px;</span><br><span class="line">      margin-right: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .right &#123;</span><br><span class="line">      line-height: 24px;</span><br><span class="line"></span><br><span class="line">      p &#123;</span><br><span class="line">        &amp;:last-child &#123;</span><br><span class="line">          color: #999;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  tr &#123;</span><br><span class="line">    th &#123;</span><br><span class="line">      background: #f5f5f5;</span><br><span class="line">      font-weight: normal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    td,</span><br><span class="line">    th &#123;</span><br><span class="line">      text-align: center;</span><br><span class="line">      padding: 20px;</span><br><span class="line">      border-bottom: 1px solid #f5f5f5;</span><br><span class="line"></span><br><span class="line">      &amp;:first-child &#123;</span><br><span class="line">        border-left: 1px solid #f5f5f5;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-child &#123;</span><br><span class="line">        border-right: 1px solid #f5f5f5;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my-btn &#123;</span><br><span class="line">  width: 228px;</span><br><span class="line">  height: 50px;</span><br><span class="line">  border: 1px solid #e4e4e4;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 48px;</span><br><span class="line">  margin-right: 25px;</span><br><span class="line">  color: #666666;</span><br><span class="line">  display: inline-block;</span><br><span class="line"></span><br><span class="line">  &amp;.active,</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    border-color: $xtxColor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.total &#123;</span><br><span class="line">  dl &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: flex-end;</span><br><span class="line">    line-height: 50px;</span><br><span class="line"></span><br><span class="line">    dt &#123;</span><br><span class="line">      i &#123;</span><br><span class="line">        display: inline-block;</span><br><span class="line">        width: 2em;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dd &#123;</span><br><span class="line">      width: 240px;</span><br><span class="line">      text-align: right;</span><br><span class="line">      padding-right: 70px;</span><br><span class="line"></span><br><span class="line">      &amp;.price &#123;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">        color: $priceColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.submit &#123;</span><br><span class="line">  text-align: right;</span><br><span class="line">  padding: 60px;</span><br><span class="line">  border-top: 1px solid #f5f5f5;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.addressWrapper &#123;</span><br><span class="line">  max-height: 500px;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.text &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  min-height: 90px;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line"></span><br><span class="line">  &amp;.item &#123;</span><br><span class="line">    border: 1px solid #f5f5f5;</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    cursor: pointer;</span><br><span class="line"></span><br><span class="line">    &amp;.active,</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      border-color: $xtxColor;</span><br><span class="line">      background: lighten($xtxColor, 50%);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &gt;ul &#123;</span><br><span class="line">      padding: 10px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      line-height: 30px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-配置路由-2"><a href="#2-配置路由-2" class="headerlink" title="2. 配置路由"></a>2. 配置路由</h3><h3 id="3-封装接口"><a href="#3-封装接口" class="headerlink" title="3. 封装接口"></a>3. 封装接口</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取结算信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getCheckoutInfoAPI</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/member/order/pre&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-渲染数据"><a href="#4-渲染数据" class="headerlink" title="4. 渲染数据"></a>4. 渲染数据</h3><h2 id="切换地址-打开弹框交互"><a href="#切换地址-打开弹框交互" class="headerlink" title="切换地址-打开弹框交互"></a>切换地址-打开弹框交互</h2><h3 id="1-准备弹框模版"><a href="#1-准备弹框模版" class="headerlink" title="1. 准备弹框模版"></a>1. 准备弹框模版</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;切换收货地址&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span> <span class="attr">center</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;addressWrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in checkInfo.userAddresses&quot;</span>  <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>收<span class="tag">&lt;<span class="name">i</span> /&gt;</span>货<span class="tag">&lt;<span class="name">i</span> /&gt;</span>人：<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#123;&#123; item.receiver &#125;&#125; <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>联系方式：<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#123;&#123; item.contact &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>收货地址：<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#123;&#123; item.fullLocation + item.address &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-控制弹框打开"><a href="#2-控制弹框打开" class="headerlink" title="2. 控制弹框打开"></a>2. 控制弹框打开</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const showDialog = ref(false)</span><br><span class="line"></span><br><span class="line">&lt;el-button size=&quot;large&quot; @click=&quot;showDialog = true&quot;&gt;切换地址&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">&lt;el-dialog v-model=&quot;showDialog&quot; title=&quot;切换收货地址&quot; width=&quot;30%&quot; center&gt;</span><br><span class="line">    &lt;!-- 省略 --&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>

<h2 id="切换地址-地址切换交互"><a href="#切换地址-地址切换交互" class="headerlink" title="切换地址-地址切换交互"></a>切换地址-地址切换交互</h2><blockquote>
<p>基础思想：记录当前点击项，通过动态class判断当前div是否有激活类名</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 切换地址</span><br><span class="line">const activeAddress = ref(&#123;&#125;)</span><br><span class="line">const switchAddress = (item) =&gt; &#123;</span><br><span class="line">  activeAddress.value = item</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;text item&quot; </span><br><span class="line">  :class=&quot;&#123; active: activeAddress.id === item.id &#125;&quot; </span><br><span class="line">  @click=&quot;switchAddress(item)&quot;</span><br><span class="line">  :key=&quot;item.id&quot;&gt;</span><br><span class="line">  &lt;!-- 省略... --&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="创建订单生成订单ID"><a href="#创建订单生成订单ID" class="headerlink" title="创建订单生成订单ID"></a>创建订单生成订单ID</h2><h3 id="1-准备支付页组件并绑定路由"><a href="#1-准备支付页组件并绑定路由" class="headerlink" title="1. 准备支付页组件并绑定路由"></a>1. 准备支付页组件并绑定路由</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">const payInfo = &#123;&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-pay-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 付款信息 --&gt;</span><br><span class="line">      &lt;div class=&quot;pay-info&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;icon iconfont icon-queren2&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;div class=&quot;tip&quot;&gt;</span><br><span class="line">          &lt;p&gt;订单提交成功！请尽快完成支付。&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;支付还剩 &lt;span&gt;24分30秒&lt;/span&gt;, 超时后将取消订单&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;amount&quot;&gt;</span><br><span class="line">          &lt;span&gt;应付总额：&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;¥&#123;&#123; payInfo.payMoney?.toFixed(2) &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 付款方式 --&gt;</span><br><span class="line">      &lt;div class=&quot;pay-type&quot;&gt;</span><br><span class="line">        &lt;p class=&quot;head&quot;&gt;选择以下支付方式付款&lt;/p&gt;</span><br><span class="line">        &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">          &lt;p&gt;支付平台&lt;/p&gt;</span><br><span class="line">          &lt;a class=&quot;btn wx&quot; href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn alipay&quot; :href=&quot;payUrl&quot;&gt;&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">          &lt;p&gt;支付方式&lt;/p&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;招商银行&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;工商银行&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;建设银行&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;农业银行&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;交通银行&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.xtx-pay-page &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pay-info &#123;</span><br><span class="line"></span><br><span class="line">  background: #fff;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line">  height: 240px;</span><br><span class="line">  padding: 0 80px;</span><br><span class="line"></span><br><span class="line">  .icon &#123;</span><br><span class="line">    font-size: 80px;</span><br><span class="line">    color: #1dc779;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .tip &#123;</span><br><span class="line">    padding-left: 10px;</span><br><span class="line">    flex: 1;</span><br><span class="line"></span><br><span class="line">    p &#123;</span><br><span class="line">      &amp;:first-child &#123;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">        margin-bottom: 5px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-child &#123;</span><br><span class="line">        color: #999;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .amount &#123;</span><br><span class="line">    span &#123;</span><br><span class="line">      &amp;:first-child &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #999;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:last-child &#123;</span><br><span class="line">        color: $priceColor;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pay-type &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  padding-bottom: 70px;</span><br><span class="line"></span><br><span class="line">  p &#123;</span><br><span class="line">    line-height: 70px;</span><br><span class="line">    height: 70px;</span><br><span class="line">    padding-left: 30px;</span><br><span class="line">    font-size: 16px;</span><br><span class="line"></span><br><span class="line">    &amp;.head &#123;</span><br><span class="line">      border-bottom: 1px solid #f5f5f5;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .btn &#123;</span><br><span class="line">    width: 150px;</span><br><span class="line">    height: 50px;</span><br><span class="line">    border: 1px solid #e4e4e4;</span><br><span class="line">    text-align: center;</span><br><span class="line">    line-height: 48px;</span><br><span class="line">    margin-left: 30px;</span><br><span class="line">    color: #666666;</span><br><span class="line">    display: inline-block;</span><br><span class="line"></span><br><span class="line">    &amp;.active,</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      border-color: $xtxColor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;.alipay &#123;</span><br><span class="line">      background: url(https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/7b6b02396368c9314528c0bbd85a2e06.png) no-repeat center / contain;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;.wx &#123;</span><br><span class="line">      background: url(https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c66f98cff8649bd5ba722c2e8067c6ca.jpg) no-repeat center / contain;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-准备生成订单接口"><a href="#2-准备生成订单接口" class="headerlink" title="2. 准备生成订单接口"></a>2. 准备生成订单接口</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建订单</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">createOrderAPI</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/member/order&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-调用接口携带id跳转路由"><a href="#3-调用接口携带id跳转路由" class="headerlink" title="3. 调用接口携带id跳转路由"></a>3. 调用接口携带id跳转路由</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; createOrderAPI &#125; from &#x27;@/apis/checkout&#x27;</span><br><span class="line"></span><br><span class="line">// 创建订单</span><br><span class="line">const createOrder = async () =&gt; &#123;</span><br><span class="line">  const res = await createOrderAPI(&#123;</span><br><span class="line">    deliveryTimeType: 1,</span><br><span class="line">    payType: 1,</span><br><span class="line">    payChannel: 1,</span><br><span class="line">    buyerMessage: &#x27;&#x27;,</span><br><span class="line">    goods: checkInfo.value.goods.map(item =&gt; &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        skuId: item.skuId,</span><br><span class="line">        count: item.count</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    addressId: curAddress.value.id</span><br><span class="line">  &#125;)</span><br><span class="line">  const orderId = res.result.id</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    path: &#x27;/pay&#x27;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      id: orderId</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- 提交订单 --&gt;</span><br><span class="line">    &lt;div class=&quot;submit&quot;&gt;</span><br><span class="line">      &lt;el-button @click=&quot;createOrder&quot; type=&quot;primary&quot; size=&quot;large&quot;&gt;提交订单&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h1 id="支付页"><a href="#支付页" class="headerlink" title="支付页"></a>支付页</h1><h1 id=""><a href="#" class="headerlink" title=""></a><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/1677761581263-68132341-71bc-44ad-87f1-a6f312237313.png" alt="image.png"></h1><h2 id="基础数据渲染"><a href="#基础数据渲染" class="headerlink" title="基础数据渲染"></a>基础数据渲染</h2><h3 id="1-准备接口-2"><a href="#1-准备接口-2" class="headerlink" title="1. 准备接口"></a>1. 准备接口</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/http&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getOrderAPI</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/member/order/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-获取数据渲染内容"><a href="#2-获取数据渲染内容" class="headerlink" title="2. 获取数据渲染内容"></a>2. 获取数据渲染内容</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; getOrderAPI &#125; from &#x27;@/apis/pay&#x27;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line">// 获取订单数据</span><br><span class="line">const route = useRoute()</span><br><span class="line">const payInfo = ref(&#123;&#125;)</span><br><span class="line">const getPayInfo = async () =&gt; &#123;</span><br><span class="line">  const res = await getOrderAPI(route.query.id)</span><br><span class="line">  payInfo.value = res.result</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; getPayInfo())</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-pay-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 付款信息 --&gt;</span><br><span class="line">      &lt;div class=&quot;pay-info&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;icon iconfont icon-queren2&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;div class=&quot;tip&quot;&gt;</span><br><span class="line">          &lt;p&gt;订单提交成功！请尽快完成支付。&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;支付还剩 &lt;span&gt;&#123;&#123; formatTime &#125;&#125;&lt;/span&gt;, 超时后将取消订单&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;amount&quot;&gt;</span><br><span class="line">          &lt;span&gt;应付总额：&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;¥&#123;&#123; payInfo.payMoney?.toFixed(2) &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 付款方式 --&gt;</span><br><span class="line">      &lt;div class=&quot;pay-type&quot;&gt;</span><br><span class="line">        &lt;p class=&quot;head&quot;&gt;选择以下支付方式付款&lt;/p&gt;</span><br><span class="line">        &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">          &lt;p&gt;支付平台&lt;/p&gt;</span><br><span class="line">          &lt;a class=&quot;btn wx&quot; href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn alipay&quot; :href=&quot;payUrl&quot;&gt;&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">          &lt;p&gt;支付方式&lt;/p&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;招商银行&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;工商银行&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;建设银行&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;农业银行&lt;/a&gt;</span><br><span class="line">          &lt;a class=&quot;btn&quot; href=&quot;javascript:;&quot;&gt;交通银行&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="支付功能实现"><a href="#支付功能实现" class="headerlink" title="支付功能实现"></a>支付功能实现</h2><p><img src="/../pic/image-20230702140123956.png" alt="image-20230702140123956"></p>
<h3 id="1-支付携带参数"><a href="#1-支付携带参数" class="headerlink" title="1. 支付携带参数"></a>1. 支付携带参数</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 支付地址</span></span><br><span class="line"><span class="keyword">const</span> baseURL = <span class="string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net/&#x27;</span></span><br><span class="line"><span class="keyword">const</span> backURL = <span class="string">&#x27;http://127.0.0.1:5173/paycallback&#x27;</span></span><br><span class="line"><span class="keyword">const</span> redirectUrl = <span class="built_in">encodeURIComponent</span>(backURL)</span><br><span class="line"><span class="keyword">const</span> payUrl = <span class="string">`<span class="subst">$&#123;baseURL&#125;</span>pay/aliPay?orderId=<span class="subst">$&#123;route.query.id&#125;</span>&amp;redirect=<span class="subst">$&#123;redirectUrl&#125;</span>`</span></span><br></pre></td></tr></table></figure>

<h3 id="2-支付宝沙箱账号信息"><a href="#2-支付宝沙箱账号信息" class="headerlink" title="2. 支付宝沙箱账号信息"></a>2. 支付宝沙箱账号信息</h3><table>
<thead>
<tr>
<th>账号</th>
<th><a href="mailto:jfjbwb4477@sandbox.com">jfjbwb4477@sandbox.com</a></th>
</tr>
</thead>
<tbody><tr>
<td>登录密码</td>
<td>111111</td>
</tr>
<tr>
<td>支付密码</td>
<td>111111</td>
</tr>
</tbody></table>
<h2 id="支付结果页展示"><a href="#支付结果页展示" class="headerlink" title="支付结果页展示"></a>支付结果页展示</h2><h3 id="1-准备模版-2"><a href="#1-准备模版-2" class="headerlink" title="1. 准备模版"></a>1. 准备模版</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-pay-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 支付结果 --&gt;</span><br><span class="line">      &lt;div class=&quot;pay-result&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;iconfont icon-queren2 green&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=&quot;iconfont icon-shanchu red&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;p class=&quot;tit&quot;&gt;支付成功&lt;/p&gt;</span><br><span class="line">        &lt;p class=&quot;tip&quot;&gt;我们将尽快为您发货，收货期间请保持手机畅通&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;支付方式：&lt;span&gt;支付宝&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;支付金额：&lt;span&gt;¥200.00&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">        &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; style=&quot;margin-right:20px&quot;&gt;查看订单&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button&gt;进入首页&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;p class=&quot;alert&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;iconfont icon-tip&quot;&gt;&lt;/span&gt;</span><br><span class="line">          温馨提示：小兔鲜儿不会以订单异常、系统升级为由要求您点击任何网址链接进行退款操作，保护资产、谨慎操作。</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.pay-result &#123;</span><br><span class="line">  padding: 100px 0;</span><br><span class="line">  background: #fff;</span><br><span class="line">  text-align: center;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line"></span><br><span class="line">  &gt;.iconfont &#123;</span><br><span class="line">    font-size: 100px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .green &#123;</span><br><span class="line">    color: #1dc779;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .red &#123;</span><br><span class="line">    color: $priceColor;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .tit &#123;</span><br><span class="line">    font-size: 24px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .tip &#123;</span><br><span class="line">    color: #999;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  p &#123;</span><br><span class="line">    line-height: 40px;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .btn &#123;</span><br><span class="line">    margin-top: 50px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .alert &#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    color: #999;</span><br><span class="line">    margin-top: 50px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-绑定路由"><a href="#2-绑定路由" class="headerlink" title="2. 绑定路由"></a>2. 绑定路由</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;paycallback&#x27;</span>, <span class="comment">// 注意路径，必须是paycallback</span></span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">PayBack</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="3-渲染数据"><a href="#3-渲染数据" class="headerlink" title="3. 渲染数据"></a>3. 渲染数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; getOrderAPI &#125; from &#x27;@/apis/pay&#x27;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line">const route = useRoute()</span><br><span class="line">const orderInfo = ref(&#123;&#125;)</span><br><span class="line"></span><br><span class="line">const getOrderInfo = async () =&gt; &#123;</span><br><span class="line">  const res = await getOrderAPI(route.query.orderId)</span><br><span class="line">  orderInfo.value = res.result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; getOrderInfo())</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;xtx-pay-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 支付结果 --&gt;</span><br><span class="line">      &lt;div class=&quot;pay-result&quot;&gt;</span><br><span class="line">        &lt;!-- 路由参数获取到的是字符串而不是布尔值 --&gt;</span><br><span class="line">        &lt;span class=&quot;iconfont icon-queren2 green&quot; v-if=&quot;$route.query.payResult === &#x27;true&#x27;&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=&quot;iconfont icon-shanchu red&quot; v-else&gt;&lt;/span&gt;</span><br><span class="line">        &lt;p class=&quot;tit&quot;&gt;支付&#123;&#123; $route.query.payResult === &#x27;true&#x27; ? &#x27;成功&#x27; : &#x27;失败&#x27; &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p class=&quot;tip&quot;&gt;我们将尽快为您发货，收货期间请保持手机畅通&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;支付方式：&lt;span&gt;支付宝&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;支付金额：&lt;span&gt;¥&#123;&#123; orderInfo.payMoney?.toFixed(2) &#125;&#125;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">        &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; style=&quot;margin-right:20px&quot;&gt;查看订单&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button&gt;进入首页&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;p class=&quot;alert&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;iconfont icon-tip&quot;&gt;&lt;/span&gt;</span><br><span class="line">          温馨提示：小兔鲜儿不会以订单异常、系统升级为由要求您点击任何网址链接进行退款操作，保护资产、谨慎操作。</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="倒计时逻辑函数封装"><a href="#倒计时逻辑函数封装" class="headerlink" title="倒计时逻辑函数封装"></a>倒计时逻辑函数封装</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 封装倒计时逻辑函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed, onUnmounted, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">useCountDown</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 1. 响应式的数据</span></span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">const</span> time = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="comment">// 格式化时间 为 xx分xx秒</span></span><br><span class="line">  <span class="keyword">const</span> formatTime = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> dayjs.<span class="title function_">unix</span>(time.<span class="property">value</span>).<span class="title function_">format</span>(<span class="string">&#x27;mm分ss秒&#x27;</span>))</span><br><span class="line">  <span class="comment">// 2. 开启倒计时的函数</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">start</span> = (<span class="params">currentTime</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 开始倒计时的逻辑</span></span><br><span class="line">    <span class="comment">// 核心逻辑的编写：每隔1s就减一</span></span><br><span class="line">    time.<span class="property">value</span> = currentTime</span><br><span class="line">    timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      time.<span class="property">value</span>--</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 组件销毁时清除定时器</span></span><br><span class="line">  <span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    timer &amp;&amp; <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    formatTime,</span><br><span class="line">    start</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="会员中心"><a href="#会员中心" class="headerlink" title="会员中心"></a>会员中心</h1><h1 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1677760336386-fed69c18-9d79-4960-b4ec-8c4324c6673b.png#averageHue=%23ceba82&clientId=u225ca3dc-98f1-4&from=paste&height=568&id=udd60da26&name=image.png&originHeight=1136&originWidth=2494&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1009328&status=done&style=none&taskId=ue64b7d72-2c83-40f9-9225-e3cf23b34e3&title=&width=1247" alt="image.png"></h1><h2 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a>路由配置</h2><h3 id="1-准备路由模版"><a href="#1-准备路由模版" class="headerlink" title="1. 准备路由模版"></a>1. 准备路由模版</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt; &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;xtx-member-aside&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;user-manage&quot;&gt;</span><br><span class="line">        &lt;h4&gt;我的账户&lt;/h4&gt;</span><br><span class="line">        &lt;div class=&quot;links&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/member/user&quot;&gt;个人中心&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;h4&gt;交易管理&lt;/h4&gt;</span><br><span class="line">        &lt;div class=&quot;links&quot;&gt;</span><br><span class="line">          &lt;RouterLink to=&quot;/member/order&quot;&gt;我的订单&lt;/RouterLink&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;article&quot;&gt;</span><br><span class="line">      &lt;!-- 三级路由的挂载点 --&gt;</span><br><span class="line">      &lt;!-- &lt;RouterView /&gt; --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  padding-top: 20px;</span><br><span class="line"></span><br><span class="line">  .xtx-member-aside &#123;</span><br><span class="line">    width: 220px;</span><br><span class="line">    margin-right: 20px;</span><br><span class="line">    border-radius: 2px;</span><br><span class="line">    background-color: #fff;</span><br><span class="line"></span><br><span class="line">    .user-manage &#123;</span><br><span class="line">      background-color: #fff;</span><br><span class="line"></span><br><span class="line">      h4 &#123;</span><br><span class="line">        font-size: 18px;</span><br><span class="line">        font-weight: 400;</span><br><span class="line">        padding: 20px 52px 5px;</span><br><span class="line">        border-top: 1px solid #f6f6f6;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .links &#123;</span><br><span class="line">        padding: 0 52px 10px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      a &#123;</span><br><span class="line">        display: block;</span><br><span class="line">        line-height: 1;</span><br><span class="line">        padding: 15px 0;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">        color: #666;</span><br><span class="line">        position: relative;</span><br><span class="line"></span><br><span class="line">        &amp;:hover &#123;</span><br><span class="line">          color: $xtxColor;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &amp;.active,</span><br><span class="line">        &amp;.router-link-exact-active &#123;</span><br><span class="line">          color: $xtxColor;</span><br><span class="line"></span><br><span class="line">          &amp;:before &#123;</span><br><span class="line">            display: block;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &amp;:before &#123;</span><br><span class="line">          content: &#x27;&#x27;;</span><br><span class="line">          display: none;</span><br><span class="line">          width: 6px;</span><br><span class="line">          height: 6px;</span><br><span class="line">          border-radius: 50%;</span><br><span class="line">          position: absolute;</span><br><span class="line">          top: 19px;</span><br><span class="line">          left: -16px;</span><br><span class="line">          background-color: $xtxColor;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .article &#123;</span><br><span class="line">    width: 1000px;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-配置路由-3"><a href="#2-配置路由-3" class="headerlink" title="2. 配置路由"></a>2. 配置路由</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Member</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Member/index.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/member&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Member</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-准备个人信息和我的订单路由组件"><a href="#3-准备个人信息和我的订单路由组件" class="headerlink" title="3. 准备个人信息和我的订单路由组件"></a>3. 准备个人信息和我的订单路由组件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">const userStore = &#123;&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home-overview&quot;&gt;</span><br><span class="line">    &lt;!-- 用户信息 --&gt;</span><br><span class="line">    &lt;div class=&quot;user-meta&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;avatar&quot;&gt;</span><br><span class="line">        &lt;img :src=&quot;userStore.userInfo?.avatar&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;h4&gt;&#123;&#123; userStore.userInfo?.account &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">      &lt;a href=&quot;javascript:;&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;iconfont icon-hy&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;p&gt;会员中心&lt;/p&gt;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">      &lt;a href=&quot;javascript:;&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;iconfont icon-aq&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;p&gt;安全设置&lt;/p&gt;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">      &lt;a href=&quot;javascript:;&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;iconfont icon-dw&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;p&gt;地址管理&lt;/p&gt;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;like-container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;home-panel&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;header&quot;&gt;</span><br><span class="line">        &lt;h4 data-v-bcb266e0=&quot;&quot;&gt;猜你喜欢&lt;/h4&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;goods-list&quot;&gt;</span><br><span class="line">        &lt;!-- &lt;GoodsItem v-for=&quot;good in likeList&quot; :key=&quot;good.id&quot; :good=&quot;good&quot; /&gt; --&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.home-overview &#123;</span><br><span class="line">  height: 132px;</span><br><span class="line">  background: url(@/assets/images/center-bg.png) no-repeat center / cover;</span><br><span class="line">  display: flex;</span><br><span class="line"></span><br><span class="line">  .user-meta &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line"></span><br><span class="line">    .avatar &#123;</span><br><span class="line">      width: 85px;</span><br><span class="line">      height: 85px;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      margin-left: 60px;</span><br><span class="line"></span><br><span class="line">      img &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    h4 &#123;</span><br><span class="line">      padding-left: 26px;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      font-weight: normal;</span><br><span class="line">      color: white;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .item &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: space-around;</span><br><span class="line"></span><br><span class="line">    &amp;:first-child &#123;</span><br><span class="line">      border-right: 1px solid #f4f4f4;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    a &#123;</span><br><span class="line">      color: white;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">      text-align: center;</span><br><span class="line"></span><br><span class="line">      .iconfont &#123;</span><br><span class="line">        font-size: 32px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      p &#123;</span><br><span class="line">        line-height: 32px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.like-container &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.home-panel &#123;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  padding: 0 20px;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  height: 400px;</span><br><span class="line"></span><br><span class="line">  .header &#123;</span><br><span class="line">    height: 66px;</span><br><span class="line">    border-bottom: 1px solid #f5f5f5;</span><br><span class="line">    padding: 18px 0;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    align-items: baseline;</span><br><span class="line"></span><br><span class="line">    h4 &#123;</span><br><span class="line">      font-size: 22px;</span><br><span class="line">      font-weight: 400;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .goods-list &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-around;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// tab列表</span><br><span class="line">const tabTypes = [</span><br><span class="line">  &#123; name: &quot;all&quot;, label: &quot;全部订单&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;unpay&quot;, label: &quot;待付款&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;deliver&quot;, label: &quot;待发货&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;receive&quot;, label: &quot;待收货&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;comment&quot;, label: &quot;待评价&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;complete&quot;, label: &quot;已完成&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;cancel&quot;, label: &quot;已取消&quot; &#125;</span><br><span class="line">]</span><br><span class="line">// 订单列表</span><br><span class="line">const orderList = []</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;order-container&quot;&gt;</span><br><span class="line">    &lt;el-tabs&gt;</span><br><span class="line">      &lt;!-- tab切换 --&gt;</span><br><span class="line">      &lt;el-tab-pane v-for=&quot;item in tabTypes&quot; :key=&quot;item.name&quot; :label=&quot;item.label&quot; /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div class=&quot;main-container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;holder-container&quot; v-if=&quot;orderList.length === 0&quot;&gt;</span><br><span class="line">          &lt;el-empty description=&quot;暂无订单数据&quot; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div v-else&gt;</span><br><span class="line">          &lt;!-- 订单列表 --&gt;</span><br><span class="line">          &lt;div class=&quot;order-item&quot; v-for=&quot;order in orderList&quot; :key=&quot;order.id&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;head&quot;&gt;</span><br><span class="line">              &lt;span&gt;下单时间：&#123;&#123; order.createTime &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;span&gt;订单编号：&#123;&#123; order.id &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;!-- 未付款，倒计时时间还有 --&gt;</span><br><span class="line">              &lt;span class=&quot;down-time&quot; v-if=&quot;order.orderState === 1&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;iconfont icon-down-time&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;b&gt;付款截止: &#123;&#123;order.countdown&#125;&#125;&lt;/b&gt;</span><br><span class="line">              &lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;body&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;column goods&quot;&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                  &lt;li v-for=&quot;item in order.skus&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">                    &lt;a class=&quot;image&quot; href=&quot;javascript:;&quot;&gt;</span><br><span class="line">                      &lt;img :src=&quot;item.image&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                    &lt;div class=&quot;info&quot;&gt;</span><br><span class="line">                      &lt;p class=&quot;name ellipsis-2&quot;&gt;</span><br><span class="line">                        &#123;&#123; item.name &#125;&#125;</span><br><span class="line">                      &lt;/p&gt;</span><br><span class="line">                      &lt;p class=&quot;attr ellipsis&quot;&gt;</span><br><span class="line">                        &lt;span&gt;&#123;&#123; item.attrsText &#125;&#125;&lt;/span&gt;</span><br><span class="line">                      &lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;price&quot;&gt;¥&#123;&#123; item.realPay?.toFixed(2) &#125;&#125;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;count&quot;&gt;x&#123;&#123; item.quantity &#125;&#125;&lt;/div&gt;</span><br><span class="line">                  &lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;column state&quot;&gt;</span><br><span class="line">                &lt;p&gt;&#123;&#123; order.orderState &#125;&#125;&lt;/p&gt;</span><br><span class="line">                &lt;p v-if=&quot;order.orderState === 3&quot;&gt;</span><br><span class="line">                  &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;查看物流&lt;/a&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p v-if=&quot;order.orderState === 4&quot;&gt;</span><br><span class="line">                  &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;评价商品&lt;/a&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p v-if=&quot;order.orderState === 5&quot;&gt;</span><br><span class="line">                  &lt;a href=&quot;javascript:;&quot; class=&quot;green&quot;&gt;查看评价&lt;/a&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;column amount&quot;&gt;</span><br><span class="line">                &lt;p class=&quot;red&quot;&gt;¥&#123;&#123; order.payMoney?.toFixed(2) &#125;&#125;&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;（含运费：¥&#123;&#123; order.postFee?.toFixed(2) &#125;&#125;）&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;在线支付&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;column action&quot;&gt;</span><br><span class="line">                &lt;el-button  v-if=&quot;order.orderState === 1&quot; type=&quot;primary&quot;</span><br><span class="line">                  size=&quot;small&quot;&gt;</span><br><span class="line">                  立即付款</span><br><span class="line">                &lt;/el-button&gt;</span><br><span class="line">                &lt;el-button v-if=&quot;order.orderState === 3&quot; type=&quot;primary&quot; size=&quot;small&quot;&gt;</span><br><span class="line">                  确认收货</span><br><span class="line">                &lt;/el-button&gt;</span><br><span class="line">                &lt;p&gt;&lt;a href=&quot;javascript:;&quot;&gt;查看详情&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">                &lt;p v-if=&quot;[2, 3, 4, 5].includes(order.orderState)&quot;&gt;</span><br><span class="line">                  &lt;a href=&quot;javascript:;&quot;&gt;再次购买&lt;/a&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p v-if=&quot;[4, 5].includes(order.orderState)&quot;&gt;</span><br><span class="line">                  &lt;a href=&quot;javascript:;&quot;&gt;申请售后&lt;/a&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p v-if=&quot;order.orderState === 1&quot;&gt;&lt;a href=&quot;javascript:;&quot;&gt;取消订单&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;!-- 分页 --&gt;</span><br><span class="line">          &lt;div class=&quot;pagination-container&quot;&gt;</span><br><span class="line">            &lt;el-pagination background layout=&quot;prev, pager, next&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/el-tabs&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.order-container &#123;</span><br><span class="line">  padding: 10px 20px;</span><br><span class="line"></span><br><span class="line">  .pagination-container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .main-container &#123;</span><br><span class="line">    min-height: 500px;</span><br><span class="line"></span><br><span class="line">    .holder-container &#123;</span><br><span class="line">      min-height: 500px;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      align-items: center;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.order-item &#123;</span><br><span class="line">  margin-bottom: 20px;</span><br><span class="line">  border: 1px solid #f5f5f5;</span><br><span class="line"></span><br><span class="line">  .head &#123;</span><br><span class="line">    height: 50px;</span><br><span class="line">    line-height: 50px;</span><br><span class="line">    background: #f5f5f5;</span><br><span class="line">    padding: 0 20px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line"></span><br><span class="line">    span &#123;</span><br><span class="line">      margin-right: 20px;</span><br><span class="line"></span><br><span class="line">      &amp;.down-time &#123;</span><br><span class="line">        margin-right: 0;</span><br><span class="line">        float: right;</span><br><span class="line"></span><br><span class="line">        i &#123;</span><br><span class="line">          vertical-align: middle;</span><br><span class="line">          margin-right: 3px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        b &#123;</span><br><span class="line">          vertical-align: middle;</span><br><span class="line">          font-weight: normal;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .del &#123;</span><br><span class="line">      margin-right: 0;</span><br><span class="line">      float: right;</span><br><span class="line">      color: #999;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .body &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: stretch;</span><br><span class="line"></span><br><span class="line">    .column &#123;</span><br><span class="line">      border-left: 1px solid #f5f5f5;</span><br><span class="line">      text-align: center;</span><br><span class="line">      padding: 20px;</span><br><span class="line"></span><br><span class="line">      &gt;p &#123;</span><br><span class="line">        padding-top: 10px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:first-child &#123;</span><br><span class="line">        border-left: none;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;.goods &#123;</span><br><span class="line">        flex: 1;</span><br><span class="line">        padding: 0;</span><br><span class="line">        align-self: center;</span><br><span class="line"></span><br><span class="line">        ul &#123;</span><br><span class="line">          li &#123;</span><br><span class="line">            border-bottom: 1px solid #f5f5f5;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            display: flex;</span><br><span class="line"></span><br><span class="line">            &amp;:last-child &#123;</span><br><span class="line">              border-bottom: none;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            .image &#123;</span><br><span class="line">              width: 70px;</span><br><span class="line">              height: 70px;</span><br><span class="line">              border: 1px solid #f5f5f5;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            .info &#123;</span><br><span class="line">              width: 220px;</span><br><span class="line">              text-align: left;</span><br><span class="line">              padding: 0 10px;</span><br><span class="line"></span><br><span class="line">              p &#123;</span><br><span class="line">                margin-bottom: 5px;</span><br><span class="line"></span><br><span class="line">                &amp;.name &#123;</span><br><span class="line">                  height: 38px;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                &amp;.attr &#123;</span><br><span class="line">                  color: #999;</span><br><span class="line">                  font-size: 12px;</span><br><span class="line"></span><br><span class="line">                  span &#123;</span><br><span class="line">                    margin-right: 5px;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            .price &#123;</span><br><span class="line">              width: 100px;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            .count &#123;</span><br><span class="line">              width: 80px;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;.state &#123;</span><br><span class="line">        width: 120px;</span><br><span class="line"></span><br><span class="line">        .green &#123;</span><br><span class="line">          color: $xtxColor;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;.amount &#123;</span><br><span class="line">        width: 200px;</span><br><span class="line"></span><br><span class="line">        .red &#123;</span><br><span class="line">          color: $priceColor;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;.action &#123;</span><br><span class="line">        width: 140px;</span><br><span class="line"></span><br><span class="line">        a &#123;</span><br><span class="line">          display: block;</span><br><span class="line"></span><br><span class="line">          &amp;:hover &#123;</span><br><span class="line">            color: $xtxColor;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-配置三级路由"><a href="#4-配置三级路由" class="headerlink" title="4. 配置三级路由"></a>4. 配置三级路由</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">MemberInfo</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Member/components/UserInfo.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MemberOrder</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Member/components/UserOrder.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/member&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">Member</span>,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">MemberInfo</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;order&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">MemberOrder</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="个人中心信息渲染"><a href="#个人中心信息渲染" class="headerlink" title="个人中心信息渲染"></a>个人中心信息渲染</h2><h3 id="1-使用Pinia数据渲染个人信息"><a href="#1-使用Pinia数据渲染个人信息" class="headerlink" title="1. 使用Pinia数据渲染个人信息"></a>1. 使用Pinia数据渲染个人信息</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 导入userStore</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/stores/userStore&#x27;</span><br><span class="line">const userStore = useUserStore()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 用户信息 --&gt;</span><br><span class="line">  &lt;div class=&quot;user-meta&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;avatar&quot;&gt;</span><br><span class="line">      &lt;img :src=&quot;userStore.userInfo?.avatar&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h4&gt;&#123;&#123; userStore.userInfo?.account &#125;&#125;&lt;/h4&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-封装猜你喜欢接口"><a href="#2-封装猜你喜欢接口" class="headerlink" title="2. 封装猜你喜欢接口"></a>2. 封装猜你喜欢接口</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getLikeListAPI</span> = (<span class="params">&#123; limit = <span class="number">4</span> &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/goods/relevant&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      limit </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-渲染猜你喜欢数据"><a href="#3-渲染猜你喜欢数据" class="headerlink" title="3. 渲染猜你喜欢数据"></a>3. 渲染猜你喜欢数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">// 导入GoodsItem组件</span><br><span class="line">import GoodsItem from &#x27;@/views/Home/components/GoodsItem.vue&#x27;</span><br><span class="line">// 获取猜你喜欢列表</span><br><span class="line">const likeList = ref([])</span><br><span class="line">const getLikeList = async () =&gt; &#123;</span><br><span class="line">  const res = await getLikeListAPI(&#123; limit: 4 &#125;)</span><br><span class="line">  likeList.value = res.result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; getLikeList())</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div class=&quot;goods-list&quot;&gt;</span><br><span class="line">      &lt;GoodsItem v-for=&quot;good in likeList&quot; :key=&quot;good.id&quot; :goods=&quot;good&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="我的订单"><a href="#我的订单" class="headerlink" title="我的订单"></a>我的订单</h2><h3 id="1-基础列表渲染"><a href="#1-基础列表渲染" class="headerlink" title="1. 基础列表渲染"></a>1. 基础列表渲染</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">params: &#123;</span></span><br><span class="line"><span class="comment">	orderState:0,</span></span><br><span class="line"><span class="comment">  page:1,</span></span><br><span class="line"><span class="comment">  pageSize:2</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getUserOrder</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/member/order&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>:<span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    params</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; getUserOrder &#125; from &#x27;@/apis/order&#x27;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 获取订单列表</span><br><span class="line">const orderList = ref([])</span><br><span class="line">const params = ref(&#123;</span><br><span class="line">  orderState: 0,</span><br><span class="line">  page: 1,</span><br><span class="line">  pageSize: 2</span><br><span class="line">&#125;)</span><br><span class="line">const getOrderList = async () =&gt; &#123;</span><br><span class="line">  const res = await getUserOrder(params.value)</span><br><span class="line">  orderList.value = res.result.items</span><br><span class="line">  total.value = res.result.counts</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; getOrderList())</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-tab切换实现"><a href="#2-tab切换实现" class="headerlink" title="2. tab切换实现"></a>2. tab切换实现</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// tab列表</span><br><span class="line">const tabTypes = [</span><br><span class="line">  &#123; name: &quot;all&quot;, label: &quot;全部订单&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;unpay&quot;, label: &quot;待付款&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;deliver&quot;, label: &quot;待发货&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;receive&quot;, label: &quot;待收货&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;comment&quot;, label: &quot;待评价&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;complete&quot;, label: &quot;已完成&quot; &#125;,</span><br><span class="line">  &#123; name: &quot;cancel&quot;, label: &quot;已取消&quot; &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">// tab切换</span><br><span class="line">const tabChange = (type) =&gt; &#123;</span><br><span class="line">  params.value.orderState = type</span><br><span class="line">  getOrderList()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-tabs @tab-change=&quot;tabChange&quot;&gt;</span><br><span class="line">    &lt;!-- 省略... --&gt;</span><br><span class="line">  &lt;/el-tabs&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-分页逻实现"><a href="#3-分页逻实现" class="headerlink" title="3. 分页逻实现"></a>3. 分页逻实现</h3><blockquote>
<p>页数 &#x3D; 总条数 &#x2F; 每页条数</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 补充总条数</span><br><span class="line">const total = ref(0)</span><br><span class="line">const getOrderList = async () =&gt; &#123;</span><br><span class="line">  const res = await getUserOrder(params.value)</span><br><span class="line">  // 存入总条数</span><br><span class="line">  total.value = res.result.counts</span><br><span class="line">&#125;</span><br><span class="line">// 页数切换</span><br><span class="line">const pageChange = (page) =&gt; &#123;</span><br><span class="line">  params.value.page = page</span><br><span class="line">  getOrderList()</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;el-pagination </span><br><span class="line">     :total=&quot;total&quot; </span><br><span class="line">     @current-change=&quot;pageChange&quot; </span><br><span class="line">     :page-size=&quot;params.pageSize&quot; </span><br><span class="line">     background</span><br><span class="line">     layout=&quot;prev, pager, next&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="细节优化"><a href="#细节优化" class="headerlink" title="细节优化"></a>细节优化</h2><h3 id="1-默认三级路由设置"><a href="#1-默认三级路由设置" class="headerlink" title="1. 默认三级路由设置"></a>1. 默认三级路由设置</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;member&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">Member</span>,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 置空path</span></span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">UserInfo</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;order&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">UserOrder</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-订单状态显示适配"><a href="#2-订单状态显示适配" class="headerlink" title="2. 订单状态显示适配"></a>2. 订单状态显示适配</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 创建格式化函数</span><br><span class="line">  const fomartPayState = (payState) =&gt; &#123;</span><br><span class="line">    const stateMap = &#123;</span><br><span class="line">      1: &#x27;待付款&#x27;,</span><br><span class="line">      2: &#x27;待发货&#x27;,</span><br><span class="line">      3: &#x27;待收货&#x27;,</span><br><span class="line">      4: &#x27;待评价&#x27;,</span><br><span class="line">      5: &#x27;已完成&#x27;,</span><br><span class="line">      6: &#x27;已取消&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    return stateMap[payState]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 调用函数适配显示 --&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; fomartPayState(order.orderState)&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h1 id="拓展部分"><a href="#拓展部分" class="headerlink" title="拓展部分"></a>拓展部分</h1><h2 id="Sku组件封装"><a href="#Sku组件封装" class="headerlink" title="Sku组件封装"></a>Sku组件封装</h2><h3 id="1-准备模版渲染规格数据"><a href="#1-准备模版渲染规格数据" class="headerlink" title="1. 准备模版渲染规格数据"></a>1. 准备模版渲染规格数据</h3><blockquote>
<p>使用Vite快速创建一个Vue项目，在项目中添加请求插件axios，然后新增一个SKU组件，在根组件中把它渲染出来，下面是规格内容的基础模板</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1677821818707-dc5529c0-fa8f-442a-af7a-43ad258106f2.png#averageHue=%23fcfcfc&clientId=u7dedb4ef-4c0b-4&from=paste&height=360&id=nGWnP&name=image.png&originHeight=480&originWidth=826&originalType=binary&ratio=2&rotation=0&showTitle=false&size=21008&status=done&style=none&taskId=u14f439b0-74a9-4b91-9de8-14ffcf66166&title=&width=620" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">// 商品数据</span><br><span class="line">const goods = ref(&#123;&#125;)</span><br><span class="line">const getGoods = async () =&gt; &#123;</span><br><span class="line">  // 1135076  初始化就有无库存的规格</span><br><span class="line">  // 1369155859933827074 更新之后有无库存项（蓝色-20cm-中国）</span><br><span class="line">  const res = await axios.get(&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net/goods?id=1369155859933827074&#x27;)</span><br><span class="line">  goods.value = res.data.result</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; getGoods())</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-sku&quot;&gt;</span><br><span class="line">    &lt;dl v-for=&quot;item in goods.specs&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">      &lt;dt&gt;&#123;&#123; item.name &#125;&#125;&lt;/dt&gt;</span><br><span class="line">      &lt;dd&gt;</span><br><span class="line">        &lt;template v-for=&quot;val in item.values&quot; :key=&quot;val.name&quot;&gt;</span><br><span class="line">          &lt;!-- 图片类型规格 --&gt;</span><br><span class="line">          &lt;img v-if=&quot;val.picture&quot; :src=&quot;val.picture&quot; :title=&quot;val.name&quot;&gt;</span><br><span class="line">          &lt;!-- 文字类型规格 --&gt;</span><br><span class="line">          &lt;span v-else&gt;&#123;&#123; val.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/dd&gt;</span><br><span class="line">    &lt;/dl&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">@mixin sku-state-mixin &#123;</span><br><span class="line">  border: 1px solid #e4e4e4;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line"></span><br><span class="line">  &amp;.selected &#123;</span><br><span class="line">    border-color: #27ba9b;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;.disabled &#123;</span><br><span class="line">    opacity: 0.6;</span><br><span class="line">    border-style: dashed;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.goods-sku &#123;</span><br><span class="line">  padding-left: 10px;</span><br><span class="line">  padding-top: 20px;</span><br><span class="line"></span><br><span class="line">  dl &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    padding-bottom: 20px;</span><br><span class="line">    align-items: center;</span><br><span class="line"></span><br><span class="line">    dt &#123;</span><br><span class="line">      width: 50px;</span><br><span class="line">      color: #999;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dd &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      color: #666;</span><br><span class="line"></span><br><span class="line">      &gt;img &#123;</span><br><span class="line">        width: 50px;</span><br><span class="line">        height: 50px;</span><br><span class="line">        margin-bottom: 4px;</span><br><span class="line">        @include sku-state-mixin;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &gt;span &#123;</span><br><span class="line">        display: inline-block;</span><br><span class="line">        height: 30px;</span><br><span class="line">        line-height: 28px;</span><br><span class="line">        padding: 0 20px;</span><br><span class="line">        margin-bottom: 4px;</span><br><span class="line">        @include sku-state-mixin;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-选中和取消选中实现"><a href="#2-选中和取消选中实现" class="headerlink" title="2. 选中和取消选中实现"></a>2. 选中和取消选中实现</h3><blockquote>
<p>基本思路：</p>
<ol>
<li>每一个规格按钮都拥有自己的选中状态数据-selected，true为选中，false为取消选中</li>
<li>配合动态class，把选中状态selected作为判断条件，true让active类名显示，false让active类名不显示</li>
<li>点击的是未选中，把同一个规格的其他取消选中，当前点击项选中；点击的是已选中，直接取消</li>
</ol>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 省略代码</span><br><span class="line"></span><br><span class="line">// 选中和取消选中实现</span><br><span class="line">const changeSku = (item, val) =&gt; &#123;</span><br><span class="line">  // 点击的是未选中，把同一个规格的其他取消选中，当前点击项选中，点击的是已选中，直接取消</span><br><span class="line">  if (val.selected) &#123;</span><br><span class="line">    val.selected = false</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    item.values.forEach(valItem =&gt; valItem.selected = false)</span><br><span class="line">    val.selected = true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-sku&quot;&gt;</span><br><span class="line">    &lt;dl v-for=&quot;item in goods.specs&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">      &lt;dt&gt;&#123;&#123; item.name &#125;&#125;&lt;/dt&gt;</span><br><span class="line">      &lt;dd&gt;</span><br><span class="line">        &lt;template v-for=&quot;val in item.values&quot; :key=&quot;val.name&quot;&gt;</span><br><span class="line">          &lt;img v-if=&quot;val.picture&quot; </span><br><span class="line">            @click=&quot;changeSku(item, val)&quot; </span><br><span class="line">            :class=&quot;&#123; selected: val.selected &#125;&quot; </span><br><span class="line">            :src=&quot;val.picture&quot;</span><br><span class="line">            :title=&quot;val.name&quot;&gt;</span><br><span class="line">          &lt;span v-else </span><br><span class="line">            @click=&quot;changeSku(val)&quot; </span><br><span class="line">            :class=&quot;&#123; selected: val.selected &#125;&quot;&gt;&#123;&#123; val.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/dd&gt;</span><br><span class="line">    &lt;/dl&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-规格禁用功能实现"><a href="#3-规格禁用功能实现" class="headerlink" title="3. 规格禁用功能实现"></a>3. 规格禁用功能实现</h3><h4 id="整体思路-分析"><a href="#整体思路-分析" class="headerlink" title="整体思路 分析"></a>整体思路 分析</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/274425/1677747580985-234fe1bd-483d-49eb-a9cd-42e3a009a375.png#averageHue=%23f6f5f5&clientId=ucecf252d-b9c3-4&from=drop&id=ufb3b1ddd&name=1.png&originHeight=1590&originWidth=1668&originalType=binary&ratio=2&rotation=0&showTitle=false&size=292918&status=done&style=none&taskId=u676b6dfb-8657-4890-8cf8-763b4a35c62&title=" alt="1.png"></p>
<h4 id="生成路径字典"><a href="#生成路径字典" class="headerlink" title="生成路径字典"></a>生成路径字典</h4><p>幂集算法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">bwPowerSet</span> (originalSet) &#123;</span><br><span class="line">  <span class="keyword">const</span> subSets = []</span><br><span class="line"></span><br><span class="line">  <span class="comment">// We will have 2^n possible combinations (where n is a length of original set).</span></span><br><span class="line">  <span class="comment">// It is because for every element of original set we will decide whether to include</span></span><br><span class="line">  <span class="comment">// it or not (2 options for each set element).</span></span><br><span class="line">  <span class="keyword">const</span> numberOfCombinations = <span class="number">2</span> ** originalSet.<span class="property">length</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Each number in binary representation in a range from 0 to 2^n does exactly what we need:</span></span><br><span class="line">  <span class="comment">// it shows by its bits (0 or 1) whether to include related element from the set or not.</span></span><br><span class="line">  <span class="comment">// For example, for the set &#123;1, 2, 3&#125; the binary number of 0b010 would mean that we need to</span></span><br><span class="line">  <span class="comment">// include only &quot;2&quot; to the current set.</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> combinationIndex = <span class="number">0</span>; combinationIndex &lt; numberOfCombinations; combinationIndex += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> subSet = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> setElementIndex = <span class="number">0</span>; setElementIndex &lt; originalSet.<span class="property">length</span>; setElementIndex += <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// Decide whether we need to include current element into the subset or not.</span></span><br><span class="line">      <span class="keyword">if</span> (combinationIndex &amp; (<span class="number">1</span> &lt;&lt; setElementIndex)) &#123;</span><br><span class="line">        subSet.<span class="title function_">push</span>(originalSet[setElementIndex])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add current subset to the list of all subsets.</span></span><br><span class="line">    subSets.<span class="title function_">push</span>(subSet)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> subSets</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建生成路径字典对象函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getPathMap</span> = (<span class="params">goods</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> pathMap = &#123;&#125;</span><br><span class="line">  <span class="comment">// 1. 得到所有有效的Sku集合 </span></span><br><span class="line">  <span class="keyword">const</span> effectiveSkus = goods.<span class="property">skus</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">sku</span> =&gt;</span> sku.<span class="property">inventory</span> &gt; <span class="number">0</span>)</span><br><span class="line">  <span class="comment">// 2. 根据有效的Sku集合使用powerSet算法得到所有子集 [1,2] =&gt; [[1], [2], [1,2]]</span></span><br><span class="line">  effectiveSkus.<span class="title function_">forEach</span>(<span class="function"><span class="params">sku</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 2.1 获取可选规格值数组</span></span><br><span class="line">    <span class="keyword">const</span> selectedValArr = sku.<span class="property">specs</span>.<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> val.<span class="property">valueName</span>)</span><br><span class="line">    <span class="comment">// 2.2 获取可选值数组的子集</span></span><br><span class="line">    <span class="keyword">const</span> valueArrPowerSet = <span class="title function_">powerSet</span>(selectedValArr)</span><br><span class="line">    <span class="comment">// 3. 根据子集生成路径字典对象</span></span><br><span class="line">    <span class="comment">// 3.1 遍历子集 往pathMap中插入数据</span></span><br><span class="line">    valueArrPowerSet.<span class="title function_">forEach</span>(<span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 根据Arr得到字符串的key，约定使用-分割 [&#x27;蓝色&#x27;，&#x27;美国&#x27;] =&gt; &#x27;蓝色-美国&#x27;</span></span><br><span class="line">      <span class="keyword">const</span> key = arr.<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">      <span class="comment">// 给pathMap设置数据</span></span><br><span class="line">      <span class="keyword">if</span> (pathMap[key]) &#123;</span><br><span class="line">        pathMap[key].<span class="title function_">push</span>(sku.<span class="property">id</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pathMap[key] = [sku.<span class="property">id</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> pathMap</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据获取完毕生成路径字典</span></span><br><span class="line"><span class="keyword">let</span> pathMap = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getGoods</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 1135076  初始化就有无库存的规格</span></span><br><span class="line">  <span class="comment">// 1369155859933827074 更新之后有无库存项（蓝色-20cm-中国）</span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net/goods?id=1135076&#x27;</span>)</span><br><span class="line">  goods.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">result</span></span><br><span class="line">  pathMap = <span class="title function_">getPathMap</span>(goods.<span class="property">value</span>)</span><br><span class="line">  <span class="comment">// 初始化更新按钮状态</span></span><br><span class="line">  <span class="title function_">initDisabledState</span>(goods.<span class="property">value</span>.<span class="property">specs</span>, pathMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="根据路径字典设置初始化状态"><a href="#根据路径字典设置初始化状态" class="headerlink" title="根据路径字典设置初始化状态"></a>根据路径字典设置初始化状态</h4><blockquote>
<p>思路：判断规格的name属性是否能在有效路径字典中找到，如果找不到就禁用</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 定义初始化函数</span></span><br><span class="line"><span class="comment">// specs：商品源数据 pathMap：路径字典</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">initDisabledState</span> = (<span class="params">specs, pathMap</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 约定：每一个按钮的状态由自身的disabled进行控制</span></span><br><span class="line">  specs.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    item.<span class="property">values</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 路径字典中查找是否有数据 有-可以点击 没有-禁用</span></span><br><span class="line">      val.<span class="property">disabled</span> = !pathMap[val.<span class="property">name</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 在数据返回后进行初始化处理</span></span><br><span class="line"><span class="keyword">let</span> patchMap = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getGoods</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 1135076  初始化就有无库存的规格</span></span><br><span class="line">  <span class="comment">// 1369155859933827074 更新之后有无库存项（蓝色-20cm-中国）</span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net/goods?id=1135076&#x27;</span>)</span><br><span class="line">  goods.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">result</span></span><br><span class="line">  pathMap = <span class="title function_">getPathMap</span>(goods.<span class="property">value</span>)</span><br><span class="line">  <span class="comment">// 初始化更新按钮状态</span></span><br><span class="line">  <span class="title function_">initDisabledState</span>(goods.<span class="property">value</span>.<span class="property">specs</span>, pathMap)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 适配模板显示</span></span><br><span class="line">&lt;img :<span class="keyword">class</span>=<span class="string">&quot;&#123; selected: val.selected, disabled: val.disabled &#125;&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; selected: val.selected, disabled: val.disabled &#125;&quot;</span>&gt;</span>&#123;&#123;val.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="根据路径字典设置组合状态"><a href="#根据路径字典设置组合状态" class="headerlink" title="根据路径字典设置组合状态"></a>根据路径字典设置组合状态</h4><blockquote>
<p>思路：</p>
<ol>
<li>根据当前选中规格，生成顺序规格数组 &#x3D;&gt;  [‘黑色’, undefined, undefined ]</li>
<li>遍历每一个规格按钮</li>
</ol>
<p>如何规格按钮已经选中，忽略判断<br>如果规格按钮未选中，拿着按钮的name值按顺序套入匹配数组对应的位置，最后过滤掉没有值的选项，通过-进行拼接成字符串key, 去路径字典中查找，没有找到则把当前规格按钮禁用</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取选中匹配数组 [&#x27;黑色&#x27;,undefined,undefined]</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSelectedValues</span> = (<span class="params">specs</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = []</span><br><span class="line">  specs.<span class="title function_">forEach</span>(<span class="function"><span class="params">spec</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> selectedVal = spec.<span class="property">values</span>.<span class="title function_">find</span>(<span class="function"><span class="params">value</span> =&gt;</span> value.<span class="property">selected</span>)</span><br><span class="line">    arr.<span class="title function_">push</span>(selectedVal ? selectedVal.<span class="property">name</span> : <span class="literal">undefined</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">updateDisabledState</span> = (<span class="params">specs, pathMap</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 约定：每一个按钮的状态由自身的disabled进行控制</span></span><br><span class="line">  specs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> selectedValues = <span class="title function_">getSelectedValues</span>(specs)</span><br><span class="line">    item.<span class="property">values</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (val.<span class="property">selected</span>) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">const</span> _seletedValues = [...selectedValues]</span><br><span class="line">      _seletedValues[i] = val.<span class="property">name</span></span><br><span class="line">      <span class="keyword">const</span> key = _seletedValues.<span class="title function_">filter</span>(<span class="function"><span class="params">value</span> =&gt;</span> value).<span class="title function_">join</span>(<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">      <span class="comment">// 路径字典中查找是否有数据 有-可以点击 没有-禁用</span></span><br><span class="line">      val.<span class="property">disabled</span> = !pathMap[key]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-产出Prop数据"><a href="#4-产出Prop数据" class="headerlink" title="4. 产出Prop数据"></a>4. 产出Prop数据</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">changeSku</span> = (<span class="params">item, val</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 省略...</span></span><br><span class="line">  <span class="comment">// 产出SKU对象数据</span></span><br><span class="line">  <span class="keyword">const</span> index = <span class="title function_">getSelectedValues</span>(goods.<span class="property">value</span>.<span class="property">specs</span>).<span class="title function_">findIndex</span>(<span class="function"><span class="params">item</span> =&gt;</span> item === <span class="literal">undefined</span>)</span><br><span class="line">  <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;找到了，信息不完整&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;没有找到，信息完整，可以产出&#x27;</span>)</span><br><span class="line">    <span class="comment">// 获取sku对象</span></span><br><span class="line">    <span class="keyword">const</span> key = <span class="title function_">getSelectedValues</span>(goods.<span class="property">value</span>.<span class="property">specs</span>).<span class="title function_">join</span>(<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> skuIds = pathMap[key]</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(skuIds)</span><br><span class="line">    <span class="comment">// 以skuId作为匹配项去goods.value.skus数组中找</span></span><br><span class="line">    <span class="keyword">const</span> skuObj = goods.<span class="property">value</span>.<span class="property">skus</span>.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> === skuIds[<span class="number">0</span>])</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sku对象为&#x27;</span>, skuObj)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">小白菜</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/06/18/%E5%B0%8F%E5%85%94%E9%B2%9C%E9%A1%B9%E7%9B%AE/">http://example.com/2023/06/18/%E5%B0%8F%E5%85%94%E9%B2%9C%E9%A1%B9%E7%9B%AE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">是小白菜哦</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/">前端项目</a></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/19/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90%E5%A4%8D%E4%B9%A0/"><img class="prev-cover" src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">算法设计与分析复习</div></div></a></div><div class="next-post pull-right"><a href="/2023/06/15/%E8%8B%B1%E8%AF%AD%E4%BD%9C%E6%96%87%E6%A8%A1%E6%9D%BF/"><img class="next-cover" src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">英语作文模板</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/pic.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">小白菜</div><div class="author-info__description">头发多多</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Xiaobaicai350"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Xiaobaicai350" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1499487526@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">阳光斑斓 微风含香 爱与四季 皆是向往 <img height="230" lengh="230" src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/1.gif"/></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue3%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">Vue3入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86Vue3"><span class="toc-number">1.1.</span> <span class="toc-text">认识Vue3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E4%BD%93%E9%AA%8C"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. Vue3组合式API体验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Vue3%E6%9B%B4%E5%A4%9A%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. Vue3更多的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8create-vue%E6%90%AD%E5%BB%BAVue3%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.2.</span> <span class="toc-text">使用create-vue搭建Vue3项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86create-vue"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 认识create-vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8create-vue%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 使用create-vue创建项目</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%86%9F%E6%82%89%E9%A1%B9%E7%9B%AE%E5%92%8C%E5%85%B3%E9%94%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.</span> <span class="toc-text">熟悉项目和关键文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI-setup%E9%80%89%E9%A1%B9"><span class="toc-number">1.4.</span> <span class="toc-text">组合式API - setup选项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-setup%E9%80%89%E9%A1%B9%E7%9A%84%E5%86%99%E6%B3%95%E5%92%8C%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. setup选项的写法和执行时机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-setup%E4%B8%AD%E5%86%99%E4%BB%A3%E7%A0%81%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. setup中写代码的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-lt-script-setup-gt-%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. &lt;script setup&gt;语法糖</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI-reactive%E5%92%8Cref%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.</span> <span class="toc-text">组合式API - reactive和ref函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-reactive"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. reactive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ref"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. ref</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-reactive-%E5%AF%B9%E6%AF%94-ref"><span class="toc-number">1.5.3.</span> <span class="toc-text">3. reactive 对比 ref</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI-computed"><span class="toc-number">1.6.</span> <span class="toc-text">组合式API - computed</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI-watch"><span class="toc-number">1.7.</span> <span class="toc-text">组合式API - watch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BE%A6%E5%90%AC%E5%8D%95%E4%B8%AA%E6%95%B0%E6%8D%AE"><span class="toc-number">1.7.1.</span> <span class="toc-text">1. 侦听单个数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BE%A6%E5%90%AC%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE"><span class="toc-number">1.7.2.</span> <span class="toc-text">2. 侦听多个数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-immediate"><span class="toc-number">1.7.3.</span> <span class="toc-text">3. immediate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-deep"><span class="toc-number">1.7.4.</span> <span class="toc-text">4. deep</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%B2%BE%E7%A1%AE%E4%BE%A6%E5%90%AC%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9F%90%E4%B8%AA%E5%B1%9E%E6%80%A7"><span class="toc-number">1.7.5.</span> <span class="toc-text">5.精确侦听对象的某个属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.</span> <span class="toc-text">组合式API - 生命周期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%80%89%E9%A1%B9%E5%BC%8F%E5%AF%B9%E6%AF%94%E7%BB%84%E5%90%88%E5%BC%8F"><span class="toc-number">1.8.1.</span> <span class="toc-text">1. 选项式对比组合式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.8.2.</span> <span class="toc-text">2. 生命周期函数基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%89%A7%E8%A1%8C%E5%A4%9A%E6%AC%A1"><span class="toc-number">1.8.3.</span> <span class="toc-text">3. 执行多次</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI-%E7%88%B6%E5%AD%90%E9%80%9A%E4%BF%A1"><span class="toc-number">1.9.</span> <span class="toc-text">组合式API - 父子通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%88%B6%E4%BC%A0%E5%AD%90"><span class="toc-number">1.9.1.</span> <span class="toc-text">1. 父传子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AD%90%E4%BC%A0%E7%88%B6"><span class="toc-number">1.9.2.</span> <span class="toc-text">2. 子传父</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI-%E6%A8%A1%E7%89%88%E5%BC%95%E7%94%A8"><span class="toc-number">1.10.</span> <span class="toc-text">组合式API - 模版引用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.10.1.</span> <span class="toc-text">1. 基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-defineExpose"><span class="toc-number">1.10.2.</span> <span class="toc-text">2. defineExpose</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI-provide%E5%92%8Cinject"><span class="toc-number">1.11.</span> <span class="toc-text">组合式API - provide和inject</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%9C%E7%94%A8%E5%92%8C%E5%9C%BA%E6%99%AF"><span class="toc-number">1.11.1.</span> <span class="toc-text">1. 作用和场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%B7%A8%E5%B1%82%E4%BC%A0%E9%80%92%E6%99%AE%E9%80%9A%E6%95%B0%E6%8D%AE"><span class="toc-number">1.11.2.</span> <span class="toc-text">2. 跨层传递普通数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%B7%A8%E5%B1%82%E4%BC%A0%E9%80%92%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.11.3.</span> <span class="toc-text">3. 跨层传递响应式数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%B7%A8%E5%B1%82%E4%BC%A0%E9%80%92%E6%96%B9%E6%B3%95"><span class="toc-number">1.11.4.</span> <span class="toc-text">4. 跨层传递方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Pinia%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">Pinia入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFpinia"><span class="toc-number">2.1.</span> <span class="toc-text">什么是pinia</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%A9%BAVue%E9%A1%B9%E7%9B%AE%E5%B9%B6%E5%AE%89%E8%A3%85Pinia"><span class="toc-number">2.2.</span> <span class="toc-text">创建空Vue项目并安装Pinia</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E7%A9%BAVue%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.2.1.</span> <span class="toc-text">1. 创建空Vue项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85Pinia%E5%B9%B6%E6%B3%A8%E5%86%8C"><span class="toc-number">2.2.2.</span> <span class="toc-text">2. 安装Pinia并注册</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0counter"><span class="toc-number">2.3.</span> <span class="toc-text">实现counter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0getters"><span class="toc-number">2.4.</span> <span class="toc-text">实现getters</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5action"><span class="toc-number">2.5.</span> <span class="toc-text">异步action</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#storeToRefs%E4%BF%9D%E6%8C%81%E5%93%8D%E5%BA%94%E5%BC%8F%E8%A7%A3%E6%9E%84"><span class="toc-number">2.6.</span> <span class="toc-text">storeToRefs保持响应式解构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5"><span class="toc-number">3.</span> <span class="toc-text">项目起步</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%B9%B6%E6%95%B4%E7%90%86%E7%9B%AE%E5%BD%95"><span class="toc-number">3.1.</span> <span class="toc-text">创建项目并整理目录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#src%E7%9B%AE%E5%BD%95%E8%B0%83%E6%95%B4"><span class="toc-number">3.1.1.</span> <span class="toc-text">src目录调整</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jsconfig-json%E9%85%8D%E7%BD%AE%E5%88%AB%E5%90%8D%E8%B7%AF%E5%BE%84"><span class="toc-number">3.2.</span> <span class="toc-text">jsconfig.json配置别名路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elementPlus%E5%BC%95%E5%85%A5"><span class="toc-number">3.3.</span> <span class="toc-text">elementPlus引入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85elementPlus%E5%92%8C%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5%E6%8F%92%E4%BB%B6"><span class="toc-number">3.3.1.</span> <span class="toc-text">1. 安装elementPlus和自动导入插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5"><span class="toc-number">3.3.2.</span> <span class="toc-text">2. 配置自动按需导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95%E7%BB%84%E4%BB%B6"><span class="toc-number">3.3.3.</span> <span class="toc-text">3. 测试组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6elementPlus%E4%B8%BB%E9%A2%98"><span class="toc-number">3.4.</span> <span class="toc-text">定制elementPlus主题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85sass"><span class="toc-number">3.4.1.</span> <span class="toc-text">1. 安装sass</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%87%86%E5%A4%87%E5%AE%9A%E5%88%B6%E5%8C%96%E7%9A%84%E6%A0%B7%E5%BC%8F%E6%96%87%E4%BB%B6"><span class="toc-number">3.4.2.</span> <span class="toc-text">2. 准备定制化的样式文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">3.4.3.</span> <span class="toc-text">3. 自动导入配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios%E5%AE%89%E8%A3%85%E5%B9%B6%E7%AE%80%E5%8D%95%E5%B0%81%E8%A3%85"><span class="toc-number">3.5.</span> <span class="toc-text">axios安装并简单封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85axios"><span class="toc-number">3.5.1.</span> <span class="toc-text">1. 安装axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">3.5.2.</span> <span class="toc-text">2. 基础配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.3.</span> <span class="toc-text">3. 封装请求函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95"><span class="toc-number">3.5.4.</span> <span class="toc-text">4.进行测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%8D%E5%9C%A8%E5%BC%BA%E5%88%B6%E7%BB%84%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">3.6.</span> <span class="toc-text">添加不在强制组件重命名的配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">3.7.</span> <span class="toc-text">路由整体设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%BC%95%E5%85%A5%E5%92%8CError-Lens%E5%AE%89%E8%A3%85"><span class="toc-number">3.8.</span> <span class="toc-text">静态资源引入和Error Lens安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%BC%95%E5%85%A5"><span class="toc-number">3.8.1.</span> <span class="toc-text">1. 静态资源引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Error-Lens%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="toc-number">3.8.2.</span> <span class="toc-text">2. Error Lens插件安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scss%E5%8F%98%E9%87%8F%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5"><span class="toc-number">3.9.</span> <span class="toc-text">scss变量自动导入</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Layout%E9%A1%B5"><span class="toc-number">4.</span> <span class="toc-text">Layout页</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA"><span class="toc-number">4.1.</span> <span class="toc-text">组件结构快速搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87%E6%B8%B2%E6%9F%93"><span class="toc-number">4.2.</span> <span class="toc-text">字体图标渲染</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E5%AF%BC%E8%88%AA%E6%B8%B2%E6%9F%93"><span class="toc-number">4.3.</span> <span class="toc-text">一级导航渲染</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%B8%E9%A1%B6%E5%AF%BC%E8%88%AA%E4%BA%A4%E4%BA%92%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.4.</span> <span class="toc-text">吸顶导航交互实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E7%BB%84%E4%BB%B6%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84"><span class="toc-number">4.4.1.</span> <span class="toc-text">1. 准备组件静态结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%BB%9A%E5%8A%A8%E8%B7%9D%E7%A6%BB"><span class="toc-number">4.4.2.</span> <span class="toc-text">2. 获取滚动距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BB%A5%E6%BB%9A%E5%8A%A8%E8%B7%9D%E7%A6%BB%E5%81%9A%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6%E6%8E%A7%E5%88%B6%E7%BB%84%E4%BB%B6%E7%9B%92%E5%AD%90%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F"><span class="toc-number">4.4.3.</span> <span class="toc-text">3. 以滚动距离做判断条件控制组件盒子显示隐藏</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pinia%E4%BC%98%E5%8C%96%E9%87%8D%E5%A4%8D%E8%AF%B7%E6%B1%82"><span class="toc-number">4.5.</span> <span class="toc-text">Pinia优化重复请求</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Home%E9%A1%B5"><span class="toc-number">5.</span> <span class="toc-text">Home页</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84%E6%90%AD%E5%BB%BA%E5%92%8C%E5%88%86%E7%B1%BB%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.1.</span> <span class="toc-text">静态结构搭建和分类实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84%E5%88%9B%E5%BB%BA"><span class="toc-number">5.1.1.</span> <span class="toc-text">1. 整体结构创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%86%E7%B1%BB%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.1.2.</span> <span class="toc-text">2. 分类实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#banner%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.2.</span> <span class="toc-text">banner轮播图实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%86%9F%E6%82%89%E7%BB%84%E4%BB%B6"><span class="toc-number">5.2.1.</span> <span class="toc-text">1. 熟悉组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93%E7%BB%84%E4%BB%B6"><span class="toc-number">5.2.2.</span> <span class="toc-text">2. 获取数据渲染组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E6%9D%BF%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">5.3.</span> <span class="toc-text">面板组件封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BA%AF%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84"><span class="toc-number">5.3.1.</span> <span class="toc-text">1. 纯静态结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81"><span class="toc-number">5.3.2.</span> <span class="toc-text">2. 完整代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E9%B2%9C%E5%A5%BD%E7%89%A9%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.4.</span> <span class="toc-text">新鲜好物实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%A8%A1%E7%89%88"><span class="toc-number">5.4.1.</span> <span class="toc-text">1. 准备模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.4.2.</span> <span class="toc-text">2. 封装接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93%E6%A8%A1%E7%89%88"><span class="toc-number">5.4.3.</span> <span class="toc-text">3. 获取数据渲染模版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%BA%E6%B0%94%E6%8E%A8%E8%8D%90%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.5.</span> <span class="toc-text">人气推荐实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.5.1.</span> <span class="toc-text">1. 封装接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93%E6%A8%A1%E7%89%88"><span class="toc-number">5.5.2.</span> <span class="toc-text">2. 获取数据渲染模版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%87%92%E5%8A%A0%E8%BD%BD%E6%8C%87%E4%BB%A4%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.6.</span> <span class="toc-text">懒加载指令实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B0%81%E8%A3%85%E5%85%A8%E5%B1%80%E6%8C%87%E4%BB%A4"><span class="toc-number">5.6.1.</span> <span class="toc-text">1. 封装全局指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B3%A8%E5%86%8C%E5%85%A8%E5%B1%80%E6%8C%87%E4%BB%A4"><span class="toc-number">5.6.2.</span> <span class="toc-text">2. 注册全局指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BF%AE%E6%94%B9HomeHot"><span class="toc-number">5.6.3.</span> <span class="toc-text">3.修改HomeHot</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Product%E4%BA%A7%E5%93%81%E5%88%97%E8%A1%A8%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.7.</span> <span class="toc-text">Product产品列表实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93"><span class="toc-number">5.7.1.</span> <span class="toc-text">1. 基础数据渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">5.7.2.</span> <span class="toc-text">2. 图片懒加载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GoodsItem%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">5.8.</span> <span class="toc-text">GoodsItem组件封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B0%81%E8%A3%85%E7%BB%84%E4%BB%B6"><span class="toc-number">5.8.1.</span> <span class="toc-text">1. 封装组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">5.8.2.</span> <span class="toc-text">2. 使用组件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB%E9%A1%B5"><span class="toc-number">6.</span> <span class="toc-text">一级分类页</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84%E6%90%AD%E5%BB%BA%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">6.1.</span> <span class="toc-text">静态结构搭建和路由配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E5%88%86%E7%B1%BB%E7%BB%84%E4%BB%B6"><span class="toc-number">6.1.1.</span> <span class="toc-text">1. 准备分类组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1"><span class="toc-number">6.1.2.</span> <span class="toc-text">2. 配置路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E5%AF%BC%E8%88%AA%E5%8C%BA%E5%9F%9F%E9%93%BE%E6%8E%A5"><span class="toc-number">6.1.3.</span> <span class="toc-text">3. 配置导航区域链接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA%E6%B8%B2%E6%9F%93"><span class="toc-number">6.2.</span> <span class="toc-text">面包屑导航渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86%E7%BB%84%E4%BB%B6%E5%87%86%E5%A4%87%E6%A8%A1%E7%89%88"><span class="toc-number">6.2.1.</span> <span class="toc-text">1. 认识组件准备模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3-1"><span class="toc-number">6.2.2.</span> <span class="toc-text">2. 封装接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B8%B2%E6%9F%93%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA"><span class="toc-number">6.2.3.</span> <span class="toc-text">3. 渲染面包屑导航</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%B1%BBBanner%E6%B8%B2%E6%9F%93"><span class="toc-number">6.3.</span> <span class="toc-text">分类Banner渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%80%82%E9%85%8D%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.3.1.</span> <span class="toc-text">1. 适配接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BF%81%E7%A7%BB%E9%A6%96%E9%A1%B5Banner%E9%80%BB%E8%BE%91"><span class="toc-number">6.3.2.</span> <span class="toc-text">2. 迁移首页Banner逻辑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E6%BF%80%E6%B4%BB%E8%AE%BE%E7%BD%AE%E5%88%86%E7%B1%BB%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">6.4.</span> <span class="toc-text">导航激活设置分类列表渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AF%BC%E8%88%AA%E6%BF%80%E6%B4%BB%E7%8A%B6%E6%80%81%E8%AE%BE%E7%BD%AE"><span class="toc-number">6.4.1.</span> <span class="toc-text">1. 导航激活状态设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%86%E7%B1%BB%E6%95%B0%E6%8D%AE%E6%A8%A1%E7%89%88"><span class="toc-number">6.4.2.</span> <span class="toc-text">2. 分类数据模版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%BC%93%E5%AD%98%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="toc-number">6.5.</span> <span class="toc-text">路由缓存问题解决</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="toc-number">6.5.1.</span> <span class="toc-text">第一种方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="toc-number">6.5.2.</span> <span class="toc-text">第二种方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%9A%84%E5%87%BD%E6%95%B0%E6%8B%86%E5%88%86"><span class="toc-number">6.6.</span> <span class="toc-text">基于业务逻辑的函数拆分</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB"><span class="toc-number">7.</span> <span class="toc-text">二级分类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E4%B8%9A%E5%8A%A1%E8%AE%A4%E8%AF%86%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">7.1.</span> <span class="toc-text">整体业务认识和路由配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E7%BB%84%E4%BB%B6%E6%A8%A1%E7%89%88"><span class="toc-number">7.1.1.</span> <span class="toc-text">1. 准备组件模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%85%B3%E7%B3%BB"><span class="toc-number">7.1.2.</span> <span class="toc-text">2. 配置路由关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%B7%B3%E8%BD%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">7.1.3.</span> <span class="toc-text">3. 跳转配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%8C%85%E5%B1%91%E5%AF%BC%E8%88%AA%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.2.</span> <span class="toc-text">面包屑导航实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%8E%A5%E5%8F%A3"><span class="toc-number">7.2.1.</span> <span class="toc-text">1. 准备接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93%E6%A8%A1%E7%89%88-1"><span class="toc-number">7.2.2.</span> <span class="toc-text">2. 获取数据渲染模版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E5%9F%BA%E7%A1%80%E5%88%97%E8%A1%A8%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.3.</span> <span class="toc-text">分类基础列表实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%8E%A5%E5%8F%A3-1"><span class="toc-number">7.3.1.</span> <span class="toc-text">1. 准备接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%88%97%E8%A1%A8"><span class="toc-number">7.3.2.</span> <span class="toc-text">2. 获取数据列表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E7%AD%9B%E9%80%89%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.4.</span> <span class="toc-text">列表筛选实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E9%99%90%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.5.</span> <span class="toc-text">无限加载实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6%E8%B7%AF%E7%94%B1%E8%A1%8C%E4%B8%BA"><span class="toc-number">7.6.</span> <span class="toc-text">定制路由行为</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B0%E9%B2%9C%E5%A5%BD%E7%89%A9%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85"><span class="toc-number">8.</span> <span class="toc-text">新鲜好物商品详情</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E8%AE%A4%E8%AF%86%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">8.1.</span> <span class="toc-text">整体认识和路由配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E7%BB%84%E4%BB%B6%E6%A8%A1%E7%89%88-1"><span class="toc-number">8.1.1.</span> <span class="toc-text">1. 准备组件模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-1"><span class="toc-number">8.1.2.</span> <span class="toc-text">2. 配置路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BB%91%E5%AE%9A%E6%A8%A1%E7%89%88%E6%B5%8B%E8%AF%95%E8%B7%B3%E8%BD%AC"><span class="toc-number">8.1.3.</span> <span class="toc-text">3. 绑定模版测试跳转</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE"><span class="toc-number">8.2.</span> <span class="toc-text">渲染基础数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3-1"><span class="toc-number">8.2.1.</span> <span class="toc-text">1. 封装接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93%E6%A8%A1%E7%89%88-2"><span class="toc-number">8.2.2.</span> <span class="toc-text">2. 获取数据渲染模版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%A6%9C%E5%8C%BA%E5%9F%9F"><span class="toc-number">8.3.</span> <span class="toc-text">热榜区域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B8%B2%E6%9F%93%E5%9F%BA%E7%A1%80%E7%83%AD%E6%A6%9C%E6%95%B0%E6%8D%AE"><span class="toc-number">8.3.1.</span> <span class="toc-text">1. 渲染基础热榜数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%82%E9%85%8D%E7%83%AD%E6%A6%9C%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.3.2.</span> <span class="toc-text">2. 适配热榜类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%80%82%E9%85%8D%E7%83%AD%E6%A6%9Ctitle"><span class="toc-number">8.3.3.</span> <span class="toc-text">3. 适配热榜title</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B1%87%E6%80%BB%E7%83%AD%E6%A6%9C%E4%BB%A3%E7%A0%81"><span class="toc-number">8.3.4.</span> <span class="toc-text">4.汇总热榜代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E9%A2%84%E8%A7%88%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">8.4.</span> <span class="toc-text">图片预览组件封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B0%8F%E5%9B%BE%E5%88%87%E6%8D%A2%E5%A4%A7%E5%9B%BE%E6%98%BE%E7%A4%BA"><span class="toc-number">8.4.1.</span> <span class="toc-text">1. 小图切换大图显示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%94%BE%E5%A4%A7%E9%95%9C%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0"><span class="toc-number">8.4.2.</span> <span class="toc-text">2. 放大镜效果实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SKU%E7%BB%84%E4%BB%B6%E7%86%9F%E6%82%89"><span class="toc-number">8.5.</span> <span class="toc-text">SKU组件熟悉</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6%E7%BB%9F%E4%B8%80%E6%8F%92%E4%BB%B6%E5%8C%96"><span class="toc-number">8.6.</span> <span class="toc-text">全局组件统一插件化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8F%92%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-number">8.6.1.</span> <span class="toc-text">1. 插件化开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8F%92%E4%BB%B6%E6%B3%A8%E5%86%8C"><span class="toc-number">8.6.2.</span> <span class="toc-text">2. 插件注册</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%A1%B5"><span class="toc-number">9.</span> <span class="toc-text">登录页</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E8%AE%A4%E8%AF%86%E5%92%8C%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE-1"><span class="toc-number">9.1.</span> <span class="toc-text">整体认识和路由配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%A8%A1%E7%89%88-1"><span class="toc-number">9.1.1.</span> <span class="toc-text">1. 准备模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC"><span class="toc-number">9.1.2.</span> <span class="toc-text">2. 配置路由跳转</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.2.</span> <span class="toc-text">表单校验实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A0%A1%E9%AA%8C%E8%A6%81%E6%B1%82"><span class="toc-number">9.2.1.</span> <span class="toc-text">1. 校验要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.2.2.</span> <span class="toc-text">2. 代码实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E5%9F%BA%E7%A1%80%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.3.</span> <span class="toc-text">登录基础业务实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pinia%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE"><span class="toc-number">9.4.</span> <span class="toc-text">Pinia管理用户数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E5%8C%96%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE"><span class="toc-number">9.4.1.</span> <span class="toc-text">持久化用户数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8%E6%90%BA%E5%B8%A6token"><span class="toc-number">9.5.</span> <span class="toc-text">请求拦截器携带token</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.6.</span> <span class="toc-text">退出登录实现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">10.</span> <span class="toc-text">购物车</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">10.1.</span> <span class="toc-text">本地购物车</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">10.1.1.</span> <span class="toc-text">1. 添加购物车</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%B4%E9%83%A8%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">10.1.2.</span> <span class="toc-text">2. 头部购物车</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%A4%B4%E9%83%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%BB%84%E4%BB%B6%E6%A8%A1%E7%89%88"><span class="toc-number">10.1.2.1.</span> <span class="toc-text">2.1. 头部购物车组件模版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E6%B8%B2%E6%9F%93%E5%A4%B4%E9%83%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%95%B0%E6%8D%AE"><span class="toc-number">10.1.2.2.</span> <span class="toc-text">2.2 渲染头部购物车数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">10.1.2.3.</span> <span class="toc-text">2.3 删除功能实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%97%E8%A1%A8%E8%B4%AD%E7%89%A9%E8%BD%A6-%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9%E6%B8%B2%E6%9F%93"><span class="toc-number">10.1.3.</span> <span class="toc-text">3. 列表购物车-基础内容渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%87%86%E5%A4%87%E6%A8%A1%E7%89%88"><span class="toc-number">10.1.3.1.</span> <span class="toc-text">3.1. 准备模版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E7%BB%91%E5%AE%9A%E8%B7%AF%E7%94%B1"><span class="toc-number">10.1.3.2.</span> <span class="toc-text">3.2. 绑定路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E6%B8%B2%E6%9F%93%E5%88%97%E8%A1%A8"><span class="toc-number">10.1.3.3.</span> <span class="toc-text">3.3. 渲染列表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%97%E8%A1%A8%E8%B4%AD%E7%89%A9%E8%BD%A6-%E5%8D%95%E9%80%89%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">10.1.4.</span> <span class="toc-text">4. 列表购物车-单选功能实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%97%E8%A1%A8%E8%B4%AD%E7%89%A9%E8%BD%A6-%E5%85%A8%E9%80%89%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">10.1.5.</span> <span class="toc-text">5. 列表购物车-全选功能实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%97%E8%A1%A8%E8%B4%AD%E7%89%A9%E8%BD%A6-%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">10.1.6.</span> <span class="toc-text">6. 列表购物车-统计数据功能实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">10.2.</span> <span class="toc-text">接口购物车</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">10.2.0.1.</span> <span class="toc-text">1. 加入购物车</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%88%A0%E9%99%A4%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">10.2.0.2.</span> <span class="toc-text">2. 删除购物车</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A2%E5%8D%95%E9%A1%B5"><span class="toc-number">11.</span> <span class="toc-text">订单页</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%92%8C%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93"><span class="toc-number">11.1.</span> <span class="toc-text">路由配置和基础数据渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E7%BB%84%E4%BB%B6%E6%A8%A1%E7%89%88-2"><span class="toc-number">11.1.1.</span> <span class="toc-text">1. 准备组件模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-2"><span class="toc-number">11.1.2.</span> <span class="toc-text">2. 配置路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3"><span class="toc-number">11.1.3.</span> <span class="toc-text">3. 封装接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE"><span class="toc-number">11.1.4.</span> <span class="toc-text">4. 渲染数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E5%9C%B0%E5%9D%80-%E6%89%93%E5%BC%80%E5%BC%B9%E6%A1%86%E4%BA%A4%E4%BA%92"><span class="toc-number">11.2.</span> <span class="toc-text">切换地址-打开弹框交互</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E5%BC%B9%E6%A1%86%E6%A8%A1%E7%89%88"><span class="toc-number">11.2.1.</span> <span class="toc-text">1. 准备弹框模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8E%A7%E5%88%B6%E5%BC%B9%E6%A1%86%E6%89%93%E5%BC%80"><span class="toc-number">11.2.2.</span> <span class="toc-text">2. 控制弹框打开</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E5%9C%B0%E5%9D%80-%E5%9C%B0%E5%9D%80%E5%88%87%E6%8D%A2%E4%BA%A4%E4%BA%92"><span class="toc-number">11.3.</span> <span class="toc-text">切换地址-地址切换交互</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%AE%A2%E5%8D%95%E7%94%9F%E6%88%90%E8%AE%A2%E5%8D%95ID"><span class="toc-number">11.4.</span> <span class="toc-text">创建订单生成订单ID</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%94%AF%E4%BB%98%E9%A1%B5%E7%BB%84%E4%BB%B6%E5%B9%B6%E7%BB%91%E5%AE%9A%E8%B7%AF%E7%94%B1"><span class="toc-number">11.4.1.</span> <span class="toc-text">1. 准备支付页组件并绑定路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%87%86%E5%A4%87%E7%94%9F%E6%88%90%E8%AE%A2%E5%8D%95%E6%8E%A5%E5%8F%A3"><span class="toc-number">11.4.2.</span> <span class="toc-text">2. 准备生成订单接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3%E6%90%BA%E5%B8%A6id%E8%B7%B3%E8%BD%AC%E8%B7%AF%E7%94%B1"><span class="toc-number">11.4.3.</span> <span class="toc-text">3. 调用接口携带id跳转路由</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%94%AF%E4%BB%98%E9%A1%B5"><span class="toc-number">12.</span> <span class="toc-text">支付页</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">13.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93"><span class="toc-number">13.1.</span> <span class="toc-text">基础数据渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%8E%A5%E5%8F%A3-2"><span class="toc-number">13.1.1.</span> <span class="toc-text">1. 准备接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93%E5%86%85%E5%AE%B9"><span class="toc-number">13.1.2.</span> <span class="toc-text">2. 获取数据渲染内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%AF%E4%BB%98%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">13.2.</span> <span class="toc-text">支付功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%94%AF%E4%BB%98%E6%90%BA%E5%B8%A6%E5%8F%82%E6%95%B0"><span class="toc-number">13.2.1.</span> <span class="toc-text">1. 支付携带参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%94%AF%E4%BB%98%E5%AE%9D%E6%B2%99%E7%AE%B1%E8%B4%A6%E5%8F%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">13.2.2.</span> <span class="toc-text">2. 支付宝沙箱账号信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%AF%E4%BB%98%E7%BB%93%E6%9E%9C%E9%A1%B5%E5%B1%95%E7%A4%BA"><span class="toc-number">13.3.</span> <span class="toc-text">支付结果页展示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%A8%A1%E7%89%88-2"><span class="toc-number">13.3.1.</span> <span class="toc-text">1. 准备模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%91%E5%AE%9A%E8%B7%AF%E7%94%B1"><span class="toc-number">13.3.2.</span> <span class="toc-text">2. 绑定路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE"><span class="toc-number">13.3.3.</span> <span class="toc-text">3. 渲染数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%80%92%E8%AE%A1%E6%97%B6%E9%80%BB%E8%BE%91%E5%87%BD%E6%95%B0%E5%B0%81%E8%A3%85"><span class="toc-number">13.4.</span> <span class="toc-text">倒计时逻辑函数封装</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%9A%E5%91%98%E4%B8%AD%E5%BF%83"><span class="toc-number">14.</span> <span class="toc-text">会员中心</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-1"><span class="toc-number">15.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">15.1.</span> <span class="toc-text">路由配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E8%B7%AF%E7%94%B1%E6%A8%A1%E7%89%88"><span class="toc-number">15.1.1.</span> <span class="toc-text">1. 准备路由模版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-3"><span class="toc-number">15.1.2.</span> <span class="toc-text">2. 配置路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%87%86%E5%A4%87%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E5%92%8C%E6%88%91%E7%9A%84%E8%AE%A2%E5%8D%95%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6"><span class="toc-number">15.1.3.</span> <span class="toc-text">3. 准备个人信息和我的订单路由组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE%E4%B8%89%E7%BA%A7%E8%B7%AF%E7%94%B1"><span class="toc-number">15.1.4.</span> <span class="toc-text">4. 配置三级路由</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E4%BF%A1%E6%81%AF%E6%B8%B2%E6%9F%93"><span class="toc-number">15.2.</span> <span class="toc-text">个人中心信息渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8Pinia%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">15.2.1.</span> <span class="toc-text">1. 使用Pinia数据渲染个人信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B0%81%E8%A3%85%E7%8C%9C%E4%BD%A0%E5%96%9C%E6%AC%A2%E6%8E%A5%E5%8F%A3"><span class="toc-number">15.2.2.</span> <span class="toc-text">2. 封装猜你喜欢接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B8%B2%E6%9F%93%E7%8C%9C%E4%BD%A0%E5%96%9C%E6%AC%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">15.2.3.</span> <span class="toc-text">3. 渲染猜你喜欢数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%91%E7%9A%84%E8%AE%A2%E5%8D%95"><span class="toc-number">15.3.</span> <span class="toc-text">我的订单</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">15.3.1.</span> <span class="toc-text">1. 基础列表渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-tab%E5%88%87%E6%8D%A2%E5%AE%9E%E7%8E%B0"><span class="toc-number">15.3.2.</span> <span class="toc-text">2. tab切换实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%86%E9%A1%B5%E9%80%BB%E5%AE%9E%E7%8E%B0"><span class="toc-number">15.3.3.</span> <span class="toc-text">3. 分页逻实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%86%E8%8A%82%E4%BC%98%E5%8C%96"><span class="toc-number">15.4.</span> <span class="toc-text">细节优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%BB%98%E8%AE%A4%E4%B8%89%E7%BA%A7%E8%B7%AF%E7%94%B1%E8%AE%BE%E7%BD%AE"><span class="toc-number">15.4.1.</span> <span class="toc-text">1. 默认三级路由设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AE%A2%E5%8D%95%E7%8A%B6%E6%80%81%E6%98%BE%E7%A4%BA%E9%80%82%E9%85%8D"><span class="toc-number">15.4.2.</span> <span class="toc-text">2. 订单状态显示适配</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%E9%83%A8%E5%88%86"><span class="toc-number">16.</span> <span class="toc-text">拓展部分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Sku%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">16.1.</span> <span class="toc-text">Sku组件封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E6%A8%A1%E7%89%88%E6%B8%B2%E6%9F%93%E8%A7%84%E6%A0%BC%E6%95%B0%E6%8D%AE"><span class="toc-number">16.1.1.</span> <span class="toc-text">1. 准备模版渲染规格数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%89%E4%B8%AD%E5%92%8C%E5%8F%96%E6%B6%88%E9%80%89%E4%B8%AD%E5%AE%9E%E7%8E%B0"><span class="toc-number">16.1.2.</span> <span class="toc-text">2. 选中和取消选中实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%A7%84%E6%A0%BC%E7%A6%81%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">16.1.3.</span> <span class="toc-text">3. 规格禁用功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E6%80%9D%E8%B7%AF-%E5%88%86%E6%9E%90"><span class="toc-number">16.1.3.1.</span> <span class="toc-text">整体思路 分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E8%B7%AF%E5%BE%84%E5%AD%97%E5%85%B8"><span class="toc-number">16.1.3.2.</span> <span class="toc-text">生成路径字典</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E8%B7%AF%E5%BE%84%E5%AD%97%E5%85%B8%E8%AE%BE%E7%BD%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E7%8A%B6%E6%80%81"><span class="toc-number">16.1.3.3.</span> <span class="toc-text">根据路径字典设置初始化状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E8%B7%AF%E5%BE%84%E5%AD%97%E5%85%B8%E8%AE%BE%E7%BD%AE%E7%BB%84%E5%90%88%E7%8A%B6%E6%80%81"><span class="toc-number">16.1.3.4.</span> <span class="toc-text">根据路径字典设置组合状态</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BA%A7%E5%87%BAProp%E6%95%B0%E6%8D%AE"><span class="toc-number">16.1.4.</span> <span class="toc-text">4. 产出Prop数据</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/18/Java%E9%9B%86%E5%90%88%E8%AF%A6%E8%A7%A3/" title="Java集合详解">Java集合详解</a><time datetime="2023-08-18T07:12:06.000Z" title="发表于 2023-08-18 15:12:06">2023-08-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/08/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E5%85%A8%E9%9D%A2%E6%8F%AD%E7%A7%98/" title="Redis网络模型全面揭秘">Redis网络模型全面揭秘</a><time datetime="2023-08-08T03:29:32.000Z" title="发表于 2023-08-08 11:29:32">2023-08-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/08/%E5%BD%BB%E5%BA%95%E5%BC%84%E6%87%82Redis%E7%9A%84%E5%86%85%E5%AD%98%E7%AD%96%E7%95%A5/" title="彻底弄懂Redis的内存策略">彻底弄懂Redis的内存策略</a><time datetime="2023-08-08T03:05:02.000Z" title="发表于 2023-08-08 11:05:02">2023-08-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/08/Redis%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE-RESP%E5%8D%8F%E8%AE%AE/" title="Redis通信协议-RESP协议">Redis通信协议-RESP协议</a><time datetime="2023-08-08T02:15:38.000Z" title="发表于 2023-08-08 10:15:38">2023-08-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/07/%E8%AF%A6%E8%A7%A3Redis%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="详解Redis底层数据结构">详解Redis底层数据结构</a><time datetime="2023-08-07T05:48:31.000Z" title="发表于 2023-08-07 13:48:31">2023-08-07</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By 小白菜</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎来到小白菜的blog~</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script src="/js/sakura.js"></script><script src="https://myhkw.cn/player/js/player.js" id="myhk" key="159611061656" m="1"></script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>