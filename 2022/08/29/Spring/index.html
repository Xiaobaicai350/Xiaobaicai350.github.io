<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Spring | 是小白菜哦</title><meta name="keywords" content="后端框架"><meta name="author" content="小白菜"><meta name="copyright" content="小白菜"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Spring5 框架概述  1、Spring 是轻量级的开源的 JavaEE 框架2、Spring 可以解决企业应用开发的复杂性3、Spring 有两个核心部分：IOC 和 Aop（1）IOC：控制反转，把创建对象过程交给 Spring 进行管理（2）Aop：面向切面，不修改源代码进行功能增强 4、Spring 特点 （1）方便解耦，简化开发（2）Aop 编程支持（3）方便程序测试（4）方便和其他">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring">
<meta property="og:url" content="http://example.com/2022/08/29/Spring/index.html">
<meta property="og:site_name" content="是小白菜哦">
<meta property="og:description" content="Spring5 框架概述  1、Spring 是轻量级的开源的 JavaEE 框架2、Spring 可以解决企业应用开发的复杂性3、Spring 有两个核心部分：IOC 和 Aop（1）IOC：控制反转，把创建对象过程交给 Spring 进行管理（2）Aop：面向切面，不修改源代码进行功能增强 4、Spring 特点 （1）方便解耦，简化开发（2）Aop 编程支持（3）方便程序测试（4）方便和其他">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hakaimg.com/i/2022/08/30/isgbxw.jpg">
<meta property="article:published_time" content="2022-08-29T15:26:01.000Z">
<meta property="article:modified_time" content="2023-04-22T12:22:52.756Z">
<meta property="article:author" content="小白菜">
<meta property="article:tag" content="后端框架">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hakaimg.com/i/2022/08/30/isgbxw.jpg"><link rel="shortcut icon" href="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/132124.png"><link rel="canonical" href="http://example.com/2022/08/29/Spring/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Spring',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-22 20:22:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><script src="/live2d-widget/autoload.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/plugins.min.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/pic.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://hakaimg.com/i/2022/08/30/isgbxw.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">是小白菜哦</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Spring</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-29T15:26:01.000Z" title="发表于 2022-08-29 23:26:01">2022-08-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-22T12:22:52.756Z" title="更新于 2023-04-22 20:22:52">2023-04-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Spring"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>Spring5 框架概述</p>
<p><img src="/../pic/image-20220521153737228.png" alt="image-20220521153737228"></p>
<p>1、Spring 是轻量级的开源的 JavaEE 框架<br>2、Spring 可以解决企业应用开发的复杂性<br>3、Spring 有两个核心部分：IOC 和 Aop<br>（1）IOC：控制反转，把创建对象过程交给 Spring 进行管理<br>（2）Aop：面向切面，不修改源代码进行功能增强</p>
<p>4、Spring 特点</p>
<p>（1）方便解耦，简化开发<br>（2）Aop 编程支持<br>（3）方便程序测试<br>（4）方便和其他框架进行整合<br>（5）方便进行事务操作<br>（6）降低 API 开发难度</p>
<h1 id="IOC（概念和原理）"><a href="#IOC（概念和原理）" class="headerlink" title="IOC（概念和原理）"></a>IOC（概念和原理）</h1><p>1、什么是 IOC<br>（1）控制反转：由主动new产生对象转换为由<strong>外部</strong>提供对象，此过程中对象创建控制权转移到<strong>外部</strong><br>（2）使用 IOC 目的：为了耦合度降低<br>（3）做入门案例就是 IOC 实现</p>
<p>（4）spring技术提供了一个容器，称为<strong>IOC容器</strong>，用来充当IOC思想的<strong>“外部”</strong></p>
<p>（5）IOC管理了对象的创建和初始化的工作，被创建或被管理的对象在IOC容器内统称为<strong>Bean</strong></p>
<p>2、IOC 底层原理<br>（1）xml 解析、工厂模式、反射<br>3、画图讲解 IOC 底层原理</p>
<p><img src="/../pic/image-20220505221048565.png" alt="image-20220505221048565"></p>
<h2 id="DI-Dependency-Injection-依赖注入"><a href="#DI-Dependency-Injection-依赖注入" class="headerlink" title="DI(Dependency Injection)依赖注入"></a>DI(Dependency Injection)依赖注入</h2><p>在容器中建立bean和bean之间的依赖关系的整个过程，称为依赖注入</p>
<h2 id="IOC核心概念"><a href="#IOC核心概念" class="headerlink" title="IOC核心概念"></a>IOC核心概念</h2><p><img src="/../pic/image-20220521155133198.png" alt="image-20220521155133198"></p>
<h2 id="IOC（BeanFactory-接口）"><a href="#IOC（BeanFactory-接口）" class="headerlink" title="IOC（BeanFactory 接口）"></a>IOC（BeanFactory 接口）</h2><p>1、IOC 思想基于 IOC 容器完成，IOC 容器底层就是对象工厂<br>2、Spring 提供 IOC 容器实现两种方式：（两个接口）</p>
<p>（1）BeanFactory：IOC 容器基本实现，是 Spring 内部的使用接口，不提供开发人员进行使用</p>
<p>特点是：加载配置文件时候不会创建对象，在获取对象（使用）才去创建对象</p>
<p>  （2）ApplicationContext：BeanFactory 接口的子接口，提供更多更强大的功能，一般由开发人员进行使用</p>
<p>特点是：加载配置文件时候就会把在配置文件对象进行创建<br>3、ApplicationContext 接口有实现类</p>
<p><img src="/../pic/image-20220505221341736.png" alt="image-20220505221341736"></p>
<p>他们的区别是：</p>
<p>FileSystemXmlApplicationContext的参数写的是盘路径，也就是绝对路径</p>
<p>ClassPathXmlApplicationContext的参数写的是类路径，是src下的，从根路径开始找的</p>
<h2 id="IOC-操作-Bean-管理（概念）"><a href="#IOC-操作-Bean-管理（概念）" class="headerlink" title="IOC 操作 Bean 管理（概念）"></a><strong>IOC</strong> <strong>操作</strong> <strong>Bean</strong> <strong>管理（概念）</strong></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、什么是 Bean 管理</span><br><span class="line">	Bean 管理指的是两个操作</span><br><span class="line">        （1）Spring 创建对象</span><br><span class="line">        （2）Spirng 注入属性</span><br><span class="line">2、Bean 管理操作有两种方式</span><br><span class="line">（1）基于 xml 配置文件方式实现</span><br><span class="line">（2）基于注解方式实现</span><br></pre></td></tr></table></figure>

<h3 id="IOC-操作-Bean-管理（基于-xml-方式）"><a href="#IOC-操作-Bean-管理（基于-xml-方式）" class="headerlink" title="IOC 操作 Bean 管理（基于 xml 方式）"></a><strong>IOC</strong> <strong>操作</strong> <strong>Bean</strong> <strong>管理（基于</strong> <strong>xml</strong> <strong>方式）</strong></h3><h4 id="1-基于XML创建对象"><a href="#1-基于XML创建对象" class="headerlink" title="1.基于XML创建对象"></a>1.基于XML创建对象</h4><p><img src="/../pic/image-20220505221437039.png" alt="image-20220505221437039"></p>
<p>​		（1）在 spring的xml 配置文件中，使用 bean 标签，标签里面添加对应属性，就可以实现对象创建<br>​		（2）在 bean 标签有很多属性，介绍常用的属性</p>
<ul>
<li><p>id 属性：	 唯一标识</p>
</li>
<li><p>class 属性：类的全路径（包和类的路径）</p>
<p>（3）创建对象时候，默认也是执行无参数构造方法完成对象创建</p>
</li>
</ul>
<h4 id="2-基于XML注入属性"><a href="#2-基于XML注入属性" class="headerlink" title="2.基于XML注入属性"></a>2.基于XML注入属性</h4><p>（1）DI： DI是IOC的一种具体实现，表示依赖注入，就是注入属性</p>
<h5 id="第一种注入方式：使用-set-方法进行注入-重点"><a href="#第一种注入方式：使用-set-方法进行注入-重点" class="headerlink" title="第一种注入方式：使用 set 方法进行注入(重点)"></a>第一种注入方式：使用 set 方法进行注入(重点)</h5><p>（1） 创建类，定义属性和对应的 set 方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">演示使用 set 方法进行注入属性</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">     <span class="comment">//创建属性</span></span><br><span class="line">     <span class="keyword">private</span> String bname;</span><br><span class="line">     <span class="keyword">private</span> String bauthor;</span><br><span class="line">     <span class="comment">//创建属性对应的 set 方法</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBname</span><span class="params">(String bname)</span> &#123;</span><br><span class="line">   		  	<span class="built_in">this</span>.bname = bname;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBauthor</span><span class="params">(String bauthor)</span> &#123;</span><br><span class="line">        	<span class="built_in">this</span>.bauthor = bauthor;</span><br><span class="line">     &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> （2）在 spring 配置文件配置对象创建，配置属性注入</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--2 set 方法注入属性--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.Book&quot;</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        使用 property 完成属性注入 property就是属性</span></span><br><span class="line"><span class="comment">             name：类里面属性名称</span></span><br><span class="line"><span class="comment">             value：向属性注入的值</span></span><br><span class="line"><span class="comment">			这些默认调用的是成员变量的set方法</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;易筋经&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bauthor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;达摩老祖&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br></pre></td></tr></table></figure>



<h5 id="第二种注入方式：使用有参数构造（构造器）进行注入（无set方法用这个）"><a href="#第二种注入方式：使用有参数构造（构造器）进行注入（无set方法用这个）" class="headerlink" title="第二种注入方式：使用有参数构造（构造器）进行注入（无set方法用这个）"></a>第二种注入方式：使用有参数构造（构造器）进行注入（无set方法用这个）</h5><p>（1）创建类，定义属性，创建属性对应有参数构造方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">使用有参数构造注入</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="keyword">private</span> String oname;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="comment">//有参数构造</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">(String oname,String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.oname = oname;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）在 spring 配置文件中进行配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--3 有参数构造注入属性--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.Orders&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;电脑&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;China&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h5 id="第三种注入方式：p-名称空间注入（了解）"><a href="#第三种注入方式：p-名称空间注入（了解）" class="headerlink" title="第三种注入方式：p 名称空间注入（了解）"></a>第三种注入方式：p 名称空间注入（了解）</h5><p>（1）使用 p 名称空间注入，可以简化基于 xml 配置方式<br>第一步 添加 p 名称空间在配置文件中<br>第二步 进行属性注入，在 bean 标签里面进行操作</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--2 set 方法注入属性--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.Book&quot;</span> <span class="attr">p:bname</span>=<span class="string">&quot;九阳神功&quot;</span> <span class="attr">p:bauthor</span>=<span class="string">&quot;无名氏&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="IOC-操作-Bean-管理（XML注入其他类型属性）"><a href="#IOC-操作-Bean-管理（XML注入其他类型属性）" class="headerlink" title="IOC 操作 Bean 管理（XML注入其他类型属性）"></a><strong>IOC</strong> <strong>操作</strong> <strong>Bean</strong> 管理（XML注入其他类型属性）</h3><h4 id="1、字面量"><a href="#1、字面量" class="headerlink" title="1、字面量"></a>1、字面量</h4><p>可以在成员属性后直接赋值</p>
<h4 id="（1）null-值（给属性赋空值）"><a href="#（1）null-值（给属性赋空值）" class="headerlink" title="（1）null 值（给属性赋空值）"></a>（1）null 值（给属性赋空值）</h4><p>利用null标签</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--null 值--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h4 id="（2）属性值包含特殊符号"><a href="#（2）属性值包含特殊符号" class="headerlink" title="（2）属性值包含特殊符号"></a>（2）属性值包含特殊符号</h4><p>如果要把《南京》赋值给成员属性，我们不可以直接用大于小于号，需要重新想办法</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--属性值包含特殊符号</span></span><br><span class="line"><span class="comment"> 1 把&lt;&gt;进行转义 &amp;lt; &amp;gt;这两个是大于小于号的转义符号</span></span><br><span class="line"><span class="comment"> 2 把带特殊符号内容写到 CDATA结构里面</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">        &lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h4 id="2、注入属性-外部-bean"><a href="#2、注入属性-外部-bean" class="headerlink" title="2、注入属性-外部 bean"></a>2、注入属性-外部 bean</h4><p>（1）创建两个类 service 类和 dao 类 </p>
<p>（2）在 service 调用 dao 里面的方法</p>
<p>（3）在 spring 配置文件中进行配置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//创建 UserDao 类型属性，生成 set 方法</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add...............&quot;</span>);</span><br><span class="line">        <span class="comment">//调用dao的方法</span></span><br><span class="line">        userDao.update();</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>在 spring 配置文件中进行配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--先创建dao对象--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.dao.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- service 的创建--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.service.UserService&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		注入 userDao 对象</span></span><br><span class="line"><span class="comment">        		 name 属性：类里面属性名称</span></span><br><span class="line"><span class="comment">        		 ref 属性：创建 userDao 对象 bean 标签 id 值</span></span><br><span class="line"><span class="comment"> 	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="3、注入属性-内部-bean"><a href="#3、注入属性-内部-bean" class="headerlink" title="3、注入属性-内部 bean"></a>3、注入属性-内部 bean</h4><p><img src="/../pic/image-20220521160914712.png" alt="image-20220521160914712"></p>
<h4 id="（1）举个例子"><a href="#（1）举个例子" class="headerlink" title="（1）举个例子"></a>（1）举个例子</h4><p>一对多关系：部门和员工<br>一个部门有多个员工，一个员工属于一个部门<br>部门是一，员工是多</p>
<h4 id="（2）在实体类之间表示一对多关系，员工表示所属部门，使用对象类型属性进行表示"><a href="#（2）在实体类之间表示一对多关系，员工表示所属部门，使用对象类型属性进行表示" class="headerlink" title="（2）在实体类之间表示一对多关系，员工表示所属部门，使用对象类型属性进行表示"></a>（2）在实体类之间表示一对多关系，员工表示所属部门，使用对象类型属性进行表示</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//部门类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dept</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String dname;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDname</span><span class="params">(String dname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dname = dname;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//员工类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String ename;<span class="comment">//员工姓名</span></span><br><span class="line">    <span class="keyword">private</span> String gender;<span class="comment">//员工性别</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//员工属于某一个部门，使用对象形式表示</span></span><br><span class="line">    <span class="keyword">private</span> Dept dept;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDept</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dept = dept;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEname</span><span class="params">(String ename)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ename = ename;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="（3）在-spring-配置文件中进行配置"><a href="#（3）在-spring-配置文件中进行配置" class="headerlink" title="（3）在 spring 配置文件中进行配置"></a>（3）在 spring 配置文件中进行配置</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--内部 bean--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lucy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--设置对象类型属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;安保部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br></pre></td></tr></table></figure>



<h4 id="4、注入属性-级联赋值"><a href="#4、注入属性-级联赋值" class="headerlink" title="4、注入属性-级联赋值"></a>4、注入属性-级联赋值</h4><h5 id="（1）第一种写法"><a href="#（1）第一种写法" class="headerlink" title="（1）第一种写法"></a>（1）第一种写法</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--级联赋值--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;财务部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lucy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--级联赋值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br></pre></td></tr></table></figure>



<h5 id="（2）第二种写法"><a href="#（2）第二种写法" class="headerlink" title="（2）第二种写法"></a>（2）第二种写法</h5><p><strong>dept.dname默认调用的是下面的这个方法</strong></p>
<p><img src="/../pic/image-20220505221636822.png" alt="image-20220505221636822"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--级联赋值--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lucy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--级联赋值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;技术部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;财务部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="IOC操作Bean管理（XML注入集合类型）"><a href="#IOC操作Bean管理（XML注入集合类型）" class="headerlink" title="IOC操作Bean管理（XML注入集合类型）"></a>IOC操作Bean管理（XML注入集合类型）</h3><h4 id="1、注入数组类型属性"><a href="#1、注入数组类型属性" class="headerlink" title="1、注入数组类型属性"></a>1、注入数组类型属性</h4><h4 id="2、注入-List-集合类型属性"><a href="#2、注入-List-集合类型属性" class="headerlink" title="2、注入 List 集合类型属性"></a>2、注入 List 集合类型属性</h4><h4 id="3、注入-Map-集合类型属性"><a href="#3、注入-Map-集合类型属性" class="headerlink" title="3、注入 Map 集合类型属性"></a>3、注入 Map 集合类型属性</h4><p>（1）创建类，定义数组、list、map、set 类型属性，生成对应 set 方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stu</span> &#123;</span><br><span class="line">    <span class="comment">//1 数组类型属性</span></span><br><span class="line">    <span class="keyword">private</span> String[] courses;</span><br><span class="line">    <span class="comment">//2 list 集合类型属性</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line">    <span class="comment">//3 map 集合类型属性</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; maps;</span><br><span class="line">    <span class="comment">//4 set 集合类型属性</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; sets;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSets</span><span class="params">(Set&lt;String&gt; sets)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sets = sets;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourses</span><span class="params">(String[] courses)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.courses = courses;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMaps</span><span class="params">(Map&lt;String, String&gt; maps)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maps = maps;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）在 spring 配置文件进行配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 集合类型属性注入--&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.collectiontype.Stu&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--数组类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>java 课程<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>数据库课程<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--list 类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>小三<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--map 类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maps&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;JAVA&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;PHP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--set 类型属性注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sets&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>MySQL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Redis<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4、在集合里面设置对象类型值"><a href="#4、在集合里面设置对象类型值" class="headerlink" title="4、在集合里面设置对象类型值"></a>4、在集合里面设置对象类型值</h4><p><img src="/../pic/image-20220506002857754.png" alt="image-20220506002857754"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建多个 course 对象--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring5 框架&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.collectiontype.Course&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;MyBatis 框架&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--注入 list 集合类型，值是对象--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;course1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;course2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5、把集合注入部分提取出来"><a href="#5、把集合注入部分提取出来" class="headerlink" title="5、把集合注入部分提取出来"></a>5、把集合注入部分提取出来</h4><p><strong>注入部分可以直接注入一个集合！！！</strong></p>
<p><img src="/../pic/image-20220506003619024.png" alt="image-20220506003619024"></p>
<p>步骤是：</p>
<p>（1）在 spring 配置文件中引入<strong>名称空间</strong> util</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/util </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/util/spring-util.xsd&quot;</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<p>（2）使用 util 标签完成 list 集合注入提取</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 提取 list 集合类型属性注入--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>易筋经<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>九阴真经<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>九阳神功<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--2 提取 list 集合类型属性注入使用--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.collectiontype.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="IOC-操作-Bean-管理（FactoryBean）"><a href="#IOC-操作-Bean-管理（FactoryBean）" class="headerlink" title="IOC 操作 Bean 管理（FactoryBean）"></a>IOC 操作 Bean 管理（FactoryBean）</h1><p>1、Spring 有两种类型 bean，一种普通 bean，另外一种工厂 bean（FactoryBean）<br>2、普通 bean：在配置文件中定义 bean 类型就是返回类型<br>3、工厂 bean：在配置文件定义 bean 类型可以和返回类型不一样（比如Connection）</p>
<p>第一步 创建类，让这个类作为工厂 bean，实现接口 FactoryBean<br>第二步 实现接口里面的方法，在实现的方法中定义返回的 bean 类型</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Course&gt; &#123;</span><br><span class="line">    <span class="comment">//定义返回 bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Course <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Course</span>();</span><br><span class="line">        course.setCname(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> course;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.factorybean.MyBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean3.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//注意这里返回的是course类</span></span><br><span class="line">    <span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;myBean&quot;</span>, Course.class);</span><br><span class="line">    System.out.println(course);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="IOC-操作-Bean-管理（bean-作用域）"><a href="#IOC-操作-Bean-管理（bean-作用域）" class="headerlink" title="IOC 操作 Bean 管理（bean 作用域）"></a>IOC 操作 Bean 管理（bean 作用域）</h1><p>1、在 Spring 里面，设置创建 bean 实例是单实例还是多实例</p>
<p>2、在 Spring 里面，默认情况下，bean 是单实例对象</p>
<p><img src="/../pic/image-20220506080337163.png" alt="image-20220506080337163"></p>
<p>3、如何设置单实例还是多实例 </p>
<p>（1）在 spring 配置文件 bean 标签里面有属性（scope）用于设置单实例还是多实例 </p>
<p>（2）scope 属性值 				  第一个值 默认值，singleton，表示是单实例对象 </p>
<p>​													第二个值 prototype，表示是多实例对象</p>
<p><img src="/../pic/image-20220506080350669.png" alt="image-20220506080350669"></p>
<p>（3）singleton 和 prototype 区别<br>第一 singleton 单实例，prototype 多实例<br>第二 设置 scope 值是 singleton 时候，加载 spring 配置文件时候就会创建单实例对象</p>
<p> 设置 scope 值是 prototype 时候，不是在加载 spring 配置文件时候创建 对象，在调用getBean 方法时候创建多实例对象</p>
<h1 id="IOC-操作-Bean-管理（bean-生命周期）"><a href="#IOC-操作-Bean-管理（bean-生命周期）" class="headerlink" title="IOC 操作 Bean 管理（bean 生命周期）"></a>IOC 操作 Bean 管理（bean 生命周期）</h1><h2 id="1、生命周期"><a href="#1、生命周期" class="headerlink" title="1、生命周期"></a>1、生命周期</h2><p>（1）从对象创建到对象销毁的过程</p>
<h2 id="2、bean-生命周期"><a href="#2、bean-生命周期" class="headerlink" title="2、bean 生命周期"></a>2、bean 生命周期</h2><p>（1）通过构造器创建 bean 实例（无参数构造）<br>（2）为 bean 的属性设置 值和对 引用其他 bean （调用 set 方法）<br>（3）调用 bean 的初始化的方法（需要进行配置初始化的方法）<br>（4）bean 可以使用了（对象获取到了）<br>（5）当容器关闭时候，调用 bean 的销毁的方法（需要进行配置销毁的方法）</p>
<h2 id="3、演示-bean-生命周期"><a href="#3、演示-bean-生命周期" class="headerlink" title="3、演示 bean 生命周期"></a>3、演示 bean 生命周期</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;<span class="comment">//无参数构造</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;第一步 执行无参数构造创建 bean 实例&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String oname;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOname</span><span class="params">(String oname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.oname = oname;</span><br><span class="line">        System.out.println(<span class="string">&quot;第二步 调用 set 方法设置属性值&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建执行的初始化的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;第三步 执行初始化的方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建执行的销毁的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;第五步 执行销毁的方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Orders&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;initMethod&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destroyMethod&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;手机&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBean3</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean4.xml&quot;</span>);</span><br><span class="line">    <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;orders&quot;</span>, Orders.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;第四步 获取创建 bean 实例对象&quot;</span>);</span><br><span class="line">    System.out.println(orders);</span><br><span class="line">    <span class="comment">//手动让 bean 实例销毁</span></span><br><span class="line">    context.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="/../pic/image-20220506080434635.png" alt="image-20220506080434635"></p>
<p>除此之外，还有一种方法可以初始化bean，那就是initializingBean</p>
<p><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/image-20230422200902293.png" alt="image-20230422200902293"></p>
<h2 id="4、加入bean-的后置处理器，bean-生命周期有七步"><a href="#4、加入bean-的后置处理器，bean-生命周期有七步" class="headerlink" title="4、加入bean 的后置处理器，bean 生命周期有七步"></a>4、加入bean 的后置处理器，bean 生命周期有七步</h2><p>（1）通过构造器创建 bean 实例（无参数构造）<br>（2）为 bean 的属性设置值和对其他 bean 引用（调用 set 方法）<br>（3）把 bean 实例传递 bean 后置处理器的方法 postProcessBeforeInitialization </p>
<p>—-在这里还可以加一个！！！initializingBean接口方法的执行，不知道为啥尚硅谷没讲 </p>
<p>（4）调用 bean 的初始化的方法（需要进行配置初始化的方法）<br>（5）把 bean 实例传递 bean 后置处理器的方法 postProcessAfterInitialization<br>（6）bean 可以使用了（对象获取到了）<br>（7）当容器关闭时候，调用 bean 的销毁的方法（需要进行配置销毁的方法）</p>
<h2 id="5、演示添加后置处理器效果"><a href="#5、演示添加后置处理器效果" class="headerlink" title="5、演示添加后置处理器效果"></a>5、演示添加后置处理器效果</h2><p>（1）创建类，实现接口 BeanPostProcessor，创建后置处理器</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPost</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> </span><br><span class="line">        <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在初始化之前执行的方法&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> </span><br><span class="line">        <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在初始化之后执行的方法&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置后置处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBeanPost&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.MyBeanPost&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/../pic/image-20220506080457908.png" alt="image-20220506080457908"></p>
<h1 id="IOC-操作-Bean-管理（xml-自动装配）"><a href="#IOC-操作-Bean-管理（xml-自动装配）" class="headerlink" title="IOC 操作 Bean 管理（xml 自动装配）"></a>IOC 操作 Bean 管理（xml 自动装配）</h1><h2 id="1、什么是自动装配"><a href="#1、什么是自动装配" class="headerlink" title="1、什么是自动装配"></a>1、什么是自动装配</h2><p>（1）根据指定装配规则（属性名称或者属性类型），Spring 自动将匹配的属性值进行操作</p>
<p><img src="/../pic/image-20220521183732002.png" alt="image-20220521183732002"></p>
<h2 id="2、演示自动装配过程"><a href="#2、演示自动装配过程" class="headerlink" title="2、演示自动装配过程"></a>2、演示自动装配过程</h2><p>（1）根据属性名称自动注入</p>
<p>这种最好用标准命名</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--实现自动装配</span></span><br><span class="line"><span class="comment"> bean 标签属性 autowire，配置自动装配</span></span><br><span class="line"><span class="comment"> autowire 属性常用两个值：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> byName 根据属性名称注入 ，注入值 bean的id值和类属性名称一样</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> byType 根据属性类型注入（最常用）</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--根据名字自动装配--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--这个是手动装配--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;</span></span><br><span class="line"><span class="comment">		&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>（2）根据属性类型（重点）自动注入</p>
<p>连名字（id）都可以不起这个，</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--实现自动装配</span></span><br><span class="line"><span class="comment"> bean 标签属性 autowire，配置自动装配</span></span><br><span class="line"><span class="comment"> autowire 属性常用两个值：</span></span><br><span class="line"><span class="comment"> byName 根据属性名称注入 ，注入值 bean 的 id 值和类属性名称一样</span></span><br><span class="line"><span class="comment"> byType 根据属性类型注入</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--根据类型自动装配--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="IOC-操作-Bean-管理-外部属性文件"><a href="#IOC-操作-Bean-管理-外部属性文件" class="headerlink" title="IOC 操作 Bean 管理(外部属性文件)"></a>IOC 操作 Bean 管理(外部属性文件)</h1><h2 id="1、直接配置数据库信息"><a href="#1、直接配置数据库信息" class="headerlink" title="1、直接配置数据库信息"></a>1、直接配置数据库信息</h2><p>（1）配置德鲁伊连接池<br>（2）引入德鲁伊连接池依赖 jar 包</p>
<p><img src="/../pic/image-20220506080701145.png" alt="image-20220506080701145"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--直接配置连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/userDb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2、可以引入外部属性文件配置数据库连接池"><a href="#2、可以引入外部属性文件配置数据库连接池" class="headerlink" title="2、可以引入外部属性文件配置数据库连接池"></a>2、可以引入外部属性文件配置数据库连接池</h2><p>（1）创建外部属性文件，properties 格式文件，写数据库信息</p>
<p><img src="/../pic/image-20220506080717871.png" alt="image-20220506080717871"></p>
<p>（2）把外部 properties 属性文件引入到 spring 配置文件中</p>
<p><strong>开启context命名空间</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">引入 context 名称空间</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span> </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       </span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/util </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/util/spring-util.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 在 spring 配置文件使用标签引入外部属性文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入外部属性文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置连接池--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.userName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/../pic/image-20220521191725961.png" alt="image-20220521191725961"></p>
<h1 id="IOC（xml版本）总结"><a href="#IOC（xml版本）总结" class="headerlink" title="IOC（xml版本）总结"></a>IOC（xml版本）总结</h1><p><img src="/../pic/image-20220521193214598.png" alt="image-20220521193214598"></p>
<h1 id="IOC-操作-Bean-管理-基于注解方式"><a href="#IOC-操作-Bean-管理-基于注解方式" class="headerlink" title="IOC 操作 Bean 管理(基于注解方式)"></a>IOC 操作 Bean 管理(基于注解方式)</h1><h2 id="1、什么是注解"><a href="#1、什么是注解" class="headerlink" title="1、什么是注解"></a>1、什么是注解</h2><p>（1）注解是代码特殊标记，格式：@注解名称(属性名称&#x3D;属性值, 属性名称&#x3D;属性值..          &#x2F;&#x2F;可以用逗号隔开<br>（2）使用注解，注解作用在类上面，方法上面，属性上面<br>（3）使用注解目的：简化 xml 配置</p>
<h2 id="2、Spring-针对-Bean-管理中创建对象提供注解"><a href="#2、Spring-针对-Bean-管理中创建对象提供注解" class="headerlink" title="2、Spring 针对 Bean 管理中创建对象提供注解"></a>2、Spring 针对 Bean 管理中创建对象提供注解</h2><p>（1）@ Component（组件）<br>（2）@Service（业务层）<br>（3）@Controller（表现层）<br>（4）@Repository（数据层）</p>
<p>上面四个注解功能是一样的，都可以用来创建 bean 实例</p>
<h2 id="3、基于注解方式实现对象创建"><a href="#3、基于注解方式实现对象创建" class="headerlink" title="3、基于注解方式实现对象创建"></a>3、基于注解方式实现对象创建</h2><p>第一步 引入依赖</p>
<p><img src="/../pic/image-20220506080801395.png" alt="image-20220506080801395"></p>
<p>第二步 开启组件扫描(让spring的IOC容器知道有这个组件，所以开启扫描组件)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件扫描</span></span><br><span class="line"><span class="comment"> 1 如果扫描多个包，多个包使用逗号隔开</span></span><br><span class="line"><span class="comment"> 2 扫描包上层目录</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line">扫描包上层目录，找到里面的所有类</span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第三步 创建类，在类上面添加创建对象注解</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在注解里面 value 属性值可以省略不写，value是等于配置文件中的id</span></span><br><span class="line"><span class="comment">//默认值是类名称，首字母小写</span></span><br><span class="line"><span class="comment">//比如UserService -- userService</span></span><br><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span> <span class="comment">//等于   &lt;bean id=&quot;userService&quot; class=&quot;..&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>额外的功能</p>
<p><img src="/../pic/image-20220521195801403.png" alt="image-20220521195801403"></p>
<h2 id="4、开启组件扫描细节配置"><a href="#4、开启组件扫描细节配置" class="headerlink" title="4、开启组件扫描细节配置"></a>4、开启组件扫描细节配置</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--示例 1</span></span><br><span class="line"><span class="comment"> use-default-filters=&quot;false&quot; 表示现在不使用默认 filter，使用自己自己配置 filter</span></span><br><span class="line"><span class="comment"> context:include-filter ，设置扫描哪些内容，作为一个过滤器</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    扫描带Controller注解的类</span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--示例 2</span></span><br><span class="line"><span class="comment"> 下面配置扫描包所有内容</span></span><br><span class="line"><span class="comment"> context:exclude-filter： 设置哪些内容不进行扫描</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span></span><br><span class="line">     扫描不带Controller注解的类</span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5、基于注解方式实现属性注入"><a href="#5、基于注解方式实现属性注入" class="headerlink" title="5、基于注解方式实现属性注入"></a>5、基于注解方式实现属性注入</h2><h3 id="（1）-Autowired：根据属性类型进行自动装配"><a href="#（1）-Autowired：根据属性类型进行自动装配" class="headerlink" title="（1）@Autowired：根据属性类型进行自动装配"></a>（1）@Autowired：根据属性类型进行自动装配</h3><p>Autowired不用提供set方法也能用，是反射的暴力破解 </p>
<p>第一步 把 service 和 dao 对象创建，在 service 和 dao 类添加创建对象注解<br>第二步 在 service 注入 dao 对象，在 service 类添加 dao 类型属性，在属性上面使用注解</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//在 service 注入 dao 对象，在 service 类添加 dao 类型属性，在属性上面使用注解</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//定义 dao 类型属性</span></span><br><span class="line">    <span class="comment">//不需要添加 set 方法</span></span><br><span class="line">    <span class="comment">//添加注入属性注解</span></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//根据类型注入，注入的是实现类UserDaoImpl</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add.......&quot;</span>);</span><br><span class="line">        userDao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">            sout(<span class="string">&quot;dao add&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="（2）-Qualifier：根据名称进行注入"><a href="#（2）-Qualifier：根据名称进行注入" class="headerlink" title="（2）@Qualifier：根据名称进行注入"></a>（2）@Qualifier：根据名称进行注入</h3><p>这个@Qualifier 注解的使用，和上面@Autowired <strong>一起使用</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//定义 dao 类型属性</span></span><br><span class="line"><span class="comment">//不需要添加 set 方法</span></span><br><span class="line"><span class="comment">//添加注入属性注解</span></span><br><span class="line"><span class="meta">@Autowired</span> <span class="comment">//根据类型进行注入</span></span><br><span class="line"><span class="meta">@Qualifier(value = &quot;userDaoImpl&quot;)</span> <span class="comment">//根据名称进行注入，搜寻创建id为userDaoImpl的类</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span><span class="comment">//（默认的值是类名的首字母小写）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">            sout(<span class="string">&quot;dao add&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="（3）-Resource：可以根据类型注入，可以根据名称注入（这个是不推荐用的！！用上面两个就行）"><a href="#（3）-Resource：可以根据类型注入，可以根据名称注入（这个是不推荐用的！！用上面两个就行）" class="headerlink" title="（3）@Resource：可以根据类型注入，可以根据名称注入（这个是不推荐用的！！用上面两个就行）"></a>（3）@Resource：可以根据类型注入，可以根据名称注入（这个是不推荐用的！！用上面两个就行）</h3><p>这个注解是javax的java的扩展包中提供的，所以在spring中最好用上面的两种方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@Resource //根据类型进行注入</span></span><br><span class="line"><span class="meta">@Resource(name = &quot;userDaoImpl&quot;)</span> <span class="comment">//根据名称进行注入，这个也是根据上面的那个Qualifier</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure>

<h3 id="（4）-Value：注入普通类型属性"><a href="#（4）-Value：注入普通类型属性" class="headerlink" title="（4）@Value：注入普通类型属性"></a>（4）@Value：注入普通类型属性</h3><p>注入简单类型比如8种基本类型+String</p>
<p>value属性里面的值是自己装配的，这个值可以来自于外部的配置文件哦</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Value(value = &quot;abc&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure>

<p>要是想通过外部属性加载value值的话</p>
<p>需要先配置</p>
<p>（1）<img src="/../pic/image-20220521201101501.png" alt="image-20220521201101501"></p>
<p>（2）<img src="/../pic/image-20220521201215148.png" alt="image-20220521201215148"></p>
<h2 id="6、完全注解开发"><a href="#6、完全注解开发" class="headerlink" title="6、完全注解开发"></a>6、完全注解开发</h2><p><img src="/../pic/image-20220506111213836.png" alt="image-20220506111213836"></p>
<p>下面的配置是为了替代上面的那个的</p>
<p>@Configuration 																		作为标记，说明为配置类</p>
<p>@ComponentScan(basePackages &#x3D; {“com.atguigu”})		 组件扫描，扫描的范围</p>
<p>（1）创建<strong>配置类</strong>，替代 xml 配置文件，用类替代xml！！！！！！！！！！！！</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//作为配置类，替代 xml 配置文件</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;<span class="comment">//这个类名是随意起的</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）编写测试类</p>
<p>AnnotationConfigApplicationContext，<strong>注解</strong>的配置类，里面的参数加入配置类的class</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testService2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//加载配置类</span></span><br><span class="line">    ApplicationContext context= <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">    System.out.println(userService);</span><br><span class="line">    userService.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="通过注解的方式管理第三方bean"><a href="#通过注解的方式管理第三方bean" class="headerlink" title="通过注解的方式管理第三方bean"></a>通过注解的方式管理第三方bean</h1><h2 id="不导入其他的bean"><a href="#不导入其他的bean" class="headerlink" title="不导入其他的bean"></a>不导入其他的bean</h2><p><img src="/../pic/image-20220521201849285.png" alt="image-20220521201849285"></p>
<p>测试类</p>
<p><img src="/../pic/image-20220521201927688.png" alt="image-20220521201927688"> </p>
<p>额外的，如果都写到springconfig类中这些方法会显得比较拥挤，我们可以对他们进行分类</p>
<p><img src="/../pic/image-20220521202402319.png" alt="image-20220521202402319"></p>
<h2 id="导入其他的bean"><a href="#导入其他的bean" class="headerlink" title="导入其他的bean"></a>导入其他的bean</h2><h3 id="简单类型bean"><a href="#简单类型bean" class="headerlink" title="简单类型bean"></a>简单类型bean</h3><p><img src="/../pic/image-20220521202649001.png" alt="image-20220521202649001"></p>
<h3 id="引用类型-bean"><a href="#引用类型-bean" class="headerlink" title="引用类型 bean"></a>引用类型 bean</h3><p><img src="/../pic/image-20220521202911653.png" alt="image-20220521202911653"></p>
<p>总结</p>
<p><img src="/../pic/image-20220521203042864.png" alt="image-20220521203042864"></p>
<h1 id="注解总结与xml的对比"><a href="#注解总结与xml的对比" class="headerlink" title="注解总结与xml的对比"></a>注解总结与xml的对比</h1><p><img src="/../pic/image-20220521203506796.png" alt="image-20220521203506796"></p>
<h1 id="Spring整合MyBatis"><a href="#Spring整合MyBatis" class="headerlink" title="Spring整合MyBatis"></a>Spring整合MyBatis</h1><p>首先导入依赖</p>
<p><img src="/../pic/image-20220521204825611.png" alt="image-20220521204825611"></p>
<p>对mybatisConfig进行配置</p>
<p>原来的mybatis-config.xml</p>
<p><img src="/../pic/image-20220521210528044.png" alt="image-20220521210528044"></p>
<p><img src="/../pic/image-20220521210044859.png" alt="image-20220521210044859"></p>
<p>与spring进行整合</p>
<p><img src="/../pic/image-20220521210253328.png" alt="image-20220521210253328"></p>
<p>jdbc中的数据源</p>
<p><img src="/../pic/image-20220521210419654.png" alt="image-20220521210419654"></p>
<p>测试</p>
<p><img src="/../pic/image-20220521210158471.png" alt="image-20220521210158471"></p>
<p>总结对比</p>
<p><img src="/../pic/image-20220521210632113.png" alt="image-20220521210632113"></p>
<p><img src="/../pic/image-20220521210644196.png" alt="image-20220521210644196"></p>
<h1 id="Spring整合Junit"><a href="#Spring整合Junit" class="headerlink" title="Spring整合Junit"></a>Spring整合Junit</h1><p>第一步<img src="/../pic/image-20220521211019546.png" alt="image-20220521211019546"></p>
<p>第二步</p>
<p><img src="/../pic/image-20220521211140383.png" alt="image-20220521211140383"></p>
<h1 id="AOP（概念）"><a href="#AOP（概念）" class="headerlink" title="AOP（概念）"></a>AOP（概念）</h1><p><img src="/../pic/image-20220522095053965.png" alt="image-20220522095053965"></p>
<p><img src="/../pic/image-20220522095105700.png" alt="image-20220522095105700"></p>
<p>1、什么是 AOP<br>（1）面向切面编程（面向方面编程），利用 AOP 可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。<br>（2）通俗描述：<font color="red"><strong>不通过修改源代码方式，在主干功能里面添加新功能，</strong></font>（代理）<br>（3）使用登录栗子说明AOP</p>
<p><img src="/../pic/image-20220506081150782.png" alt="image-20220506081150782"></p>
<h1 id="AOP（底层原理）"><a href="#AOP（底层原理）" class="headerlink" title="AOP（底层原理）"></a>AOP（底层原理）</h1><h2 id="1、AOP-底层使用动态代理"><a href="#1、AOP-底层使用动态代理" class="headerlink" title="1、AOP 底层使用动态代理"></a>1、AOP 底层使用动态代理</h2><p>（1）有两种情况动态代理</p>
<h4 id="第一种-有接口情况，使用-JDK-动态代理"><a href="#第一种-有接口情况，使用-JDK-动态代理" class="headerlink" title="第一种 有接口情况，使用 JDK 动态代理"></a>第一种 <strong>有接口情况</strong>，使用 JDK 动态代理</h4><p>创建接口实现类代理对象，增强类的方法</p>
<p>两者实现同样的接口</p>
<p><img src="/../pic/image-20220506113001229.png" alt="image-20220506113001229"></p>
<h4 id="第二种-没有接口情况，使用-CGLIB-动态代理"><a href="#第二种-没有接口情况，使用-CGLIB-动态代理" class="headerlink" title="第二种 没有接口情况，使用 CGLIB 动态代理"></a>第二种 <strong>没有接口情况</strong>，使用 CGLIB 动态代理</h4><p> 创建子类的代理对象，增强类的方法</p>
<p><img src="/../pic/image-20220506113254797.png" alt="image-20220506113254797"></p>
<h2 id="AOP（JDK-动态代理）"><a href="#AOP（JDK-动态代理）" class="headerlink" title="AOP（JDK 动态代理）"></a>AOP（JDK 动态代理）</h2><h3 id="1-使用JDK动态代理，使用Proxy类里面的方法创建代理对象"><a href="#1-使用JDK动态代理，使用Proxy类里面的方法创建代理对象" class="headerlink" title="1.使用JDK动态代理，使用Proxy类里面的方法创建代理对象"></a>1.使用JDK动态代理，使用Proxy类里面的方法创建代理对象</h3><p><img src="/../pic/image-20220506081309716.png" alt="image-20220506081309716"></p>
<p>（1）调用 newProxyInstance 方法</p>
<p><img src="/../pic/image-20220506081320939.png" alt="image-20220506081320939"></p>
<p>方法有三个参数：<br>第一参数，类加载器<br>第二参数，增强方法所在的类，这个类实现的接口，<strong>支持多个接口</strong><br>第三参数，实现这个接口 InvocationHandler，创建代理对象，写增强的部分</p>
<h3 id="2、编写-JDK-动态代理代码"><a href="#2、编写-JDK-动态代理代码" class="headerlink" title="2、编写 JDK 动态代理代码"></a>2、编写 JDK 动态代理代码</h3><p>（1）创建接口，定义方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(String id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）创建接口实现类，实现方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）使用 Proxy 类创建接口代理对象</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="comment">//创建代理对象代码</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="comment">//1 把创建的是谁的代理对象，把谁传递过来</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//有参数构造传递</span></span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line">    <span class="comment">//传过来的是userdao对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoProxy</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//增强的逻辑</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//方法之前</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//这是额外的功能</span></span><br><span class="line">        System.out.println(<span class="string">&quot;方法之前执行....&quot;</span>+method.getName()+<span class="string">&quot; :传递的参数...&quot;</span>+ Arrays.toString(args));</span><br><span class="line">        <span class="comment">//被增强的方法执行</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">res</span> <span class="operator">=</span> method.invoke(obj, args);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//方法之后</span></span><br><span class="line">        <span class="comment">//这也是额外的功能</span></span><br><span class="line">        System.out.println(<span class="string">&quot;方法之后执行....&quot;</span>+obj);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建userdao的代理对象</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建接口实现类代理对象</span></span><br><span class="line">        Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">UserDaoImpl</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="comment">//这里得到的是代理对象</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">dao</span> <span class="operator">=</span> </span><br><span class="line">            (UserDao)Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>(userDao));</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> dao.add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;                          </span><br></pre></td></tr></table></figure>

<h1 id="AOP（操作术语）"><a href="#AOP（操作术语）" class="headerlink" title="AOP（操作术语）"></a>AOP（操作术语）</h1><h2 id="连接点"><a href="#连接点" class="headerlink" title="连接点"></a>连接点</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">类里面哪些方法可以被增强，这些方法称为连接点</span><br></pre></td></tr></table></figure>

<p><img src="/../pic/image-20220506115722760.png" alt="image-20220506115722760"></p>
<h2 id="切入点"><a href="#切入点" class="headerlink" title="切入点"></a>切入点</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">实际被真正增强的方法，称为切入点</span><br></pre></td></tr></table></figure>

<p><img src="/../pic/image-20220506115825158.png" alt="image-20220506115825158"></p>
<h2 id="通知（增强）"><a href="#通知（增强）" class="headerlink" title="通知（增强）"></a>通知（增强）</h2><p>增强的意思是进行额外操作</p>
<p>并且额外操作可以在不同的位置 </p>
<pre><code>（1）实际增强的逻辑部分称为通知（增强）
（2）通知有多种类型
    前置通知
    后置通知
    环绕通知
    异常通知
    最终通知（try catch finally）
</code></pre>
<h2 id="切面"><a href="#切面" class="headerlink" title="切面"></a>切面</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">切面是动作</span><br><span class="line"></span><br><span class="line">把通知应用到切入点过程</span><br></pre></td></tr></table></figure>



<h1 id="AOP-操作（准备工作）"><a href="#AOP-操作（准备工作）" class="headerlink" title="AOP 操作（准备工作）"></a>AOP 操作（准备工作）</h1><p>1、Spring 框架一般都是基于 AspectJ 实现 AOP 操作<br>（1）AspectJ 不是 Spring 组成部分，独立 AOP 框架，一般把 AspectJ 和 Spirng 框架一起使用，进行 AOP 操作</p>
<p>2、基于 AspectJ 实现 AOP 操作<br>（1）基于 xml 配置文件实现<br>（2）基于注解方式实现（使用）</p>
<p>3、在项目工程里面引入 AOP 相关依赖</p>
<p><img src="/../pic/image-20220522095839816.png" alt="image-20220522095839816"></p>
<p><img src="/../pic/image-20220506081705262.png" alt="image-20220506081705262"></p>
<p>4、切入点表达式<br>（1）切入点表达式作用：知道对哪个类里面的哪个方法进行增强<br>（2）语法结构：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execution([权限修饰符] [返回类型] [类全路径] [方法名称]([参数列表]) )</span><br></pre></td></tr></table></figure>

<p>举例 1：对 com.atguigu.dao.BookDao 类里面的 add 进行增强</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execution(* com.atguigu.dao.BookDao.add(..))</span><br></pre></td></tr></table></figure>

<p>举例 2：对 com.atguigu.dao.BookDao 类里面的所有的方法进行增强</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execution(* com.atguigu.dao.BookDao.* (..))</span><br></pre></td></tr></table></figure>

<p>举例 3：对 com.atguigu.dao 包里面所有类，类里面所有方法进行增强</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execution(* com.atguigu.dao.*.* (..))</span><br></pre></td></tr></table></figure>

<h1 id="AOP-操作（AspectJ-注解）"><a href="#AOP-操作（AspectJ-注解）" class="headerlink" title="AOP 操作（AspectJ 注解）"></a>AOP 操作（AspectJ 注解）</h1><h2 id="1、创建类，在类里面定义方法"><a href="#1、创建类，在类里面定义方法" class="headerlink" title="1、创建类，在类里面定义方法"></a>1、创建类，在类里面定义方法</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;add.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、创建增强类（编写增强逻辑）"><a href="#2、创建增强类（编写增强逻辑）" class="headerlink" title="2、创建增强类（编写增强逻辑）"></a>2、创建增强类（编写增强逻辑）</h2><p>（1）在增强类里面，创建方法，让不同方法代表不同通知类型</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;<span class="comment">//前置通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;before......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、进行通知的配置"><a href="#3、进行通知的配置" class="headerlink" title="3、进行通知的配置"></a>3、进行通知的配置</h2><p>（1）在 spring 配置文件中，开启注解扫描</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context/spring-context.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 开启注解扫描 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.spring5.aopanno&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>（2）使用注解创建 User 和 UserProxy 对象</p>
<p><img src="/../pic/image-20220506081723602.png" alt="image-20220506081723602"></p>
<p>（3）在增强类上面添加注解 @Aspect</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">		sout(<span class="string">&quot;add&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（4）在 spring 配置文件中开启生成代理对象</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 开启 Aspect 生成代理对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4、配置不同类型的通知"><a href="#4、配置不同类型的通知" class="headerlink" title="4、配置不同类型的通知"></a>4、配置不同类型的通知</h2><p>（1）在增强类的里面，在作为通知方法上面添加通知类型注解，使用切入点表达式配置,等调用add方法使就会添加上去</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//前置通知</span></span><br><span class="line">    <span class="comment">//@Before 注解表示作为前置通知</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//后置通知（返回通知）//在方法返回之后执行</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//最终通知//核心方法执行之后执行，和上面那个区别开</span></span><br><span class="line">    <span class="meta">@After(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//异常通知（抛出异常才执行）</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//环绕通知(重点)</span></span><br><span class="line">    <span class="meta">@Around(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;环绕之前.........&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//被增强的方法执行</span></span><br><span class="line">        proceedingJoinPoint.proceed();</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;环绕之后.........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color="red">ProceedingJoinPoint</font></p>
<p>可以调用它里面的proceedingJoinPoint.getSignature()方法，得到执行的签名信息，签名信息里面含有对应方法的信息，比如方法名和类名</p>
<p>重要的是它</p>
<p><img src="/../pic/image-20220522102911205.png" alt="image-20220522102911205"></p>
<p><img src="/../pic/image-20220522103031457.png" alt="image-20220522103031457"></p>
<h2 id="5、相同的切入点抽取"><a href="#5、相同的切入点抽取" class="headerlink" title="5、相同的切入点抽取"></a>5、相同的切入点抽取</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//相同切入点抽取</span></span><br><span class="line"><span class="meta">@Pointcut(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointdemo</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//前置通知</span></span><br><span class="line"><span class="comment">//@Before 注解表示作为前置通知</span></span><br><span class="line"><span class="meta">@Before(value = &quot;pointdemo()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;before.........&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6、比如有多个增强类多同一个方法进行增强，设置增强类优先级<br>（1）在增强类上面添加注解 @Order(数字类型值)，数字类型值越小优先级越高 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonProxy</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>7、完全使用注解开发<br>创建配置类，不需要创建 xml 配置文件 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span><span class="comment">//开启组件扫描</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span><span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigAop</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="AOP-操作（AspectJ-配置文件）"><a href="#AOP-操作（AspectJ-配置文件）" class="headerlink" title="AOP 操作（AspectJ 配置文件）"></a>AOP 操作（AspectJ 配置文件）</h1><p>1、创建两个类，增强类和被增强类，创建方法<br>2、在 spring 配置文件中创建两个类对象</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.aopxml.Book&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookProxy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.aopxml.BookProxy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、在 spring 配置文件中配置切入点</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置 aop 增强--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--切入点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;p&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.atguigu.spring5.aopxml.Book.buy(..))&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;bookProxy&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--增强作用在具体的方法上//这个是前置通知，method里面是增强的方法，作用到切点上--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;p&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="AOP注解步骤"><a href="#AOP注解步骤" class="headerlink" title="AOP注解步骤"></a>AOP注解步骤</h1><p><img src="/../pic/image-20220522101034930.png" alt="image-20220522101034930"></p>
<p><img src="/../pic/image-20220522101042158.png" alt="image-20220522101042158"></p>
<p><img src="/../pic/image-20220522101047327.png" alt="image-20220522101047327"></p>
<p><img src="/../pic/image-20220522101052419.png" alt="image-20220522101052419"></p>
<p><img src="/../pic/image-20220522101112030.png" alt="image-20220522101112030"></p>
<p><img src="/../pic/image-20220522101122184.png" alt="image-20220522101122184"></p>
<p><img src="/../pic/image-20220522101132944.png" alt="image-20220522101132944"></p>
<h1 id="AOP总结"><a href="#AOP总结" class="headerlink" title="AOP总结"></a>AOP总结</h1><p><img src="/../pic/image-20220522115406055.png" alt="image-20220522115406055"></p>
<p><img src="/../pic/image-20220522115418728.png" alt="image-20220522115418728"></p>
<p><img src="/../pic/image-20220522115458264.png" alt="image-20220522115458264"></p>
<p><img src="/../pic/image-20220522115541040.png" alt="image-20220522115541040"></p>
<p><img src="/../pic/image-20220522115716467.png" alt="image-20220522115716467"></p>
<h1 id="JdbcTemplate-概念和准备"><a href="#JdbcTemplate-概念和准备" class="headerlink" title="JdbcTemplate(概念和准备)"></a>JdbcTemplate(概念和准备)</h1><h2 id="1、什么是-JdbcTemplate"><a href="#1、什么是-JdbcTemplate" class="headerlink" title="1、什么是 JdbcTemplate"></a>1、什么是 JdbcTemplate</h2><p>（1）Spring 框架对 JDBC 进行封装，使用 JdbcTemplate 方便实现对数据库操作</p>
<h2 id="2、准备工作"><a href="#2、准备工作" class="headerlink" title="2、准备工作"></a>2、准备工作</h2><p>（1）引入相关 jar 包</p>
<p><img src="/../pic/image-20220506081810308.png" alt="image-20220506081810308"></p>
<p>（2）在 spring 配置文件配置数据库连接池</p>
<p>这个是一个模板，需要具体情况具体改</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数据库连接池 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///user_db&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>（3）配置 JdbcTemplate 对象，注入 DataSource</p>
<p>注入数据源，数据</p>
<p>用set方法注入</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JdbcTemplate 对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入 dataSource--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>（4）创建 service 类，创建 dao 类，在 dao 注入 jdbcTemplate 对象</p>
<p><strong>首先配置文件组件扫描</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件扫描 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>Service层</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//注入 dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>DAO层</strong></p>
<p>JdbcTemplate已经在配置文件中创建好了</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="comment">//注入 JdbcTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="JdbcTemplate-操作数据库（添加）"><a href="#JdbcTemplate-操作数据库（添加）" class="headerlink" title="JdbcTemplate 操作数据库（添加）"></a>JdbcTemplate 操作数据库（添加）</h1><h2 id="1、对应数据库创建实体类"><a href="#1、对应数据库创建实体类" class="headerlink" title="1、对应数据库创建实体类"></a>1、对应数据库创建实体类</h2><p>这个本来是Book的，下面忽略他</p>
<p><img src="/../pic/image-20220506081832090.png" alt="image-20220506081832090"></p>
<h2 id="2、编写-service-和-dao"><a href="#2、编写-service-和-dao" class="headerlink" title="2、编写 service 和 dao"></a>2、编写 service 和 dao</h2><p>（1）在 dao 进行数据库添加操作<br>（2）调用 JdbcTemplate 对象里面 update 方法实现添加操作</p>
<p><img src="/../pic/image-20220506081845688.png" alt="image-20220506081845688"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="comment">//注入 JdbcTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="comment">//添加的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">        <span class="comment">//1 创建 sql 语句</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="comment">//2 调用方法实现</span></span><br><span class="line">        Object[] args = &#123;book.getUserId(), book.getUsername(), book.getUstatus()&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql,args);</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、测试类"><a href="#3、测试类" class="headerlink" title="3、测试类"></a>3、测试类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJdbcTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line"> 	<span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);<span class="comment">//新建service</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//得到图书</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">    book.setUserId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    book.setUsername(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">    book.setUstatus(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    bookService.addBook(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加成功啦</p>
<p><img src="/../pic/image-20220506081912123.png" alt="image-20220506081912123"></p>
<h1 id="JdbcTemplate-操作数据库（修改和删除）"><a href="#JdbcTemplate-操作数据库（修改和删除）" class="headerlink" title="JdbcTemplate 操作数据库（修改和删除）"></a>JdbcTemplate 操作数据库（修改和删除）</h1><p>这两个方法都是写在DAO里面的 </p>
<p>1、修改</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateBook</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id=?&quot;</span>;</span><br><span class="line">    Object[] args = &#123;book.getUsername(), book.getUstatus(),book.getUserId()&#125;;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, args);</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、删除</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, id);</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="JdbcTemplate-操作数据库（查询）"><a href="#JdbcTemplate-操作数据库（查询）" class="headerlink" title="JdbcTemplate 操作数据库（查询）"></a>JdbcTemplate 操作数据库（查询）</h1><h2 id="JdbcTemplate-操作数据库（查询返回某个值）"><a href="#JdbcTemplate-操作数据库（查询返回某个值）" class="headerlink" title="JdbcTemplate 操作数据库（查询返回某个值）"></a>JdbcTemplate 操作数据库（查询返回某个值）</h2><p>1、查询表里面有多少条记录，返回是某个值<br>2、使用 JdbcTemplate 实现查询返回某个值代码</p>
<p><img src="/../pic/image-20220506081941298.png" alt="image-20220506081941298"></p>
<p>​												⚫ 有两个参数<br>​												⚫ 第一个参数：sql 语句<br>​												⚫ 第二个参数：返回类型 Class</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//查询表记录数</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">selectCount</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_book&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class);</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="JdbcTemplate-操作数据库（查询返回对象）"><a href="#JdbcTemplate-操作数据库（查询返回对象）" class="headerlink" title="JdbcTemplate 操作数据库（查询返回对象）"></a>JdbcTemplate 操作数据库（查询返回对象）</h2><p>1、场景：查询图书详情<br>2、JdbcTemplate 实现查询返回对象</p>
<p><img src="/../pic/image-20220506173513986.png" alt="image-20220506173513986"></p>
<p>⚫ 有三个参数 </p>
<p>​															⚫ 第一个参数：sql 语句<br>​															⚫ 第二个参数：RowMapper 是接口，针对返回不同类型数据，使用这个接口里面实现类完成数据封装<br>​															⚫ 第三个参数：sql 语句值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//查询返回对象</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Book <span class="title function_">findBookInfo</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="comment">//调用方法</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class), id);</span><br><span class="line">    <span class="keyword">return</span> book;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="JdbcTemplate-操作数据库（查询返回集合）"><a href="#JdbcTemplate-操作数据库（查询返回集合）" class="headerlink" title="JdbcTemplate 操作数据库（查询返回集合）"></a>JdbcTemplate 操作数据库（查询返回集合）</h2><p>1、场景：查询图书列表分页…<br>2、调用 JdbcTemplate 方法实现查询返回集合</p>
<p><img src="/../pic/image-20220506174050750.png" alt="image-20220506174050750"></p>
<p>⚫ 有三个参数<br>                                                                                ⚫ 第一个参数：sql 语句<br>                                                                                ⚫ 第二个参数：RowMapper 是接口，针对返回不同类型数据，使用这个接口里面实现类完成数据封装<br>                                                                                ⚫ 第三个参数：sql 语句值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//查询返回集合</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">findAllBook</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book&quot;</span>;</span><br><span class="line">    <span class="comment">//调用方法</span></span><br><span class="line">    List&lt;Book&gt; bookList = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class));</span><br><span class="line">    <span class="keyword">return</span> bookList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="JdbcTemplate-操作数据库（批量操作）"><a href="#JdbcTemplate-操作数据库（批量操作）" class="headerlink" title="JdbcTemplate 操作数据库（批量操作）"></a>JdbcTemplate 操作数据库（批量操作）</h2><p>1、批量操作：操作表里面多条记录</p>
<h3 id="JdbcTemplate-实现批量添加操作"><a href="#JdbcTemplate-实现批量添加操作" class="headerlink" title="JdbcTemplate 实现批量添加操作"></a>JdbcTemplate 实现批量添加操作</h3><p><img src="/../pic/image-20220506082003474.png" alt="image-20220506082003474"></p>
<p>⚫ 有两个参数<br>                                                                    ⚫ 第一个参数：sql 语句<br>                                                                    ⚫ 第二个参数：List 集合，添加多条记录数据</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//批量添加</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchAddBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">    jdbcTemplate.batchUpdate(sql, batchArgs);<span class="comment">//这个方法做了封装</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">这里是在测试类里面，显示怎么用的</span><br><span class="line"></span><br><span class="line"><span class="comment">//批量添加测试</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;3&quot;</span>,<span class="string">&quot;java&quot;</span>,<span class="string">&quot;a&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;4&quot;</span>,<span class="string">&quot;c++&quot;</span>,<span class="string">&quot;b&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;5&quot;</span>,<span class="string">&quot;MySQL&quot;</span>,<span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line"><span class="comment">//调用批量添加</span></span><br><span class="line">bookService.batchAdd(batchArgs);</span><br></pre></td></tr></table></figure>



<h3 id="JdbcTemplate-实现批量修改操作"><a href="#JdbcTemplate-实现批量修改操作" class="headerlink" title="JdbcTemplate 实现批量修改操作"></a>JdbcTemplate 实现批量修改操作</h3><p><img src="/../pic/image-20220506082003474.png" alt="image-20220506082003474"></p>
<p>⚫ 有两个参数<br>                                                                    ⚫ 第一个参数：sql 语句<br>                                                                    ⚫ 第二个参数：List 集合，添加多条记录数据</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//批量修改</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchUpdateBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id=?&quot;</span>;</span><br><span class="line">    jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//批量修改</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;java0909&quot;</span>,<span class="string">&quot;a3&quot;</span>,<span class="string">&quot;3&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;c++1010&quot;</span>,<span class="string">&quot;b4&quot;</span>,<span class="string">&quot;4&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;MySQL1111&quot;</span>,<span class="string">&quot;c5&quot;</span>,<span class="string">&quot;5&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line"><span class="comment">//调用方法实现批量修改</span></span><br><span class="line">bookService.batchUpdate(batchArgs);</span><br></pre></td></tr></table></figure>



<h3 id="JdbcTemplate-实现批量删除操作"><a href="#JdbcTemplate-实现批量删除操作" class="headerlink" title="JdbcTemplate 实现批量删除操作"></a>JdbcTemplate 实现批量删除操作</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//批量删除</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchDeleteBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line">    jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//批量删除</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;3&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;4&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line"><span class="comment">//调用方法实现批量删除</span></span><br><span class="line">bookService.batchDelete(batchArgs);</span><br></pre></td></tr></table></figure>

<h1 id="事务操作（事务概念）"><a href="#事务操作（事务概念）" class="headerlink" title="事务操作（事务概念）"></a>事务操作（事务概念）</h1><p>1、什么事务<br>（1）事务是数据库操作最基本单元</p>
<p>意思是：逻辑上一组操作，要么都成功，如果有一个失败所有操作都失败<br>（2）典型场景：银行转账</p>
<ul>
<li>lucy 转账 100 元 给 mary</li>
<li>lucy 少 100，mary 多 100</li>
</ul>
<p>2、事务四个特性（ACID）<br>（1）原子性                    要么都成功,要么都失败<br>（2）一致性                    操作之前和操作之后总量是一样的<br>（3）隔离性                    多事务操作时不会互相影响<br>（4）持久性                    提交之后，表中数据真正发生了变化</p>
<h1 id="事务操作（搭建事务操作环境）"><a href="#事务操作（搭建事务操作环境）" class="headerlink" title="事务操作（搭建事务操作环境）"></a>事务操作（搭建事务操作环境）</h1><p><img src="/../pic/image-20220506182101652.png" alt="image-20220506182101652"></p>
<h2 id="1、创建数据库user-db和表t-account，添加记录"><a href="#1、创建数据库user-db和表t-account，添加记录" class="headerlink" title="1、创建数据库user_db和表t_account，添加记录"></a>1、创建数据库user_db和表t_account，添加记录</h2><p><img src="/../pic/image-20220506184544358.png" alt="image-20220506184544358"></p>
<h2 id="2、创建-service，搭建-dao，完成对象创建和注入关系"><a href="#2、创建-service，搭建-dao，完成对象创建和注入关系" class="headerlink" title="2、创建 service，搭建 dao，完成对象创建和注入关系"></a>2、创建 service，搭建 dao，完成对象创建和注入关系</h2><p>（1）service 注入 dao，在 dao 注入 JdbcTemplate，在 JdbcTemplate 注入 DataSource</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//注入 dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3、在-dao-创建两个方法：多钱和少钱的方法，在-service-创建方法（转账的方法）"><a href="#3、在-dao-创建两个方法：多钱和少钱的方法，在-service-创建方法（转账的方法）" class="headerlink" title="3、在 dao 创建两个方法：多钱和少钱的方法，在 service 创建方法（转账的方法）"></a>3、在 dao 创建两个方法：多钱和少钱的方法，在 service 创建方法（转账的方法）</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="comment">//lucy 转账 100 给 mary</span></span><br><span class="line">    <span class="comment">//少钱</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reduceMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_account set money=money-? where username=?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,<span class="number">100</span>,<span class="string">&quot;lucy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//多钱</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_account set money=money+? where username=?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,<span class="number">100</span>,<span class="string">&quot;mary&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//注入 dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//转账的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accountMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//lucy 少 100</span></span><br><span class="line">        userDao.reduceMoney();</span><br><span class="line">        <span class="comment">//mary 多 100</span></span><br><span class="line">        userDao.addMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、上面代码，如果正常执行没有问题的，但是如果代码执行过程中出现异常，有问题的话，就会出现问题，解决办法"><a href="#4、上面代码，如果正常执行没有问题的，但是如果代码执行过程中出现异常，有问题的话，就会出现问题，解决办法" class="headerlink" title="4、上面代码，如果正常执行没有问题的，但是如果代码执行过程中出现异常，有问题的话，就会出现问题，解决办法"></a>4、上面代码，如果正常执行没有问题的，但是如果代码执行过程中出现异常，有问题的话，就会出现问题，解决办法</h2><p><img src="/../pic/image-20220506182214963.png" alt="image-20220506182214963"></p>
<p>（1）上面问题如何解决呢？</p>
<p>​					使用事务进行解决</p>
<p>（2）事务操作过程，加在service层中！！！！</p>
<p><img src="/../pic/image-20220506182325376.png" alt="image-20220506182325376"></p>
<h1 id="事务操作（Spring-事务管理介绍）"><a href="#事务操作（Spring-事务管理介绍）" class="headerlink" title="事务操作（Spring 事务管理介绍）"></a>事务操作（Spring 事务管理介绍）</h1><p><img src="/../pic/image-20220506195725263.png" alt="image-20220506195725263"></p>
<p>1、事务添加到 JavaEE 三层结构里面 Service 层（业务逻辑层）</p>
<p>2、在 Spring 进行事务管理操作<br>    有两种方式：编程式事务管理（很少使用）和声明式事务管理（使用）</p>
<p>3、声明式事务管理<br>（1）基于注解方式（使用）<br>（2）基于 xml 配置文件方式</p>
<p>4、在 Spring 进行声明式事务管理，底层使用 AOP 原理</p>
<p>5、Spring 事务管理 API<br>提供一个接口，代表事务管理器，这个接口针对不同的框架提供不同的实现类</p>
<p><img src="/../pic/image-20220506182342241.png" alt="image-20220506182342241"></p>
<h2 id="事务操作（注解声明式事务管理）"><a href="#事务操作（注解声明式事务管理）" class="headerlink" title="事务操作（注解声明式事务管理）"></a>事务操作（注解声明式事务管理）</h2><h3 id="1、在-spring-配置文件配置事务管理器"><a href="#1、在-spring-配置文件配置事务管理器" class="headerlink" title="1、在 spring 配置文件配置事务管理器"></a>1、在 spring 配置文件配置事务管理器</h3><p>dataSource数据源在之前搭建环境的时候创建过了</p>
<p><img src="/../pic/image-20220506201520383.png" alt="image-20220506201520383"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2、在-spring-配置文件，开启事务注解"><a href="#2、在-spring-配置文件，开启事务注解" class="headerlink" title="2、在 spring 配置文件，开启事务注解"></a>2、在 spring 配置文件，<strong>开启事务注解</strong></h3><p>（1）在 spring 配置文件引入名称空间 tx</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context/spring-context.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop/spring-aop.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/tx </span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>（2）开启事务注解</p>
<p><img src="/../pic/image-20220506201809579.png" alt="image-20220506201809579"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启事务注解--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3、在-service-类上面（或者-service-类里面方法上面）添加事务注解"><a href="#3、在-service-类上面（或者-service-类里面方法上面）添加事务注解" class="headerlink" title="3、在 service 类上面（或者 service 类里面方法上面）添加事务注解"></a>3、在 service 类上面（或者 service 类里面方法上面）添加事务注解</h3><p>（1）@Transactional，这个注解添加到类上面，也可以添加方法上面(<strong>一般写在接口的方法上</strong>)</p>
<p>（2）如果把这个注解添加类上面，这个类里面所有的方法都添加事务</p>
<p>（3）如果把这个注解添加方法上面，为这个方法添加事务</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;&#125;</span><br></pre></td></tr></table></figure>



<h1 id="事务操作（声明式事务管理参数配置）"><a href="#事务操作（声明式事务管理参数配置）" class="headerlink" title="事务操作（声明式事务管理参数配置）"></a>事务操作（声明式事务管理参数配置）</h1><p>1、在 service 类上面添加注解@Transactional，在这个注解里面可以配置事务相关参数</p>
<p><img src="/../pic/image-20220506202419768.png" alt="image-20220506202419768"></p>
<h2 id="propagation：事务传播行为"><a href="#propagation：事务传播行为" class="headerlink" title="propagation：事务传播行为"></a>propagation：事务传播行为</h2><p>多方法之间进行调用， 这个过程中<strong>事务</strong>是如何进行管理的</p>
<p><img src="/../pic/image-20220506182503340.png" alt="image-20220506182503340"></p>
<p>​																									上面这两个用的比较多一些</p>
<p><img src="/../pic/image-20220506182512341.png" alt="image-20220506182512341"></p>
<p>如何使用呢：</p>
<p><img src="/../pic/image-20220506203334140.png" alt="image-20220506203334140"></p>
<h2 id="ioslation：事务隔离级别"><a href="#ioslation：事务隔离级别" class="headerlink" title="ioslation：事务隔离级别"></a>ioslation：事务隔离级别</h2><p>（1）事务有特性成为隔离性，多事务操作之间不会产生影响。不考虑隔离性产生很多问题</p>
<p>（2）有三个读问题：脏读、不可重复读、虚（幻）读</p>
<h3 id="脏读：一个未提交事务读取到另一个未提交事务的数据"><a href="#脏读：一个未提交事务读取到另一个未提交事务的数据" class="headerlink" title="脏读：一个未提交事务读取到另一个未提交事务的数据"></a>脏读：一个未提交事务读取到另一个未提交事务的数据</h3><p>假如两个人同时操作一组数据</p>
<p><img src="/../pic/image-20220506182529089.png" alt="image-20220506182529089"></p>
<h3 id="不可重复读：一个未提交事务读取到另一提交事务修改数据"><a href="#不可重复读：一个未提交事务读取到另一提交事务修改数据" class="headerlink" title="不可重复读：一个未提交事务读取到另一提交事务修改数据"></a>不可重复读：一个未提交事务读取到另一提交事务修改数据</h3><p><img src="/../pic/image-20220506182550052.png" alt="image-20220506182550052"></p>
<h3 id="虚读：一个未提交事务读取到另一提交事务添加数据"><a href="#虚读：一个未提交事务读取到另一提交事务添加数据" class="headerlink" title="虚读：一个未提交事务读取到另一提交事务添加数据"></a>虚读：一个未提交事务读取到另一提交事务添加数据</h3><p>解决：通过设置事务隔离级别，解决读问题</p>
<p><img src="/../pic/image-20220506182602103.png" alt="image-20220506182602103"></p>
<p><img src="/../pic/image-20220506182608525.png" alt="image-20220506182608525"></p>
<h2 id="timeout：超时时间"><a href="#timeout：超时时间" class="headerlink" title="timeout：超时时间"></a>timeout：超时时间</h2><p>（1）事务需要在<strong>一定时间</strong>内进行提交，如果不提交则会进行回滚<br>（2）默认值是 -1 ，也就是不会超时，我们可以设置时间以秒单位进行计算</p>
<p><img src="/../pic/image-20220506204343264.png" alt="image-20220506204343264"></p>
<h2 id="readOnly：是否只读"><a href="#readOnly：是否只读" class="headerlink" title="readOnly：是否只读"></a>readOnly：是否只读</h2><p>（1）读：查询操作，写：添加修改删除操作<br>（2）readOnly 默认值 false，表示可以查询，可以添加修改删除操作<br>（3）设置 readOnly 值是 true，设置成 true 之后，只能查询</p>
<h2 id="rollbackFor：回滚"><a href="#rollbackFor：回滚" class="headerlink" title="rollbackFor：回滚"></a>rollbackFor：回滚</h2><p>设置</p>
<p><strong>出现哪些异常</strong></p>
<p>进行事务回滚</p>
<h2 id="noRollbackFor：不回滚"><a href="#noRollbackFor：不回滚" class="headerlink" title="noRollbackFor：不回滚"></a>noRollbackFor：不回滚</h2><p>设置</p>
<p>出现哪些异常</p>
<p>不进行事务回滚</p>
<h1 id="事务操作（XML-声明式事务管理）"><a href="#事务操作（XML-声明式事务管理）" class="headerlink" title="事务操作（XML 声明式事务管理）"></a>事务操作（XML 声明式事务管理）</h1><p>1、在 spring 配置文件中进行配置<br>第一步 配置事务管理器<br>第二步 配置通知（增强的那一部分就叫通知    AOP中说到过）<br>第三步 配置切入点和切面</p>
<p>前面我们还需要提前配置这些</p>
<p>还有一个组件扫描</p>
<p><img src="/../pic/image-20220506210323095.png" alt="image-20220506210323095"></p>
<p><img src="/../pic/image-20220506204956140.png" alt="image-20220506204956140"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 创建事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--2 配置通知--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txadvice&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置事务参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--指定哪种规则的方法上面添加事务--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;accountMoney&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span><span class="comment">&lt;!--后面可以加属性 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;tx:method name=&quot;account*&quot;/&gt;只要是account开头的方法就加上--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--3 配置切入点和切面--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置切入点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pt&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.atguigu.spring5.service.UserService.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="事务操作（完全注解声明式事务管理）"><a href="#事务操作（完全注解声明式事务管理）" class="headerlink" title="事务操作（完全注解声明式事务管理）"></a>事务操作（完全注解声明式事务管理）</h1><p><img src="/../pic/image-20220506210330883.png" alt="image-20220506210330883"></p>
<h1 id=""><a href="#" class="headerlink" title=""></a><img src="/../pic/image-20220506204956140.png" alt="image-20220506204956140"></h1><p>创建配置类，使用配置类替代 xml 配置文件（完全替代了）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.atguigu&quot;)</span> <span class="comment">//组件扫描</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span> <span class="comment">//开启事务</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TxConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建数据库连接池</span></span><br><span class="line">    <span class="meta">@Bean</span><span class="comment">//利用bean注解，返回值必须是那个类</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">getDruidDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql:///user_db&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建 JdbcTemplate 对象</span></span><br><span class="line">    <span class="comment">//由于IOC容器中已经存在了DataSource dataSource对象，可以直接用，根据类型直接找到这个对象</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">     </span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line">        <span class="comment">//到 ioc 容器中根据类型找到 dataSource</span></span><br><span class="line">        <span class="comment">//注入 dataSource</span></span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建事务管理器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        transactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试的时候要用<strong>AnnotationConfigApplicationContext</strong>这个类哦</p>
<p><img src="/../pic/image-20220506211026301.png" alt="image-20220506211026301"></p>
<h1 id="事务操作具体步骤"><a href="#事务操作具体步骤" class="headerlink" title="事务操作具体步骤"></a>事务操作具体步骤</h1><p><img src="/../pic/image-20220522121552047.png" alt="image-20220522121552047"></p>
<p><img src="/../pic/image-20220522121850629.png" alt="image-20220522121850629"></p>
<p><img src="/../pic/image-20220522121929892.png" alt="image-20220522121929892"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">小白菜</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/08/29/Spring/">http://example.com/2022/08/29/Spring/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">是小白菜哦</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6/">后端框架</a></div><div class="post_share"><div class="social-share" data-image="https://hakaimg.com/i/2022/08/30/isgbxw.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/08/29/SpringBoot/"><img class="prev-cover" src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpringBoot</div></div></a></div><div class="next-post pull-right"><a href="/2022/08/29/JavaWeb/"><img class="next-cover" src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JavaWeb</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/08/29/Mybatis/" title="Mybatis"><img class="cover" src="https://hakaimg.com/i/2022/08/30/iq4tw8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-29</div><div class="title">Mybatis</div></div></a></div><div><a href="/2022/08/29/SpringBoot/" title="SpringBoot"><img class="cover" src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220806101221.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-29</div><div class="title">SpringBoot</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/pic.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">小白菜</div><div class="author-info__description">头发多多</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Xiaobaicai350"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Xiaobaicai350" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1499487526@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">阳光斑斓 微风含香 爱与四季 皆是向往 <img height="230" lengh="230" src="https://raw.githubusercontent.com/Xiaobaicai350/picBed/master/xiaobaicai/1.gif"/></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#IOC%EF%BC%88%E6%A6%82%E5%BF%B5%E5%92%8C%E5%8E%9F%E7%90%86%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">IOC（概念和原理）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#DI-Dependency-Injection-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"><span class="toc-number">1.1.</span> <span class="toc-text">DI(Dependency Injection)依赖注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IOC%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.</span> <span class="toc-text">IOC核心概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IOC%EF%BC%88BeanFactory-%E6%8E%A5%E5%8F%A3%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">IOC（BeanFactory 接口）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88%E6%A6%82%E5%BF%B5%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">IOC 操作 Bean 管理（概念）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88%E5%9F%BA%E4%BA%8E-xml-%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="toc-number">1.4.1.</span> <span class="toc-text">IOC 操作 Bean 管理（基于 xml 方式）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E4%BA%8EXML%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">1.基于XML创建对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9F%BA%E4%BA%8EXML%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">2.基于XML注入属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F%EF%BC%9A%E4%BD%BF%E7%94%A8-set-%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5-%E9%87%8D%E7%82%B9"><span class="toc-number">1.4.1.2.1.</span> <span class="toc-text">第一种注入方式：使用 set 方法进行注入(重点)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%9C%89%E5%8F%82%E6%95%B0%E6%9E%84%E9%80%A0%EF%BC%88%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%89%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5%EF%BC%88%E6%97%A0set%E6%96%B9%E6%B3%95%E7%94%A8%E8%BF%99%E4%B8%AA%EF%BC%89"><span class="toc-number">1.4.1.2.2.</span> <span class="toc-text">第二种注入方式：使用有参数构造（构造器）进行注入（无set方法用这个）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F%EF%BC%9Ap-%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E6%B3%A8%E5%85%A5%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">1.4.1.2.3.</span> <span class="toc-text">第三种注入方式：p 名称空间注入（了解）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88XML%E6%B3%A8%E5%85%A5%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7%EF%BC%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">IOC 操作 Bean 管理（XML注入其他类型属性）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">1、字面量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89null-%E5%80%BC%EF%BC%88%E7%BB%99%E5%B1%9E%E6%80%A7%E8%B5%8B%E7%A9%BA%E5%80%BC%EF%BC%89"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">（1）null 值（给属性赋空值）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%B1%9E%E6%80%A7%E5%80%BC%E5%8C%85%E5%90%AB%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">（2）属性值包含特殊符号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7-%E5%A4%96%E9%83%A8-bean"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">2、注入属性-外部 bean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7-%E5%86%85%E9%83%A8-bean"><span class="toc-number">1.4.2.5.</span> <span class="toc-text">3、注入属性-内部 bean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%B8%BE%E4%B8%AA%E4%BE%8B%E5%AD%90"><span class="toc-number">1.4.2.6.</span> <span class="toc-text">（1）举个例子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%9C%A8%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%B9%8B%E9%97%B4%E8%A1%A8%E7%A4%BA%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%EF%BC%8C%E5%91%98%E5%B7%A5%E8%A1%A8%E7%A4%BA%E6%89%80%E5%B1%9E%E9%83%A8%E9%97%A8%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E8%A1%A8%E7%A4%BA"><span class="toc-number">1.4.2.7.</span> <span class="toc-text">（2）在实体类之间表示一对多关系，员工表示所属部门，使用对象类型属性进行表示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%9C%A8-spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.2.8.</span> <span class="toc-text">（3）在 spring 配置文件中进行配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7-%E7%BA%A7%E8%81%94%E8%B5%8B%E5%80%BC"><span class="toc-number">1.4.2.9.</span> <span class="toc-text">4、注入属性-级联赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%AC%AC%E4%B8%80%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-number">1.4.2.9.1.</span> <span class="toc-text">（1）第一种写法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-number">1.4.2.9.2.</span> <span class="toc-text">（2）第二种写法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IOC%E6%93%8D%E4%BD%9CBean%E7%AE%A1%E7%90%86%EF%BC%88XML%E6%B3%A8%E5%85%A5%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="toc-number">1.4.3.</span> <span class="toc-text">IOC操作Bean管理（XML注入集合类型）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E6%B3%A8%E5%85%A5%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">1、注入数组类型属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E6%B3%A8%E5%85%A5-List-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">2、注入 List 集合类型属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E6%B3%A8%E5%85%A5-Map-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">3、注入 Map 集合类型属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%9C%A8%E9%9B%86%E5%90%88%E9%87%8C%E9%9D%A2%E8%AE%BE%E7%BD%AE%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E5%80%BC"><span class="toc-number">1.4.3.4.</span> <span class="toc-text">4、在集合里面设置对象类型值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E6%8A%8A%E9%9B%86%E5%90%88%E6%B3%A8%E5%85%A5%E9%83%A8%E5%88%86%E6%8F%90%E5%8F%96%E5%87%BA%E6%9D%A5"><span class="toc-number">1.4.3.5.</span> <span class="toc-text">5、把集合注入部分提取出来</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88FactoryBean%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">IOC 操作 Bean 管理（FactoryBean）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88bean-%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">IOC 操作 Bean 管理（bean 作用域）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">IOC 操作 Bean 管理（bean 生命周期）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">4.1.</span> <span class="toc-text">1、生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">4.2.</span> <span class="toc-text">2、bean 生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%BC%94%E7%A4%BA-bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">4.3.</span> <span class="toc-text">3、演示 bean 生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%8A%A0%E5%85%A5bean-%E7%9A%84%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%8Cbean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%9C%89%E4%B8%83%E6%AD%A5"><span class="toc-number">4.4.</span> <span class="toc-text">4、加入bean 的后置处理器，bean 生命周期有七步</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E6%BC%94%E7%A4%BA%E6%B7%BB%E5%8A%A0%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E5%99%A8%E6%95%88%E6%9E%9C"><span class="toc-number">4.5.</span> <span class="toc-text">5、演示添加后置处理器效果</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88xml-%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">IOC 操作 Bean 管理（xml 自动装配）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">5.1.</span> <span class="toc-text">1、什么是自动装配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%BC%94%E7%A4%BA%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E8%BF%87%E7%A8%8B"><span class="toc-number">5.2.</span> <span class="toc-text">2、演示自动装配过程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">IOC 操作 Bean 管理(外部属性文件)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%9B%B4%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF"><span class="toc-number">6.1.</span> <span class="toc-text">1、直接配置数据库信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%8F%AF%E4%BB%A5%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">6.2.</span> <span class="toc-text">2、可以引入外部属性文件配置数据库连接池</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IOC%EF%BC%88xml%E7%89%88%E6%9C%AC%EF%BC%89%E6%80%BB%E7%BB%93"><span class="toc-number">7.</span> <span class="toc-text">IOC（xml版本）总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="toc-number">8.</span> <span class="toc-text">IOC 操作 Bean 管理(基于注解方式)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%A8%E8%A7%A3"><span class="toc-number">8.1.</span> <span class="toc-text">1、什么是注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Spring-%E9%92%88%E5%AF%B9-Bean-%E7%AE%A1%E7%90%86%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%8F%90%E4%BE%9B%E6%B3%A8%E8%A7%A3"><span class="toc-number">8.2.</span> <span class="toc-text">2、Spring 针对 Bean 管理中创建对象提供注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-number">8.3.</span> <span class="toc-text">3、基于注解方式实现对象创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%BC%80%E5%90%AF%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E7%BB%86%E8%8A%82%E9%85%8D%E7%BD%AE"><span class="toc-number">8.4.</span> <span class="toc-text">4、开启组件扫描细节配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="toc-number">8.5.</span> <span class="toc-text">5、基于注解方式实现属性注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89-Autowired%EF%BC%9A%E6%A0%B9%E6%8D%AE%E5%B1%9E%E6%80%A7%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">8.5.1.</span> <span class="toc-text">（1）@Autowired：根据属性类型进行自动装配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89-Qualifier%EF%BC%9A%E6%A0%B9%E6%8D%AE%E5%90%8D%E7%A7%B0%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5"><span class="toc-number">8.5.2.</span> <span class="toc-text">（2）@Qualifier：根据名称进行注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89-Resource%EF%BC%9A%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E5%90%8D%E7%A7%B0%E6%B3%A8%E5%85%A5%EF%BC%88%E8%BF%99%E4%B8%AA%E6%98%AF%E4%B8%8D%E6%8E%A8%E8%8D%90%E7%94%A8%E7%9A%84%EF%BC%81%EF%BC%81%E7%94%A8%E4%B8%8A%E9%9D%A2%E4%B8%A4%E4%B8%AA%E5%B0%B1%E8%A1%8C%EF%BC%89"><span class="toc-number">8.5.3.</span> <span class="toc-text">（3）@Resource：可以根据类型注入，可以根据名称注入（这个是不推荐用的！！用上面两个就行）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%884%EF%BC%89-Value%EF%BC%9A%E6%B3%A8%E5%85%A5%E6%99%AE%E9%80%9A%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">8.5.4.</span> <span class="toc-text">（4）@Value：注入普通类型属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">8.6.</span> <span class="toc-text">6、完全注解开发</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E5%BC%8F%E7%AE%A1%E7%90%86%E7%AC%AC%E4%B8%89%E6%96%B9bean"><span class="toc-number">9.</span> <span class="toc-text">通过注解的方式管理第三方bean</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%AF%BC%E5%85%A5%E5%85%B6%E4%BB%96%E7%9A%84bean"><span class="toc-number">9.1.</span> <span class="toc-text">不导入其他的bean</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%85%B6%E4%BB%96%E7%9A%84bean"><span class="toc-number">9.2.</span> <span class="toc-text">导入其他的bean</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%B1%BB%E5%9E%8Bbean"><span class="toc-number">9.2.1.</span> <span class="toc-text">简单类型bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B-bean"><span class="toc-number">9.2.2.</span> <span class="toc-text">引用类型 bean</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E6%80%BB%E7%BB%93%E4%B8%8Exml%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">10.</span> <span class="toc-text">注解总结与xml的对比</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring%E6%95%B4%E5%90%88MyBatis"><span class="toc-number">11.</span> <span class="toc-text">Spring整合MyBatis</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring%E6%95%B4%E5%90%88Junit"><span class="toc-number">12.</span> <span class="toc-text">Spring整合Junit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP%EF%BC%88%E6%A6%82%E5%BF%B5%EF%BC%89"><span class="toc-number">13.</span> <span class="toc-text">AOP（概念）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP%EF%BC%88%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%EF%BC%89"><span class="toc-number">14.</span> <span class="toc-text">AOP（底层原理）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81AOP-%E5%BA%95%E5%B1%82%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">14.1.</span> <span class="toc-text">1、AOP 底层使用动态代理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D-%E6%9C%89%E6%8E%A5%E5%8F%A3%E6%83%85%E5%86%B5%EF%BC%8C%E4%BD%BF%E7%94%A8-JDK-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">14.1.0.1.</span> <span class="toc-text">第一种 有接口情况，使用 JDK 动态代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D-%E6%B2%A1%E6%9C%89%E6%8E%A5%E5%8F%A3%E6%83%85%E5%86%B5%EF%BC%8C%E4%BD%BF%E7%94%A8-CGLIB-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">14.1.0.2.</span> <span class="toc-text">第二种 没有接口情况，使用 CGLIB 动态代理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%EF%BC%88JDK-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%89"><span class="toc-number">14.2.</span> <span class="toc-text">AOP（JDK 动态代理）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%8C%E4%BD%BF%E7%94%A8Proxy%E7%B1%BB%E9%87%8C%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1"><span class="toc-number">14.2.1.</span> <span class="toc-text">1.使用JDK动态代理，使用Proxy类里面的方法创建代理对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%BC%96%E5%86%99-JDK-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E4%BB%A3%E7%A0%81"><span class="toc-number">14.2.2.</span> <span class="toc-text">2、编写 JDK 动态代理代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP%EF%BC%88%E6%93%8D%E4%BD%9C%E6%9C%AF%E8%AF%AD%EF%BC%89"><span class="toc-number">15.</span> <span class="toc-text">AOP（操作术语）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E7%82%B9"><span class="toc-number">15.1.</span> <span class="toc-text">连接点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E5%85%A5%E7%82%B9"><span class="toc-number">15.2.</span> <span class="toc-text">切入点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%9F%A5%EF%BC%88%E5%A2%9E%E5%BC%BA%EF%BC%89"><span class="toc-number">15.3.</span> <span class="toc-text">通知（增强）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E9%9D%A2"><span class="toc-number">15.4.</span> <span class="toc-text">切面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP-%E6%93%8D%E4%BD%9C%EF%BC%88%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C%EF%BC%89"><span class="toc-number">16.</span> <span class="toc-text">AOP 操作（准备工作）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP-%E6%93%8D%E4%BD%9C%EF%BC%88AspectJ-%E6%B3%A8%E8%A7%A3%EF%BC%89"><span class="toc-number">17.</span> <span class="toc-text">AOP 操作（AspectJ 注解）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E7%B1%BB%EF%BC%8C%E5%9C%A8%E7%B1%BB%E9%87%8C%E9%9D%A2%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95"><span class="toc-number">17.1.</span> <span class="toc-text">1、创建类，在类里面定义方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E5%A2%9E%E5%BC%BA%E7%B1%BB%EF%BC%88%E7%BC%96%E5%86%99%E5%A2%9E%E5%BC%BA%E9%80%BB%E8%BE%91%EF%BC%89"><span class="toc-number">17.2.</span> <span class="toc-text">2、创建增强类（编写增强逻辑）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E8%BF%9B%E8%A1%8C%E9%80%9A%E7%9F%A5%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">17.3.</span> <span class="toc-text">3、进行通知的配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E9%85%8D%E7%BD%AE%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%80%9A%E7%9F%A5"><span class="toc-number">17.4.</span> <span class="toc-text">4、配置不同类型的通知</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E7%9B%B8%E5%90%8C%E7%9A%84%E5%88%87%E5%85%A5%E7%82%B9%E6%8A%BD%E5%8F%96"><span class="toc-number">17.5.</span> <span class="toc-text">5、相同的切入点抽取</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP-%E6%93%8D%E4%BD%9C%EF%BC%88AspectJ-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%89"><span class="toc-number">18.</span> <span class="toc-text">AOP 操作（AspectJ 配置文件）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP%E6%B3%A8%E8%A7%A3%E6%AD%A5%E9%AA%A4"><span class="toc-number">19.</span> <span class="toc-text">AOP注解步骤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP%E6%80%BB%E7%BB%93"><span class="toc-number">20.</span> <span class="toc-text">AOP总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JdbcTemplate-%E6%A6%82%E5%BF%B5%E5%92%8C%E5%87%86%E5%A4%87"><span class="toc-number">21.</span> <span class="toc-text">JdbcTemplate(概念和准备)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-JdbcTemplate"><span class="toc-number">21.1.</span> <span class="toc-text">1、什么是 JdbcTemplate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">21.2.</span> <span class="toc-text">2、准备工作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%B7%BB%E5%8A%A0%EF%BC%89"><span class="toc-number">22.</span> <span class="toc-text">JdbcTemplate 操作数据库（添加）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%AF%B9%E5%BA%94%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">22.1.</span> <span class="toc-text">1、对应数据库创建实体类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%BC%96%E5%86%99-service-%E5%92%8C-dao"><span class="toc-number">22.2.</span> <span class="toc-text">2、编写 service 和 dao</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-number">22.3.</span> <span class="toc-text">3、测试类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%EF%BC%89"><span class="toc-number">23.</span> <span class="toc-text">JdbcTemplate 操作数据库（修改和删除）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%EF%BC%89"><span class="toc-number">24.</span> <span class="toc-text">JdbcTemplate 操作数据库（查询）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E5%80%BC%EF%BC%89"><span class="toc-number">24.1.</span> <span class="toc-text">JdbcTemplate 操作数据库（查询返回某个值）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%EF%BC%89"><span class="toc-number">24.2.</span> <span class="toc-text">JdbcTemplate 操作数据库（查询返回对象）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E9%9B%86%E5%90%88%EF%BC%89"><span class="toc-number">24.3.</span> <span class="toc-text">JdbcTemplate 操作数据库（查询返回集合）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="toc-number">24.4.</span> <span class="toc-text">JdbcTemplate 操作数据库（批量操作）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JdbcTemplate-%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C"><span class="toc-number">24.4.1.</span> <span class="toc-text">JdbcTemplate 实现批量添加操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JdbcTemplate-%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">24.4.2.</span> <span class="toc-text">JdbcTemplate 实现批量修改操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JdbcTemplate-%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">24.4.3.</span> <span class="toc-text">JdbcTemplate 实现批量删除操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5%EF%BC%89"><span class="toc-number">25.</span> <span class="toc-text">事务操作（事务概念）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E6%90%AD%E5%BB%BA%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%E7%8E%AF%E5%A2%83%EF%BC%89"><span class="toc-number">26.</span> <span class="toc-text">事务操作（搭建事务操作环境）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93user-db%E5%92%8C%E8%A1%A8t-account%EF%BC%8C%E6%B7%BB%E5%8A%A0%E8%AE%B0%E5%BD%95"><span class="toc-number">26.1.</span> <span class="toc-text">1、创建数据库user_db和表t_account，添加记录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA-service%EF%BC%8C%E6%90%AD%E5%BB%BA-dao%EF%BC%8C%E5%AE%8C%E6%88%90%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%92%8C%E6%B3%A8%E5%85%A5%E5%85%B3%E7%B3%BB"><span class="toc-number">26.2.</span> <span class="toc-text">2、创建 service，搭建 dao，完成对象创建和注入关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%9C%A8-dao-%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E6%96%B9%E6%B3%95%EF%BC%9A%E5%A4%9A%E9%92%B1%E5%92%8C%E5%B0%91%E9%92%B1%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%9C%A8-service-%E5%88%9B%E5%BB%BA%E6%96%B9%E6%B3%95%EF%BC%88%E8%BD%AC%E8%B4%A6%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">26.3.</span> <span class="toc-text">3、在 dao 创建两个方法：多钱和少钱的方法，在 service 创建方法（转账的方法）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E4%B8%8A%E9%9D%A2%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%AD%A3%E5%B8%B8%E6%89%A7%E8%A1%8C%E6%B2%A1%E6%9C%89%E9%97%AE%E9%A2%98%E7%9A%84%EF%BC%8C%E4%BD%86%E6%98%AF%E5%A6%82%E6%9E%9C%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%87%BA%E7%8E%B0%E5%BC%82%E5%B8%B8%EF%BC%8C%E6%9C%89%E9%97%AE%E9%A2%98%E7%9A%84%E8%AF%9D%EF%BC%8C%E5%B0%B1%E4%BC%9A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%EF%BC%8C%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">26.4.</span> <span class="toc-text">4、上面代码，如果正常执行没有问题的，但是如果代码执行过程中出现异常，有问题的话，就会出现问题，解决办法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88Spring-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D%EF%BC%89"><span class="toc-number">27.</span> <span class="toc-text">事务操作（Spring 事务管理介绍）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-number">27.1.</span> <span class="toc-text">事务操作（注解声明式事务管理）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%9C%A8-spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">27.1.1.</span> <span class="toc-text">1、在 spring 配置文件配置事务管理器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%9C%A8-spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E5%BC%80%E5%90%AF%E4%BA%8B%E5%8A%A1%E6%B3%A8%E8%A7%A3"><span class="toc-number">27.1.2.</span> <span class="toc-text">2、在 spring 配置文件，开启事务注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%9C%A8-service-%E7%B1%BB%E4%B8%8A%E9%9D%A2%EF%BC%88%E6%88%96%E8%80%85-service-%E7%B1%BB%E9%87%8C%E9%9D%A2%E6%96%B9%E6%B3%95%E4%B8%8A%E9%9D%A2%EF%BC%89%E6%B7%BB%E5%8A%A0%E4%BA%8B%E5%8A%A1%E6%B3%A8%E8%A7%A3"><span class="toc-number">27.1.3.</span> <span class="toc-text">3、在 service 类上面（或者 service 类里面方法上面）添加事务注解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-number">28.</span> <span class="toc-text">事务操作（声明式事务管理参数配置）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#propagation%EF%BC%9A%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA"><span class="toc-number">28.1.</span> <span class="toc-text">propagation：事务传播行为</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ioslation%EF%BC%9A%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">28.2.</span> <span class="toc-text">ioslation：事务隔离级别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%8F%E8%AF%BB%EF%BC%9A%E4%B8%80%E4%B8%AA%E6%9C%AA%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E8%AF%BB%E5%8F%96%E5%88%B0%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%9C%AA%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">28.2.1.</span> <span class="toc-text">脏读：一个未提交事务读取到另一个未提交事务的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%EF%BC%9A%E4%B8%80%E4%B8%AA%E6%9C%AA%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E8%AF%BB%E5%8F%96%E5%88%B0%E5%8F%A6%E4%B8%80%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">28.2.2.</span> <span class="toc-text">不可重复读：一个未提交事务读取到另一提交事务修改数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E8%AF%BB%EF%BC%9A%E4%B8%80%E4%B8%AA%E6%9C%AA%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E8%AF%BB%E5%8F%96%E5%88%B0%E5%8F%A6%E4%B8%80%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">28.2.3.</span> <span class="toc-text">虚读：一个未提交事务读取到另一提交事务添加数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#timeout%EF%BC%9A%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4"><span class="toc-number">28.3.</span> <span class="toc-text">timeout：超时时间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#readOnly%EF%BC%9A%E6%98%AF%E5%90%A6%E5%8F%AA%E8%AF%BB"><span class="toc-number">28.4.</span> <span class="toc-text">readOnly：是否只读</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rollbackFor%EF%BC%9A%E5%9B%9E%E6%BB%9A"><span class="toc-number">28.5.</span> <span class="toc-text">rollbackFor：回滚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#noRollbackFor%EF%BC%9A%E4%B8%8D%E5%9B%9E%E6%BB%9A"><span class="toc-number">28.6.</span> <span class="toc-text">noRollbackFor：不回滚</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88XML-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-number">29.</span> <span class="toc-text">事务操作（XML 声明式事务管理）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-number">30.</span> <span class="toc-text">事务操作（完全注解声明式事务管理）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">31.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4"><span class="toc-number">32.</span> <span class="toc-text">事务操作具体步骤</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/18/Java%E9%9B%86%E5%90%88%E8%AF%A6%E8%A7%A3/" title="Java集合详解">Java集合详解</a><time datetime="2023-08-18T07:12:06.000Z" title="发表于 2023-08-18 15:12:06">2023-08-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/08/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E5%85%A8%E9%9D%A2%E6%8F%AD%E7%A7%98/" title="Redis网络模型全面揭秘">Redis网络模型全面揭秘</a><time datetime="2023-08-08T03:29:32.000Z" title="发表于 2023-08-08 11:29:32">2023-08-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/08/%E5%BD%BB%E5%BA%95%E5%BC%84%E6%87%82Redis%E7%9A%84%E5%86%85%E5%AD%98%E7%AD%96%E7%95%A5/" title="彻底弄懂Redis的内存策略">彻底弄懂Redis的内存策略</a><time datetime="2023-08-08T03:05:02.000Z" title="发表于 2023-08-08 11:05:02">2023-08-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/08/Redis%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE-RESP%E5%8D%8F%E8%AE%AE/" title="Redis通信协议-RESP协议">Redis通信协议-RESP协议</a><time datetime="2023-08-08T02:15:38.000Z" title="发表于 2023-08-08 10:15:38">2023-08-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/07/%E8%AF%A6%E8%A7%A3Redis%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="详解Redis底层数据结构">详解Redis底层数据结构</a><time datetime="2023-08-07T05:48:31.000Z" title="发表于 2023-08-07 13:48:31">2023-08-07</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://hakaimg.com/i/2022/08/30/isgbxw.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By 小白菜</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎来到小白菜的blog~</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script src="/js/sakura.js"></script><script src="https://myhkw.cn/player/js/player.js" id="myhk" key="159611061656" m="1"></script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>